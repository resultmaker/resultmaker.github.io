(self["webpackChunkfirebase"]=self["webpackChunkfirebase"]||[]).push([[998],{276:function(e,t,A){"use strict";A.d(t,{$o:function(){return va},AM:function(){return u},Bd:function(){return sa},Bt:function(){return Ua},EW:function(){return oa},FQ:function(){return hi},G$:function(){return RA},HE:function(){return na},IO:function(){return aa},JH:function(){return fo},Jr:function(){return ko},Kk:function(){return Yo},Lx:function(){return Vo},MQ:function(){return No},Od:function(){return _o},Ot:function(){return wa},R:function(){return ta},S1:function(){return Ro},Sb:function(){return Ca},Sl:function(){return Uo},TD:function(){return ma},TQ:function(){return jo},U2:function(){return bo},U7:function(){return Qa},VF:function(){return Qo},Vt:function(){return Lo},Vx:function(){return Io},Wu:function(){return Po},cy:function(){return Eo},dH:function(){return ya},e0:function(){return qo},g2:function(){return Zo},i3:function(){return ba},iH:function(){return yo},iU:function(){return vo},jM:function(){return xo},mI:function(){return fi},nP:function(){return Ea},qT:function(){return Co},t8:function(){return Fo},tn:function(){return mo},vA:function(){return ho},vh:function(){return zo},wj:function(){return da},yv:function(){return Ho}});var n=A(816),r=A(463),s=A(444),i=A(333);const o="@firebase/database",a="0.13.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let c="";function u(e){c=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,s.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,s.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,s.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new l(t)}}catch(t){}return new h},f=d("localStorage"),g=d("sessionStorage"),p=new i.Yd("@firebase/database"),B=function(){let e=1;return function(){return e++}}(),m=function(e){const t=(0,s.dS)(e),A=new s.gQ;A.update(t);const n=A.digest();return s.US.encodeByteArray(n)},w=function(...e){let t="";for(let A=0;A<e.length;A++){const n=e[A];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?t+=w.apply(null,n):t+="object"===typeof n?(0,s.Pz)(n):n,t+=" "}return t};let y=null,C=!0;const v=function(e,t){(0,s.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(p.logLevel=i["in"].VERBOSE,y=p.log.bind(p),t&&g.set("logging_enabled",!0)):"function"===typeof e?y=e:(y=null,g.remove("logging_enabled"))},Q=function(...e){if(!0===C&&(C=!1,null===y&&!0===g.get("logging_enabled")&&v(!0)),y){const t=w.apply(null,e);y(t)}},_=function(e){return function(...t){Q(e,...t)}},F=function(...e){const t="FIREBASE INTERNAL ERROR: "+w(...e);p.error(t)},U=function(...e){const t=`FIREBASE FATAL ERROR: ${w(...e)}`;throw p.error(t),new Error(t)},E=function(...e){const t="FIREBASE WARNING: "+w(...e);p.warn(t)},I=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},b=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},T=function(e){if((0,s.Yr)()||"complete"===document.readyState)e();else{let t=!1;const A=function(){document.body?t||(t=!0,e()):setTimeout(A,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",A,!1),window.addEventListener("load",A,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&A()})),window.attachEvent("onload",A))}},S="[MIN_NAME]",D="[MAX_NAME]",x=function(e,t){if(e===t)return 0;if(e===S||t===D)return-1;if(t===S||e===D)return 1;{const A=W(e),n=W(t);return null!==A?null!==n?A-n===0?e.length-t.length:A-n:-1:null!==n?1:e<t?-1:1}},H=function(e,t){return e===t?0:e<t?-1:1},k=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,s.Pz)(t))},L=function(e){if("object"!==typeof e||null===e)return(0,s.Pz)(e);const t=[];for(const n in e)t.push(n);t.sort();let A="{";for(let n=0;n<t.length;n++)0!==n&&(A+=","),A+=(0,s.Pz)(t[n]),A+=":",A+=L(e[t[n]]);return A+="}",A},N=function(e,t){const A=e.length;if(A<=t)return[e];const n=[];for(let r=0;r<A;r+=t)r+t>A?n.push(e.substring(r,A)):n.push(e.substring(r,r+t));return n};function R(e,t){for(const A in e)e.hasOwnProperty(A)&&t(A,e[A])}const M=function(e){(0,s.hu)(!b(e),"Invalid JSON number");const t=11,A=52,n=(1<<t-1)-1;let r,i,o,a,c;0===e?(i=0,o=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),n),i=a+n,o=Math.round(e*Math.pow(2,A-a)-Math.pow(2,A))):(i=0,o=Math.round(e/Math.pow(2,1-n-A))));const u=[];for(c=A;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const l=u.join("");let h="";for(c=0;c<64;c+=8){let e=parseInt(l.substr(c,8),2).toString(16);1===e.length&&(e="0"+e),h+=e}return h.toLowerCase()},O=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},P=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};function K(e,t){let A="Unknown Error";"too_big"===e?A="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?A="Client doesn't have permission to access the desired data.":"unavailable"===e&&(A="The service is unavailable");const n=new Error(e+" at "+t._path.toString()+": "+A);return n.code=e.toUpperCase(),n}const V=new RegExp("^-?(0*)\\d{1,10}$"),G=-2147483648,q=2147483647,W=function(e){if(V.test(e)){const t=Number(e);if(t>=G&&t<=q)return t}return null},j=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw E("Exception was thrown by user callback.",e),t}),Math.floor(0))}},J=function(){const e="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Y=function(e,t){const A=setTimeout(e,t);return"object"===typeof A&&A["unref"]&&A["unref"](),A};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class X{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,A)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,A):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){E(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e,t,A){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=A,this.auth_=null,this.auth_=A.getImmediate({optional:!0}),this.auth_||A.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Q("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,A)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,A):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',E(e)}}class ${constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}$.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Z="5",ee="v",te="s",Ae="r",ne="f",re=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,se="ls",ie="p",oe="ac",ae="websocket",ce="long_polling";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ue{constructor(e,t,A,n,r=!1,s="",i=!1){this.secure=t,this.namespace=A,this.webSocketOnly=n,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=i,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function le(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function he(e,t,A){let n;if((0,s.hu)("string"===typeof t,"typeof type must == string"),(0,s.hu)("object"===typeof A,"typeof params must == object"),t===ae)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ce)throw new Error("Unknown connection type: "+t);n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}le(e)&&(A["ns"]=e.namespace);const r=[];return R(A,((e,t)=>{r.push(e+"="+t)})),n+r.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,s.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,s.p$)(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={},ge={};function pe(e){const t=e.toString();return fe[t]||(fe[t]=new de),fe[t]}function Be(e,t){const A=e.toString();return ge[A]||(ge[A]=t()),ge[A]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){this.pendingResponses[e]=t;while(this.pendingResponses[this.currentResponseNum]){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&j((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we="start",ye="close",Ce="pLPCommand",ve="pRTLPCB",Qe="id",_e="pw",Fe="ser",Ue="cb",Ee="seg",Ie="ts",be="d",Te="dframe",Se=1870,De=30,xe=Se-De,He=25e3,ke=3e4;class Le{constructor(e,t,A,n,r,s,i){this.connId=e,this.repoInfo=t,this.applicationId=A,this.appCheckToken=n,this.authToken=r,this.transportSessionId=s,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_(e),this.stats_=pe(t),this.urlFn=e=>(this.appCheckToken&&(e[oe]=this.appCheckToken),he(t,ce,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new me(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(ke)),T((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ne(((...e)=>{const[t,A,n,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===we)this.id=A,this.password=n;else{if(t!==ye)throw new Error("Unrecognized command received: "+t);A?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(A,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,A]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,A)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[we]="t",e[Fe]=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e[Ue]=this.scriptTagHolder.uniqueCallbackIdentifier),e[ee]=Z,this.transportSessionId&&(e[te]=this.transportSessionId),this.lastSessionId&&(e[se]=this.lastSessionId),this.applicationId&&(e[ie]=this.applicationId),this.appCheckToken&&(e[oe]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&re.test(location.hostname)&&(e[Ae]=ne);const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Le.forceAllow_=!0}static forceDisallow(){Le.forceDisallow_=!0}static isAvailable(){return!(0,s.Yr)()&&(!!Le.forceAllow_||!Le.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!O()&&!P())}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,s.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const A=(0,s.h$)(t),n=N(A,xe);for(let r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,s.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const A={};A[Te]="t",A[Qe]=e,A[_e]=t,this.myDisconnFrame.src=this.urlFn(A),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,s.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ne{constructor(e,t,A,n){if(this.onDisconnect=A,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,s.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=B(),window[Ce+this.uniqueCallbackIdentifier]=e,window[ve+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ne.createIFrame_();let A="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){const e=document.domain;A='<script>document.domain="'+e+'";<\/script>'}const n="<html><body>"+A+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(n),this.myIFrame.doc.close()}catch(r){Q("frame writing exception"),r.stack&&Q(r.stack),Q(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{const t=e.contentWindow.document;t||Q("No IE domain setting required")}catch(t){const A=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+A+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){this.myID=e,this.myPW=t,this.alive=!0;while(this.newRequest_());}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Qe]=this.myID,e[_e]=this.myPW,e[Fe]=this.currentSerial;let t=this.urlFn(e),A="",n=0;while(this.pendingSegs.length>0){const e=this.pendingSegs[0];if(!(e.d.length+De+A.length<=Se))break;{const e=this.pendingSegs.shift();A=A+"&"+Ee+n+"="+e.seg+"&"+Ie+n+"="+e.ts+"&"+be+n+"="+e.d,n++}}return t+=A,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,A){this.pendingSegs.push({seg:e,ts:t,d:A}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const A=()=>{this.outstandingRequests.delete(t),this.newRequest_()},n=setTimeout(A,Math.floor(He)),r=()=>{clearTimeout(n),A()};this.addTag(e,r)}addTag(e,t){(0,s.Yr)()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const A=this.myIFrame.doc.createElement("script");A.type="text/javascript",A.async=!0,A.src=e,A.onload=A.onreadystatechange=function(){const e=A.readyState;e&&"loaded"!==e&&"complete"!==e||(A.onload=A.onreadystatechange=null,A.parentNode&&A.parentNode.removeChild(A),t())},A.onerror=()=>{Q("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(A)}catch(A){}}),Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re=16384,Me=45e3;let Oe=null;"undefined"!==typeof MozWebSocket?Oe=MozWebSocket:"undefined"!==typeof WebSocket&&(Oe=WebSocket);class Pe{constructor(e,t,A,n,r,s,i){this.connId=e,this.applicationId=A,this.appCheckToken=n,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_(this.connId),this.stats_=pe(t),this.connURL=Pe.connectionURL_(t,s,i,n,A),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,A,n,r){const i={};return i[ee]=Z,!(0,s.Yr)()&&"undefined"!==typeof location&&location.hostname&&re.test(location.hostname)&&(i[Ae]=ne),t&&(i[te]=t),A&&(i[se]=A),n&&(i[oe]=n),r&&(i[ie]=r),he(e,ae,i)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{let e;if((0,s.Yr)()){const e=this.nodeAdmin?"AdminNode":"Node",t={headers:{"User-Agent":`Firebase/${Z}/${c}/${process.platform}/${e}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(t.headers["Authorization"]=`Bearer ${this.authToken}`),this.appCheckToken&&(t.headers["X-Firebase-AppCheck"]=this.appCheckToken);const A={NODE_ENV:"production",BASE_URL:"/"},n=0===this.connURL.indexOf("wss://")?A["HTTPS_PROXY"]||A["https_proxy"]:A["HTTP_PROXY"]||A["http_proxy"];n&&(t["proxy"]={origin:n})}this.mySock=new Oe(this.connURL,[],e)}catch(A){this.log_("Error instantiating WebSocket.");const e=A.message||A.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Pe.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,A=navigator.userAgent.match(t);A&&A.length>1&&parseFloat(A[1])<4.4&&(e=!0)}return!e&&null!==Oe&&!Pe.forceDisallow_}static previouslyFailed(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")}markConnectionHealthy(){f.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,s.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,s.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e["data"];if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,s.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const A=N(t,Re);A.length>1&&this.sendString_(String(A.length));for(let n=0;n<A.length;n++)this.sendString_(A[n])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(Me))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pe.responsesRequiredToBeHealthy=2,Pe.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ke{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Le,Pe]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Pe&&Pe["isAvailable"]();let A=t&&!Pe.previouslyFailed();if(e.webSocketOnly&&(t||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),A=!0),A)this.transports_=[Pe];else{const e=this.transports_=[];for(const t of Ke.ALL_TRANSPORTS)t&&t["isAvailable"]()&&e.push(t);Ke.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ke.globalTransportInitialized_=!1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ve=6e4,Ge=5e3,qe=10240,We=102400,je="t",Je="d",Ye="s",Xe="r",ze="e",$e="o",Ze="a",et="n",tt="p",At="h";class nt{constructor(e,t,A,n,r,s,i,o,a,c){this.id=e,this.repoInfo_=t,this.applicationId_=A,this.appCheckToken_=n,this.authToken_=r,this.onMessage_=s,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_("c:"+this.id+":"),this.transportManager_=new Ke(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;const t=this.connReceiver_(this.conn_),A=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,A)}),Math.floor(0));const n=e["healthyTimeout"]||0;n>0&&(this.healthyTimeout_=Y((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>We?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(je in e){const t=e[je];t===Ze?this.upgradeIfSecondaryHealthy_():t===Xe?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===$e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=k("t",e),A=k("d",e);if("c"===t)this.onSecondaryControl_(A);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(A)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tt,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ze,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:et,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=k("t",e),A=k("d",e);"c"===t?this.onControl_(A):"d"===t&&this.onDataMessage_(A)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=k(je,e);if(Je in e){const A=e[Je];if(t===At)this.onHandshake_(A);else if(t===et){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Ye?this.onConnectionShutdown_(A):t===Xe?this.onReset_(A):t===ze?F("Server Error: "+A):t===$e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):F("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,A=e.v,n=e.h;this.sessionId=e.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Z!==A&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;const t=this.connReceiver_(this.secondaryConn_),A=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,A),Y((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(Ve))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(Ge))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tt,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{put(e,t,A,n){}merge(e,t,A,n){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,A){}onDisconnectMerge(e,t,A){}onDisconnectCancel(e,t){}reportStats(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,s.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const A=[...this.listeners_[e]];for(let e=0;e<A.length;e++)A[e].callback.apply(A[e].context,t)}}on(e,t,A){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:A});const n=this.getInitialEvent(e);n&&t.apply(A,n)}off(e,t,A){this.validateEventType_(e);const n=this.listeners_[e]||[];for(let r=0;r<n.length;r++)if(n[r].callback===t&&(!A||A===n[r].context))return void n.splice(r,1)}validateEventType_(e){(0,s.hu)(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends st{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,s.uI)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new it}getInitialEvent(e){return(0,s.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot=32,at=768;class ct{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ut(){return new ct("")}function lt(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ht(e){return e.pieces_.length-e.pieceNum_}function dt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ct(e.pieces_,t)}function ft(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function gt(e){let t="";for(let A=e.pieceNum_;A<e.pieces_.length;A++)""!==e.pieces_[A]&&(t+="/"+encodeURIComponent(String(e.pieces_[A])));return t||"/"}function pt(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Bt(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let A=e.pieceNum_;A<e.pieces_.length-1;A++)t.push(e.pieces_[A]);return new ct(t,0)}function mt(e,t){const A=[];for(let n=e.pieceNum_;n<e.pieces_.length;n++)A.push(e.pieces_[n]);if(t instanceof ct)for(let n=t.pieceNum_;n<t.pieces_.length;n++)A.push(t.pieces_[n]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&A.push(e[t])}return new ct(A,0)}function wt(e){return e.pieceNum_>=e.pieces_.length}function yt(e,t){const A=lt(e),n=lt(t);if(null===A)return t;if(A===n)return yt(dt(e),dt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ct(e,t){const A=pt(e,0),n=pt(t,0);for(let r=0;r<A.length&&r<n.length;r++){const e=x(A[r],n[r]);if(0!==e)return e}return A.length===n.length?0:A.length<n.length?-1:1}function vt(e,t){if(ht(e)!==ht(t))return!1;for(let A=e.pieceNum_,n=t.pieceNum_;A<=e.pieces_.length;A++,n++)if(e.pieces_[A]!==t.pieces_[n])return!1;return!0}function Qt(e,t){let A=e.pieceNum_,n=t.pieceNum_;if(ht(e)>ht(t))return!1;while(A<e.pieces_.length){if(e.pieces_[A]!==t.pieces_[n])return!1;++A,++n}return!0}class _t{constructor(e,t){this.errorPrefix_=t,this.parts_=pt(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let A=0;A<this.parts_.length;A++)this.byteLength_+=(0,s.ug)(this.parts_[A]);Et(this)}}function Ft(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,s.ug)(t),Et(e)}function Ut(e){const t=e.parts_.pop();e.byteLength_-=(0,s.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}function Et(e){if(e.byteLength_>at)throw new Error(e.errorPrefix_+"has a key path longer than "+at+" bytes ("+e.byteLength_+").");if(e.parts_.length>ot)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ot+") or object contains a cycle "+It(e))}function It(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt extends st{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(t="visibilitychange",e="hidden"):"undefined"!==typeof document["mozHidden"]?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document["msHidden"]?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new bt}getInitialEvent(e){return(0,s.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt=1e3,St=3e5,Dt=3e3,xt=3e4,Ht=1.3,kt=3e4,Lt="server_kill",Nt=3;class Rt extends rt{constructor(e,t,A,n,r,i,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=A,this.onConnectStatus_=n,this.onServerInfoUpdate_=r,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Rt.nextPersistentConnectionId_++,this.log_=_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Tt,this.maxReconnectDelay_=St,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!(0,s.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bt.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&it.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,A){const n=++this.requestNumber_,r={r:n,a:e,b:t};this.log_((0,s.Pz)(r)),(0,s.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),A&&(this.requestCBHash_[n]=A)}get(e){this.initConnection_();const t=new s.BH,A={p:e._path.toString(),q:e._queryObject},n={action:"g",request:A,onComplete:e=>{const n=e["d"];"ok"===e["s"]?(this.onDataUpdate_(A["p"],n,!1,null),t.resolve(n)):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const e=this.outstandingGets_[r];void 0!==e&&n===e&&(delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+r+" timed out on connection"),t.reject(new Error("Client is offline.")))}),Dt),this.connected_&&this.sendGet_(r),t.promise}listen(e,t,A,n){this.initConnection_();const r=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+r),this.listens.has(i)||this.listens.set(i,new Map),(0,s.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,s.hu)(!this.listens.get(i).has(r),"listen() called twice for same path/queryId.");const o={onComplete:n,hashFn:t,query:e,tag:A};this.listens.get(i).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(A=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(A)}))}sendListen_(e){const t=e.query,A=t._path.toString(),n=t._queryIdentifier;this.log_("Listen on "+A+" for "+n);const r={p:A},s="q";e.tag&&(r["q"]=t._queryObject,r["t"]=e.tag),r["h"]=e.hashFn(),this.sendRequest(s,r,(r=>{const s=r["d"],i=r["s"];Rt.warnOnListenWarnings_(s,t);const o=this.listens.get(A)&&this.listens.get(A).get(n);o===e&&(this.log_("listen response",r),"ok"!==i&&this.removeListen_(A,n),e.onComplete&&e.onComplete(i,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&(0,s.r3)(e,"w")){const A=(0,s.DV)(e,"w");if(Array.isArray(A)&&~A.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',A=t._path.toString();E(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${A} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){const t=e&&40===e.length;(t||(0,s.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=xt)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,s.w9)(e)?"auth":"gauth",A={cred:e};null===this.authOverride_?A["noauth"]=!0:"object"===typeof this.authOverride_&&(A["authvar"]=this.authOverride_),this.sendRequest(t,A,(t=>{const A=t["s"],n=t["d"]||"error";this.authToken_===e&&("ok"===A?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(A,n))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e["s"],A=e["d"]||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,A)}))}unlisten(e,t){const A=e._path.toString(),n=e._queryIdentifier;this.log_("Unlisten called for "+A+" "+n),(0,s.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");const r=this.removeListen_(A,n);r&&this.connected_&&this.sendUnlisten_(A,n,e._queryObject,t)}sendUnlisten_(e,t,A,n){this.log_("Unlisten on "+e+" for "+t);const r={p:e},s="n";n&&(r["q"]=A,r["t"]=n),this.sendRequest(s,r)}onDisconnectPut(e,t,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,A):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:A})}onDisconnectMerge(e,t,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,A):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:A})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,A,n){const r={p:t,d:A};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{n&&setTimeout((()=>{n(e["s"],e["d"])}),Math.floor(0))}))}put(e,t,A,n){this.putInternal("p",e,t,A,n)}merge(e,t,A,n){this.putInternal("m",e,t,A,n)}putInternal(e,t,A,n,r){this.initConnection_();const s={p:t,d:A};void 0!==r&&(s["h"]=r),this.outstandingPuts_.push({action:e,request:s,onComplete:n}),this.outstandingPutCount_++;const i=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(i):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,A=this.outstandingPuts_[e].request,n=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,A,(A=>{this.log_(t+" response",A),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),n&&n(A["s"],A["d"])}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{const t=e["s"];if("ok"!==t){const t=e["d"];this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,s.Pz)(e));const t=e["r"],A=this.requestCBHash_[t];A&&(delete this.requestCBHash_[t],A(e["b"]))}else{if("error"in e)throw"A server-side error has occurred: "+e["error"];"a"in e&&this.onDataPush_(e["a"],e["b"])}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t["p"],t["d"],!1,t["t"]):"m"===e?this.onDataUpdate_(t["p"],t["d"],!0,t["t"]):"c"===e?this.onListenRevoked_(t["p"],t["q"]):"ac"===e?this.onAuthRevoked_(t["s"],t["d"]):"apc"===e?this.onAppCheckRevoked_(t["s"],t["d"]):"sd"===e?this.onSecurityDebugPacket_(t):F("Unrecognized action received from server: "+(0,s.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,s.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tt,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Tt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){const e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>kt&&(this.reconnectDelay_=Tt),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ht)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),A=this.onRealtimeDisconnect_.bind(this),n=this.id+":"+Rt.nextConnectionId_++,r=this.lastSessionId;let i=!1,o=null;const a=function(){o?o.close():(i=!0,A())},c=function(e){(0,s.hu)(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,a]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);i?Q("getToken() completed but was canceled"):(Q("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=a&&a.token,o=new nt(n,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,A,(e=>{E(e+" ("+this.repoInfo_.toString()+")"),this.interrupt(Lt)}),r))}catch(F){this.log_("Failed to get token: "+F),i||(this.repoInfo_.nodeAdmin&&E(F),a())}}}interrupt(e){Q("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Q("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,s.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Tt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let A;A=t?t.map((e=>L(e))).join("$"):"default";const n=this.removeListen_(e,A);n&&n.onComplete&&n.onComplete("permission_denied")}removeListen_(e,t){const A=new ct(e).toString();let n;if(this.listens.has(A)){const e=this.listens.get(A);n=e.get(t),e.delete(t),0===e.size&&this.listens.delete(A)}else n=void 0;return n}onAuthRevoked_(e,t){Q("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Nt&&(this.reconnectDelay_=xt,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Q("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Nt&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e["msg"].replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);while(this.onDisconnectRequestQueue_.length){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,s.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+c.replace(/\./g,"-")]=1,(0,s.uI)()?e["framework.cordova"]=1:(0,s.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=it.getInstance().currentlyOnline();return(0,s.xb)(this.interruptReasons_)&&e}}Rt.nextPersistentConnectionId_=0,Rt.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Mt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Mt(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const A=new Mt(S,e),n=new Mt(S,t);return 0!==this.compare(A,n)}minPost(){return Mt.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pt;class Kt extends Ot{static get __EMPTY_NODE(){return Pt}static set __EMPTY_NODE(e){Pt=e}compare(e,t){return x(e.name,t.name)}isDefinedOn(e){throw(0,s.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Mt.MIN}maxPost(){return new Mt(D,Pt)}makePost(e,t){return(0,s.hu)("string"===typeof e,"KeyIndex indexValue must always be a string."),new Mt(e,Pt)}toString(){return".key"}}const Vt=new Kt;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,A,n,r=null){this.isReverse_=n,this.resultGenerator_=r,this.nodeStack_=[];let s=1;while(!e.isEmpty())if(s=t?A(e.key,t):1,n&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_){t=t.left;while(!t.isEmpty())this.nodeStack_.push(t),t=t.right}else{t=t.right;while(!t.isEmpty())this.nodeStack_.push(t),t=t.left}return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class qt{constructor(e,t,A,n,r){this.key=e,this.value=t,this.color=null!=A?A:qt.RED,this.left=null!=n?n:jt.EMPTY_NODE,this.right=null!=r?r:jt.EMPTY_NODE}copy(e,t,A,n,r){return new qt(null!=e?e:this.key,null!=t?t:this.value,null!=A?A:this.color,null!=n?n:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,A){let n=this;const r=A(e,n.key);return n=r<0?n.copy(null,null,null,n.left.insert(e,t,A),null):0===r?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,A)),n.fixUp_()}removeMin_(){if(this.left.isEmpty())return jt.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let A,n;if(A=this,t(e,A.key)<0)A.left.isEmpty()||A.left.isRed_()||A.left.left.isRed_()||(A=A.moveRedLeft_()),A=A.copy(null,null,null,A.left.remove(e,t),null);else{if(A.left.isRed_()&&(A=A.rotateRight_()),A.right.isEmpty()||A.right.isRed_()||A.right.left.isRed_()||(A=A.moveRedRight_()),0===t(e,A.key)){if(A.right.isEmpty())return jt.EMPTY_NODE;n=A.right.min_(),A=A.copy(n.key,n.value,null,null,A.right.removeMin_())}A=A.copy(null,null,null,null,A.right.remove(e,t))}return A.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}qt.RED=!0,qt.BLACK=!1;class Wt{copy(e,t,A,n,r){return this}insert(e,t,A){return new qt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class jt{constructor(e,t=jt.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new jt(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,qt.BLACK,null,null))}remove(e){return new jt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qt.BLACK,null,null))}get(e){let t,A=this.root_;while(!A.isEmpty()){if(t=this.comparator_(e,A.key),0===t)return A.value;t<0?A=A.left:t>0&&(A=A.right)}return null}getPredecessorKey(e){let t,A=this.root_,n=null;while(!A.isEmpty()){if(t=this.comparator_(e,A.key),0===t){if(A.left.isEmpty())return n?n.key:null;A=A.left;while(!A.right.isEmpty())A=A.right;return A.key}t<0?A=A.left:t>0&&(n=A,A=A.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gt(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Gt(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Gt(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Gt(this.root_,null,this.comparator_,!0,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Jt(e,t){return x(e.name,t.name)}function Yt(e,t){return x(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xt;function zt(e){Xt=e}jt.EMPTY_NODE=new Wt;const $t=function(e){return"number"===typeof e?"number:"+M(e):"string:"+e},Zt=function(e){if(e.isLeafNode()){const t=e.val();(0,s.hu)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,s.r3)(t,".sv"),"Priority must be a string or number.")}else(0,s.hu)(e===Xt||e.isEmpty(),"priority of unexpected type.");(0,s.hu)(e===Xt||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let eA,tA,AA;class nA{constructor(e,t=nA.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,s.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Zt(this.priorityNode_)}static set __childrenNodeConstructor(e){eA=e}static get __childrenNodeConstructor(){return eA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new nA(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:nA.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return wt(e)?this:".priority"===lt(e)?this.priorityNode_:nA.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:nA.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const A=lt(e);return null===A?t:t.isEmpty()&&".priority"!==A?this:((0,s.hu)(".priority"!==A||1===ht(e),".priority must be the last token in a path"),this.updateImmediateChild(A,nA.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$t(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?M(this.value_):this.value_,this.lazyHash_=m(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===nA.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof nA.__childrenNodeConstructor?-1:((0,s.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,A=typeof this.value_,n=nA.VALUE_TYPE_ORDER.indexOf(t),r=nA.VALUE_TYPE_ORDER.indexOf(A);return(0,s.hu)(n>=0,"Unknown leaf type: "+t),(0,s.hu)(r>=0,"Unknown leaf type: "+A),n===r?"object"===A?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-n}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}function rA(e){tA=e}function sA(e){AA=e}nA.VALUE_TYPE_ORDER=["object","boolean","number","string"];class iA extends Ot{compare(e,t){const A=e.node.getPriority(),n=t.node.getPriority(),r=A.compareTo(n);return 0===r?x(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Mt.MIN}maxPost(){return new Mt(D,new nA("[PRIORITY-POST]",AA))}makePost(e,t){const A=tA(e);return new Mt(t,new nA("[PRIORITY-POST]",A))}toString(){return".priority"}}const oA=new iA,aA=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){const t=e=>parseInt(Math.log(e)/aA,10),A=e=>parseInt(Array(e+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const n=A(this.count);this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const uA=function(e,t,A,n){e.sort(t);const r=function(t,n){const s=n-t;let i,o;if(0===s)return null;if(1===s)return i=e[t],o=A?A(i):i,new qt(o,i.node,qt.BLACK,null,null);{const a=parseInt(s/2,10)+t,c=r(t,a),u=r(a+1,n);return i=e[a],o=A?A(i):i,new qt(o,i.node,qt.BLACK,c,u)}},s=function(t){let n=null,s=null,i=e.length;const o=function(t,n){const s=i-t,o=i;i-=t;const c=r(s+1,o),u=e[s],l=A?A(u):u;a(new qt(l,u.node,n,null,c))},a=function(e){n?(n.left=e,n=e):(s=e,n=e)};for(let e=0;e<t.count;++e){const A=t.nextBitIsOne(),n=Math.pow(2,t.count-(e+1));A?o(n,qt.BLACK):(o(n,qt.BLACK),o(n,qt.RED))}return s},i=new cA(e.length),o=s(i);return new jt(n||t,o)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lA;const hA={};class dA{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,s.hu)(hA&&oA,"ChildrenNode.ts has not been loaded"),lA=lA||new dA({".priority":hA},{".priority":oA}),lA}get(e){const t=(0,s.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof jt?t:null}hasIndex(e){return(0,s.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,s.hu)(e!==Vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const A=[];let n=!1;const r=t.getIterator(Mt.Wrap);let i,o=r.getNext();while(o)n=n||e.isDefinedOn(o.node),A.push(o),o=r.getNext();i=n?uA(A,e.getCompare()):hA;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const u=Object.assign({},this.indexes_);return u[a]=i,new dA(u,c)}addToIndexes(e,t){const A=(0,s.UI)(this.indexes_,((A,n)=>{const r=(0,s.DV)(this.indexSet_,n);if((0,s.hu)(r,"Missing index implementation for "+n),A===hA){if(r.isDefinedOn(e.node)){const A=[],n=t.getIterator(Mt.Wrap);let s=n.getNext();while(s)s.name!==e.name&&A.push(s),s=n.getNext();return A.push(e),uA(A,r.getCompare())}return hA}{const n=t.get(e.name);let r=A;return n&&(r=r.remove(new Mt(e.name,n))),r.insert(e,e.node)}}));return new dA(A,this.indexSet_)}removeFromIndexes(e,t){const A=(0,s.UI)(this.indexes_,(A=>{if(A===hA)return A;{const n=t.get(e.name);return n?A.remove(new Mt(e.name,n)):A}}));return new dA(A,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fA;class gA{constructor(e,t,A){this.children_=e,this.priorityNode_=t,this.indexMap_=A,this.lazyHash_=null,this.priorityNode_&&Zt(this.priorityNode_),this.children_.isEmpty()&&(0,s.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fA||(fA=new gA(new jt(Yt),null,dA.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fA}updatePriority(e){return this.children_.isEmpty()?this:new gA(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?fA:t}}getChild(e){const t=lt(e);return null===t?this:this.getImmediateChild(t).getChild(dt(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,s.hu)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const A=new Mt(e,t);let n,r;t.isEmpty()?(n=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(A,this.children_)):(n=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(A,this.children_));const s=n.isEmpty()?fA:this.priorityNode_;return new gA(n,s,r)}}updateChild(e,t){const A=lt(e);if(null===A)return t;{(0,s.hu)(".priority"!==lt(e)||1===ht(e),".priority must be the last token in a path");const n=this.getImmediateChild(A).updateChild(dt(e),t);return this.updateImmediateChild(A,n)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let A=0,n=0,r=!0;if(this.forEachChild(oA,((s,i)=>{t[s]=i.val(e),A++,r&&gA.INTEGER_REGEXP_.test(s)?n=Math.max(n,Number(s)):r=!1})),!e&&r&&n<2*A){const e=[];for(const A in t)e[A]=t[A];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(oA,((t,A)=>{const n=A.hash();""!==n&&(e+=":"+t+":"+n)})),this.lazyHash_=""===e?"":m(e)}return this.lazyHash_}getPredecessorChildName(e,t,A){const n=this.resolveIndex_(A);if(n){const A=n.getPredecessorKey(new Mt(e,t));return A?A.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Mt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Mt(t,this.children_.get(t)):null}forEachChild(e,t){const A=this.resolveIndex_(e);return A?A.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const A=this.resolveIndex_(t);if(A)return A.getIteratorFrom(e,(e=>e));{const A=this.children_.getIteratorFrom(e.name,Mt.Wrap);let n=A.peek();while(null!=n&&t.compare(n,e)<0)A.getNext(),n=A.peek();return A}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const A=this.resolveIndex_(t);if(A)return A.getReverseIteratorFrom(e,(e=>e));{const A=this.children_.getReverseIteratorFrom(e.name,Mt.Wrap);let n=A.peek();while(null!=n&&t.compare(n,e)>0)A.getNext(),n=A.peek();return A}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===BA?-1:0}withIndex(e){if(e===Vt||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new gA(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Vt||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(oA),A=t.getIterator(oA);let n=e.getNext(),r=A.getNext();while(n&&r){if(n.name!==r.name||!n.node.equals(r.node))return!1;n=e.getNext(),r=A.getNext()}return null===n&&null===r}return!1}return!1}}resolveIndex_(e){return e===Vt?null:this.indexMap_.get(e.toString())}}gA.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class pA extends gA{constructor(){super(new jt(Yt),gA.EMPTY_NODE,dA.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return gA.EMPTY_NODE}isEmpty(){return!1}}const BA=new pA;Object.defineProperties(Mt,{MIN:{value:new Mt(S,gA.EMPTY_NODE)},MAX:{value:new Mt(D,BA)}}),Kt.__EMPTY_NODE=gA.EMPTY_NODE,nA.__childrenNodeConstructor=gA,zt(BA),sA(BA);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const mA=!0;function wA(e,t=null){if(null===e)return gA.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,s.hu)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){const A=e;return new nA(A,wA(t))}if(e instanceof Array||!mA){let A=gA.EMPTY_NODE;return R(e,((t,n)=>{if((0,s.r3)(e,t)&&"."!==t.substring(0,1)){const e=wA(n);!e.isLeafNode()&&e.isEmpty()||(A=A.updateImmediateChild(t,e))}})),A.updatePriority(wA(t))}{const A=[];let n=!1;const r=e;if(R(r,((e,t)=>{if("."!==e.substring(0,1)){const r=wA(t);r.isEmpty()||(n=n||!r.getPriority().isEmpty(),A.push(new Mt(e,r)))}})),0===A.length)return gA.EMPTY_NODE;const s=uA(A,Jt,(e=>e.name),Yt);if(n){const e=uA(A,oA.getCompare());return new gA(s,wA(t),new dA({".priority":e},{".priority":oA}))}return new gA(s,wA(t),dA.Default)}}rA(wA);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yA extends Ot{constructor(e){super(),this.indexPath_=e,(0,s.hu)(!wt(e)&&".priority"!==lt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const A=this.extractChild(e.node),n=this.extractChild(t.node),r=A.compareTo(n);return 0===r?x(e.name,t.name):r}makePost(e,t){const A=wA(e),n=gA.EMPTY_NODE.updateChild(this.indexPath_,A);return new Mt(t,n)}maxPost(){const e=gA.EMPTY_NODE.updateChild(this.indexPath_,BA);return new Mt(D,e)}toString(){return pt(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA extends Ot{compare(e,t){const A=e.node.compareTo(t.node);return 0===A?x(e.name,t.name):A}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Mt.MIN}maxPost(){return Mt.MAX}makePost(e,t){const A=wA(e);return new Mt(t,A)}toString(){return".value"}}const vA=new CA,QA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_A="-",FA="z",UA=786,EA=function(){let e=0;const t=[];return function(A){const n=A===e;let r;e=A;const i=new Array(8);for(r=7;r>=0;r--)i[r]=QA.charAt(A%64),A=Math.floor(A/64);(0,s.hu)(0===A,"Cannot push at time == 0");let o=i.join("");if(n){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=QA.charAt(t[r]);return(0,s.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),IA=function(e){if(e===""+q)return _A;const t=W(e);if(null!=t)return""+(t+1);const A=new Array(e.length);for(let i=0;i<A.length;i++)A[i]=e.charAt(i);if(A.length<UA)return A.push(_A),A.join("");let n=A.length-1;while(n>=0&&A[n]===FA)n--;if(-1===n)return D;const r=A[n],s=QA.charAt(QA.indexOf(r)+1);return A[n]=s,A.slice(0,n+1).join("")},bA=function(e){if(e===""+G)return S;const t=W(e);if(null!=t)return""+(t-1);const A=new Array(e.length);for(let n=0;n<A.length;n++)A[n]=e.charAt(n);return A[A.length-1]===_A?1===A.length?""+q:(delete A[A.length-1],A.join("")):(A[A.length-1]=QA.charAt(QA.indexOf(A[A.length-1])-1),A.join("")+FA.repeat(UA-A.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function TA(e){return{type:"value",snapshotNode:e}}function SA(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function DA(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function xA(e,t,A){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:A}}function HA(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.index_=e}updateChild(e,t,A,n,r,i){(0,s.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(n).equals(A.getChild(n))&&o.isEmpty()===A.isEmpty()?e:(null!=i&&(A.isEmpty()?e.hasChild(t)?i.trackChildChange(DA(t,o)):(0,s.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?i.trackChildChange(SA(t,A)):i.trackChildChange(xA(t,A,o))),e.isLeafNode()&&A.isEmpty()?e:e.updateImmediateChild(t,A).withIndex(this.index_))}updateFullNode(e,t,A){return null!=A&&(e.isLeafNode()||e.forEachChild(oA,((e,n)=>{t.hasChild(e)||A.trackChildChange(DA(e,n))})),t.isLeafNode()||t.forEachChild(oA,((t,n)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(n)||A.trackChildChange(xA(t,n,r))}else A.trackChildChange(SA(t,n))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?gA.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.indexedFilter_=new kA(e.getIndex()),this.index_=e.getIndex(),this.startPost_=LA.getStartPost_(e),this.endPost_=LA.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,A,n,r,s){return this.matches(new Mt(t,A))||(A=gA.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,A,n,r,s)}updateFullNode(e,t,A){t.isLeafNode()&&(t=gA.EMPTY_NODE);let n=t.withIndex(this.index_);n=n.updatePriority(gA.EMPTY_NODE);const r=this;return t.forEachChild(oA,((e,t)=>{r.matches(new Mt(e,t))||(n=n.updateImmediateChild(e,gA.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,n,A)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.rangedFilter_=new LA(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,A,n,r,s){return this.rangedFilter_.matches(new Mt(t,A))||(A=gA.EMPTY_NODE),e.getImmediateChild(t).equals(A)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,A,n,r,s):this.fullLimitUpdateChild_(e,t,A,r,s)}updateFullNode(e,t,A){let n;if(t.isLeafNode()||t.isEmpty())n=gA.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;n=gA.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let A=0;while(e.hasNext()&&A<this.limit_){const t=e.getNext();let r;if(r=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!r)break;n=n.updateImmediateChild(t.name,t.node),A++}}else{let e,A,r,s;if(n=t.withIndex(this.index_),n=n.updatePriority(gA.EMPTY_NODE),this.reverse_){s=n.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),A=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();r=(e,A)=>t(A,e)}else s=n.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),A=this.rangedFilter_.getEndPost(),r=this.index_.getCompare();let i=0,o=!1;while(s.hasNext()){const t=s.getNext();!o&&r(e,t)<=0&&(o=!0);const a=o&&i<this.limit_&&r(t,A)<=0;a?i++:n=n.updateImmediateChild(t.name,gA.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,n,A)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,A,n,r){let i;if(this.reverse_){const e=this.index_.getCompare();i=(t,A)=>e(A,t)}else i=this.index_.getCompare();const o=e;(0,s.hu)(o.numChildren()===this.limit_,"");const a=new Mt(t,A),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let s=n.getChildAfterChild(this.index_,c,this.reverse_);while(null!=s&&(s.name===t||o.hasChild(s.name)))s=n.getChildAfterChild(this.index_,s,this.reverse_);const l=null==s?1:i(s,a),h=u&&!A.isEmpty()&&l>=0;if(h)return null!=r&&r.trackChildChange(xA(t,A,e)),o.updateImmediateChild(t,A);{null!=r&&r.trackChildChange(DA(t,e));const A=o.updateImmediateChild(t,gA.EMPTY_NODE),n=null!=s&&this.rangedFilter_.matches(s);return n?(null!=r&&r.trackChildChange(SA(s.name,s.node)),A.updateImmediateChild(s.name,s.node)):A}}return A.isEmpty()?e:u&&i(c,a)>=0?(null!=r&&(r.trackChildChange(DA(c.name,c.node)),r.trackChildChange(SA(t,A))),o.updateImmediateChild(t,A).updateImmediateChild(c.name,gA.EMPTY_NODE)):e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oA}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,s.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,s.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,s.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,s.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:D}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,s.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oA}copy(){const e=new RA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function MA(e){return e.loadsAllData()?new kA(e.getIndex()):e.hasLimit()?new NA(e):new LA(e)}function OA(e,t){const A=e.copy();return A.limitSet_=!0,A.limit_=t,A.viewFrom_="l",A}function PA(e,t){const A=e.copy();return A.limitSet_=!0,A.limit_=t,A.viewFrom_="r",A}function KA(e,t,A){const n=e.copy();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=A?(n.startNameSet_=!0,n.indexStartName_=A):(n.startNameSet_=!1,n.indexStartName_=""),n}function VA(e,t,A){let n;if(e.index_===Vt)"string"===typeof t&&(t=IA(t)),n=KA(e,t,A);else{let r;r=null==A?D:IA(A),n=KA(e,t,r)}return n.startAfterSet_=!0,n}function GA(e,t,A){const n=e.copy();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==A?(n.endNameSet_=!0,n.indexEndName_=A):(n.endNameSet_=!1,n.indexEndName_=""),n}function qA(e,t,A){let n,r;return e.index_===Vt?("string"===typeof t&&(t=bA(t)),r=GA(e,t,A)):(n=null==A?S:bA(A),r=GA(e,t,n)),r.endBeforeSet_=!0,r}function WA(e,t){const A=e.copy();return A.index_=t,A}function jA(e){const t={};if(e.isDefault())return t;let A;return e.index_===oA?A="$priority":e.index_===vA?A="$value":e.index_===Vt?A="$key":((0,s.hu)(e.index_ instanceof yA,"Unrecognized index type!"),A=e.index_.toString()),t["orderBy"]=(0,s.Pz)(A),e.startSet_&&(t["startAt"]=(0,s.Pz)(e.indexStartValue_),e.startNameSet_&&(t["startAt"]+=","+(0,s.Pz)(e.indexStartName_))),e.endSet_&&(t["endAt"]=(0,s.Pz)(e.indexEndValue_),e.endNameSet_&&(t["endAt"]+=","+(0,s.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t["limitToFirst"]=e.limit_:t["limitToLast"]=e.limit_),t}function JA(e){const t={};if(e.startSet_&&(t["sp"]=e.indexStartValue_,e.startNameSet_&&(t["sn"]=e.indexStartName_)),e.endSet_&&(t["ep"]=e.indexEndValue_,e.endNameSet_&&(t["en"]=e.indexEndName_)),e.limitSet_){t["l"]=e.limit_;let A=e.viewFrom_;""===A&&(A=e.isViewFromLeft()?"l":"r"),t["vf"]=A}return e.index_!==oA&&(t["i"]=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA extends rt{constructor(e,t,A,n){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=A,this.appCheckTokenProvider_=n,this.log_=_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,s.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,A,n){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const i=YA.getListenId_(e,A),o={};this.listens_[i]=o;const a=jA(e._queryParams);this.restRequest_(r+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,A),(0,s.DV)(this.listens_,i)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",n(t,null)}}))}unlisten(e,t){const A=YA.getListenId_(e,t);delete this.listens_[A]}get(e){const t=jA(e._queryParams),A=e._path.toString(),n=new s.BH;return this.restRequest_(A+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(A,r,!1,null),n.resolve(r)):n.reject(new Error(r))})),n.promise}refreshAuthToken(e){}restRequest_(e,t={},A){return t["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([n,r])=>{n&&n.accessToken&&(t["auth"]=n.accessToken),r&&r.token&&(t["ac"]=r.token);const i=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,s.xO)(t);this.log_("Sending REST request for "+i);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(A&&4===o.readyState){this.log_("REST Response for "+i+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=(0,s.cI)(o.responseText)}catch(e){E("Failed to parse JSON response for "+i+": "+o.responseText)}A(null,t)}else 401!==o.status&&404!==o.status&&E("Got unsuccessful REST response for "+i+" Status: "+o.status),A(o.status);A=null}},o.open("GET",i,!0),o.send()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.rootNode_=gA.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return{value:null,children:new Map}}function $A(e,t,A){if(wt(t))e.value=A,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,A);else{const n=lt(t);e.children.has(n)||e.children.set(n,zA());const r=e.children.get(n);t=dt(t),$A(r,t,A)}}function ZA(e,t){if(wt(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const A=e.value;return e.value=null,A.forEachChild(oA,((t,A)=>{$A(e,new ct(t),A)})),ZA(e,t)}}if(e.children.size>0){const A=lt(t);if(t=dt(t),e.children.has(A)){const n=ZA(e.children.get(A),t);n&&e.children.delete(A)}return 0===e.children.size}return!0}function en(e,t,A){null!==e.value?A(t,e.value):tn(e,((e,n)=>{const r=new ct(t.toString()+"/"+e);en(n,r,A)}))}function tn(e,t){e.children.forEach(((e,A)=>{t(A,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&R(this.last_,((e,A)=>{t[e]=t[e]-A})),this.last_=e,t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=1e4,rn=3e4,sn=3e5;class on{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new An(e);const A=nn+(rn-nn)*Math.random();Y(this.reportStats_.bind(this),Math.floor(A))}reportStats_(){const e=this.statsListener_.get(),t={};let A=!1;R(e,((e,n)=>{n>0&&(0,s.r3)(this.statsToReport_,e)&&(t[e]=n,A=!0)})),A&&this.server_.reportStats(t),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*sn))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an;function cn(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function un(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ln(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["OVERWRITE"]=0]="OVERWRITE",e[e["MERGE"]=1]="MERGE",e[e["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",e[e["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(an||(an={}));class hn{constructor(e,t,A){this.path=e,this.affectedTree=t,this.revert=A,this.type=an.ACK_USER_WRITE,this.source=cn()}operationForChild(e){if(wt(this.path)){if(null!=this.affectedTree.value)return(0,s.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ct(e));return new hn(ut(),t,this.revert)}}return(0,s.hu)(lt(this.path)===e,"operationForChild called for unrelated child."),new hn(dt(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t){this.source=e,this.path=t,this.type=an.LISTEN_COMPLETE}operationForChild(e){return wt(this.path)?new dn(this.source,ut()):new dn(this.source,dt(this.path))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t,A){this.source=e,this.path=t,this.snap=A,this.type=an.OVERWRITE}operationForChild(e){return wt(this.path)?new fn(this.source,ut(),this.snap.getImmediateChild(e)):new fn(this.source,dt(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t,A){this.source=e,this.path=t,this.children=A,this.type=an.MERGE}operationForChild(e){if(wt(this.path)){const t=this.children.subtree(new ct(e));return t.isEmpty()?null:t.value?new fn(this.source,ut(),t.value):new gn(this.source,ut(),t)}return(0,s.hu)(lt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gn(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,A){this.node_=e,this.fullyInitialized_=t,this.filtered_=A}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(wt(e))return this.isFullyInitialized()&&!this.filtered_;const t=lt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function mn(e,t,A,n){const r=[],s=[];return t.forEach((t=>{"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push(HA(t.childName,t.snapshotNode))})),wn(e,r,"child_removed",t,n,A),wn(e,r,"child_added",t,n,A),wn(e,r,"child_moved",s,n,A),wn(e,r,"child_changed",t,n,A),wn(e,r,"value",t,n,A),r}function wn(e,t,A,n,r,s){const i=n.filter((e=>e.type===A));i.sort(((t,A)=>Cn(e,t,A))),i.forEach((A=>{const n=yn(e,A,s);r.forEach((r=>{r.respondsTo(A.type)&&t.push(r.createEvent(n,e.query_))}))}))}function yn(e,t,A){return"value"===t.type||"child_removed"===t.type||(t.prevName=A.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Cn(e,t,A){if(null==t.childName||null==A.childName)throw(0,s.g5)("Should only compare child_ events.");const n=new Mt(t.childName,t.snapshotNode),r=new Mt(A.childName,A.snapshotNode);return e.index_.compare(n,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(e,t){return{eventCache:e,serverCache:t}}function Qn(e,t,A,n){return vn(new pn(t,A,n),e.serverCache)}function _n(e,t,A,n){return vn(e.eventCache,new pn(t,A,n))}function Fn(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Un(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let En;const In=()=>(En||(En=new jt(H)),En);class bn{constructor(e,t=In()){this.value=e,this.children=t}static fromObject(e){let t=new bn(null);return R(e,((e,A)=>{t=t.set(new ct(e),A)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ut(),value:this.value};if(wt(e))return null;{const A=lt(e),n=this.children.get(A);if(null!==n){const r=n.findRootMostMatchingPathAndValue(dt(e),t);if(null!=r){const e=mt(new ct(A),r.path);return{path:e,value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(wt(e))return this;{const t=lt(e),A=this.children.get(t);return null!==A?A.subtree(dt(e)):new bn(null)}}set(e,t){if(wt(e))return new bn(t,this.children);{const A=lt(e),n=this.children.get(A)||new bn(null),r=n.set(dt(e),t),s=this.children.insert(A,r);return new bn(this.value,s)}}remove(e){if(wt(e))return this.children.isEmpty()?new bn(null):new bn(null,this.children);{const t=lt(e),A=this.children.get(t);if(A){const n=A.remove(dt(e));let r;return r=n.isEmpty()?this.children.remove(t):this.children.insert(t,n),null===this.value&&r.isEmpty()?new bn(null):new bn(this.value,r)}return this}}get(e){if(wt(e))return this.value;{const t=lt(e),A=this.children.get(t);return A?A.get(dt(e)):null}}setTree(e,t){if(wt(e))return t;{const A=lt(e),n=this.children.get(A)||new bn(null),r=n.setTree(dt(e),t);let s;return s=r.isEmpty()?this.children.remove(A):this.children.insert(A,r),new bn(this.value,s)}}fold(e){return this.fold_(ut(),e)}fold_(e,t){const A={};return this.children.inorderTraversal(((n,r)=>{A[n]=r.fold_(mt(e,n),t)})),t(e,this.value,A)}findOnPath(e,t){return this.findOnPath_(e,ut(),t)}findOnPath_(e,t,A){const n=!!this.value&&A(t,this.value);if(n)return n;if(wt(e))return null;{const n=lt(e),r=this.children.get(n);return r?r.findOnPath_(dt(e),mt(t,n),A):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ut(),t)}foreachOnPath_(e,t,A){if(wt(e))return this;{this.value&&A(t,this.value);const n=lt(e),r=this.children.get(n);return r?r.foreachOnPath_(dt(e),mt(t,n),A):new bn(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,t){this.children.inorderTraversal(((A,n)=>{n.foreach_(mt(e,A),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,A)=>{A.value&&e(t,A.value)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.writeTree_=e}static empty(){return new Tn(new bn(null))}}function Sn(e,t,A){if(wt(t))return new Tn(new bn(A));{const n=e.writeTree_.findRootMostValueAndPath(t);if(null!=n){const r=n.path;let s=n.value;const i=yt(r,t);return s=s.updateChild(i,A),new Tn(e.writeTree_.set(r,s))}{const n=new bn(A),r=e.writeTree_.setTree(t,n);return new Tn(r)}}}function Dn(e,t,A){let n=e;return R(A,((e,A)=>{n=Sn(n,mt(t,e),A)})),n}function xn(e,t){if(wt(t))return Tn.empty();{const A=e.writeTree_.setTree(t,new bn(null));return new Tn(A)}}function Hn(e,t){return null!=kn(e,t)}function kn(e,t){const A=e.writeTree_.findRootMostValueAndPath(t);return null!=A?e.writeTree_.get(A.path).getChild(yt(A.path,t)):null}function Ln(e){const t=[],A=e.writeTree_.value;return null!=A?A.isLeafNode()||A.forEachChild(oA,((e,A)=>{t.push(new Mt(e,A))})):e.writeTree_.children.inorderTraversal(((e,A)=>{null!=A.value&&t.push(new Mt(e,A.value))})),t}function Nn(e,t){if(wt(t))return e;{const A=kn(e,t);return new Tn(null!=A?new bn(A):e.writeTree_.subtree(t))}}function Rn(e){return e.writeTree_.isEmpty()}function Mn(e,t){return On(ut(),e.writeTree_,t)}function On(e,t,A){if(null!=t.value)return A.updateChild(e,t.value);{let n=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?((0,s.hu)(null!==r.value,"Priority writes must always be leaf nodes"),n=r.value):A=On(mt(e,t),r,A)})),A.getChild(e).isEmpty()||null===n||(A=A.updateChild(mt(e,".priority"),n)),A}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(e,t){return ur(t,e)}function Kn(e,t,A,n,r){(0,s.hu)(n>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:A,writeId:n,visible:r}),r&&(e.visibleWrites=Sn(e.visibleWrites,t,A)),e.lastWriteId=n}function Vn(e,t,A,n){(0,s.hu)(n>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:A,writeId:n,visible:!0}),e.visibleWrites=Dn(e.visibleWrites,t,A),e.lastWriteId=n}function Gn(e,t){for(let A=0;A<e.allWrites.length;A++){const n=e.allWrites[A];if(n.writeId===t)return n}return null}function qn(e,t){const A=e.allWrites.findIndex((e=>e.writeId===t));(0,s.hu)(A>=0,"removeWrite called with nonexistent writeId.");const n=e.allWrites[A];e.allWrites.splice(A,1);let r=n.visible,i=!1,o=e.allWrites.length-1;while(r&&o>=0){const t=e.allWrites[o];t.visible&&(o>=A&&Wn(t,n.path)?r=!1:Qt(n.path,t.path)&&(i=!0)),o--}if(r){if(i)return jn(e),!0;if(n.snap)e.visibleWrites=xn(e.visibleWrites,n.path);else{const t=n.children;R(t,(t=>{e.visibleWrites=xn(e.visibleWrites,mt(n.path,t))}))}return!0}return!1}function Wn(e,t){if(e.snap)return Qt(e.path,t);for(const A in e.children)if(e.children.hasOwnProperty(A)&&Qt(mt(e.path,A),t))return!0;return!1}function jn(e){e.visibleWrites=Yn(e.allWrites,Jn,ut()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Jn(e){return e.visible}function Yn(e,t,A){let n=Tn.empty();for(let r=0;r<e.length;++r){const i=e[r];if(t(i)){const e=i.path;let t;if(i.snap)Qt(A,e)?(t=yt(A,e),n=Sn(n,t,i.snap)):Qt(e,A)&&(t=yt(e,A),n=Sn(n,ut(),i.snap.getChild(t)));else{if(!i.children)throw(0,s.g5)("WriteRecord should have .snap or .children");if(Qt(A,e))t=yt(A,e),n=Dn(n,t,i.children);else if(Qt(e,A))if(t=yt(e,A),wt(t))n=Dn(n,ut(),i.children);else{const e=(0,s.DV)(i.children,lt(t));if(e){const A=e.getChild(dt(t));n=Sn(n,ut(),A)}}}}}return n}function Xn(e,t,A,n,r){if(n||r){const s=Nn(e.visibleWrites,t);if(!r&&Rn(s))return A;if(r||null!=A||Hn(s,ut())){const s=function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(Qt(e.path,t)||Qt(t,e.path))},i=Yn(e.allWrites,s,t),o=A||gA.EMPTY_NODE;return Mn(i,o)}return null}{const n=kn(e.visibleWrites,t);if(null!=n)return n;{const n=Nn(e.visibleWrites,t);if(Rn(n))return A;if(null!=A||Hn(n,ut())){const e=A||gA.EMPTY_NODE;return Mn(n,e)}return null}}}function zn(e,t,A){let n=gA.EMPTY_NODE;const r=kn(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(oA,((e,t)=>{n=n.updateImmediateChild(e,t)})),n;if(A){const r=Nn(e.visibleWrites,t);return A.forEachChild(oA,((e,t)=>{const A=Mn(Nn(r,new ct(e)),t);n=n.updateImmediateChild(e,A)})),Ln(r).forEach((e=>{n=n.updateImmediateChild(e.name,e.node)})),n}{const A=Nn(e.visibleWrites,t);return Ln(A).forEach((e=>{n=n.updateImmediateChild(e.name,e.node)})),n}}function $n(e,t,A,n,r){(0,s.hu)(n||r,"Either existingEventSnap or existingServerSnap must exist");const i=mt(t,A);if(Hn(e.visibleWrites,i))return null;{const t=Nn(e.visibleWrites,i);return Rn(t)?r.getChild(A):Mn(t,r.getChild(A))}}function Zn(e,t,A,n){const r=mt(t,A),s=kn(e.visibleWrites,r);if(null!=s)return s;if(n.isCompleteForChild(A)){const t=Nn(e.visibleWrites,r);return Mn(t,n.getNode().getImmediateChild(A))}return null}function er(e,t){return kn(e.visibleWrites,t)}function tr(e,t,A,n,r,s,i){let o;const a=Nn(e.visibleWrites,t),c=kn(a,ut());if(null!=c)o=c;else{if(null==A)return[];o=Mn(a,A)}if(o=o.withIndex(i),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=i.getCompare(),A=s?o.getReverseIteratorFrom(n,i):o.getIteratorFrom(n,i);let a=A.getNext();while(a&&e.length<r)0!==t(a,n)&&e.push(a),a=A.getNext();return e}}function Ar(){return{visibleWrites:Tn.empty(),allWrites:[],lastWriteId:-1}}function nr(e,t,A,n){return Xn(e.writeTree,e.treePath,t,A,n)}function rr(e,t){return zn(e.writeTree,e.treePath,t)}function sr(e,t,A,n){return $n(e.writeTree,e.treePath,t,A,n)}function ir(e,t){return er(e.writeTree,mt(e.treePath,t))}function or(e,t,A,n,r,s){return tr(e.writeTree,e.treePath,t,A,n,r,s)}function ar(e,t,A){return Zn(e.writeTree,e.treePath,t,A)}function cr(e,t){return ur(mt(e.treePath,t),e.writeTree)}function ur(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,A=e.childName;(0,s.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,s.hu)(".priority"!==A,"Only non-priority child changes can be tracked.");const n=this.changeMap.get(A);if(n){const r=n.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(A,xA(A,e.snapshotNode,n.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(A);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(A,DA(A,n.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(A,SA(A,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw(0,s.g5)("Illegal combination of changes: "+e+" occurred after "+n);this.changeMap.set(A,xA(A,e.snapshotNode,n.oldSnap))}}else this.changeMap.set(A,e)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{getCompleteChild(e){return null}getChildAfterChild(e,t,A){return null}}const dr=new hr;class fr{constructor(e,t,A=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=A}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new pn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ar(this.writes_,e,t)}}getChildAfterChild(e,t,A){const n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Un(this.viewCache_),r=or(this.writes_,n,t,1,A,e);return 0===r.length?null:r[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(e){return{filter:e}}function pr(e,t){(0,s.hu)(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,s.hu)(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Br(e,t,A,n,r){const i=new lr;let o,a;if(A.type===an.OVERWRITE){const c=A;c.source.fromUser?o=Cr(e,t,c.path,c.snap,n,r,i):((0,s.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!wt(c.path),o=yr(e,t,c.path,c.snap,n,r,a,i))}else if(A.type===an.MERGE){const c=A;c.source.fromUser?o=Qr(e,t,c.path,c.children,n,r,i):((0,s.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=Fr(e,t,c.path,c.children,n,r,a,i))}else if(A.type===an.ACK_USER_WRITE){const s=A;o=s.revert?Ir(e,t,s.path,n,r,i):Ur(e,t,s.path,s.affectedTree,n,r,i)}else{if(A.type!==an.LISTEN_COMPLETE)throw(0,s.g5)("Unknown operation type: "+A.type);o=Er(e,t,A.path,n,i)}const c=i.getChanges();return mr(t,o,c),{viewCache:o,changes:c}}function mr(e,t,A){const n=t.eventCache;if(n.isFullyInitialized()){const r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=Fn(e);(A.length>0||!e.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&A.push(TA(Fn(t)))}}function wr(e,t,A,n,r,i){const o=t.eventCache;if(null!=ir(n,A))return t;{let a,c;if(wt(A))if((0,s.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const A=Un(t),r=A instanceof gA?A:gA.EMPTY_NODE,s=rr(n,r);a=e.filter.updateFullNode(t.eventCache.getNode(),s,i)}else{const A=nr(n,Un(t));a=e.filter.updateFullNode(t.eventCache.getNode(),A,i)}else{const u=lt(A);if(".priority"===u){(0,s.hu)(1===ht(A),"Can't have a priority with additional path components");const r=o.getNode();c=t.serverCache.getNode();const i=sr(n,A,r,c);a=null!=i?e.filter.updatePriority(r,i):o.getNode()}else{const s=dt(A);let l;if(o.isCompleteForChild(u)){c=t.serverCache.getNode();const e=sr(n,A,o.getNode(),c);l=null!=e?o.getNode().getImmediateChild(u).updateChild(s,e):o.getNode().getImmediateChild(u)}else l=ar(n,u,t.serverCache);a=null!=l?e.filter.updateChild(o.getNode(),u,l,s,r,i):o.getNode()}}return Qn(t,a,o.isFullyInitialized()||wt(A),e.filter.filtersNodes())}}function yr(e,t,A,n,r,s,i,o){const a=t.serverCache;let c;const u=i?e.filter:e.filter.getIndexedFilter();if(wt(A))c=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered()){const e=a.getNode().updateChild(A,n);c=u.updateFullNode(a.getNode(),e,null)}else{const e=lt(A);if(!a.isCompleteForPath(A)&&ht(A)>1)return t;const r=dt(A),s=a.getNode().getImmediateChild(e),i=s.updateChild(r,n);c=".priority"===e?u.updatePriority(a.getNode(),i):u.updateChild(a.getNode(),e,i,r,dr,null)}const l=_n(t,c,a.isFullyInitialized()||wt(A),u.filtersNodes()),h=new fr(r,l,s);return wr(e,l,A,r,h,o)}function Cr(e,t,A,n,r,s,i){const o=t.eventCache;let a,c;const u=new fr(r,t,s);if(wt(A))c=e.filter.updateFullNode(t.eventCache.getNode(),n,i),a=Qn(t,c,!0,e.filter.filtersNodes());else{const r=lt(A);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),n),a=Qn(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=dt(A),c=o.getNode().getImmediateChild(r);let l;if(wt(s))l=n;else{const e=u.getCompleteChild(r);l=null!=e?".priority"===ft(s)&&e.getChild(Bt(s)).isEmpty()?e:e.updateChild(s,n):gA.EMPTY_NODE}if(c.equals(l))a=t;else{const A=e.filter.updateChild(o.getNode(),r,l,s,u,i);a=Qn(t,A,o.isFullyInitialized(),e.filter.filtersNodes())}}}return a}function vr(e,t){return e.eventCache.isCompleteForChild(t)}function Qr(e,t,A,n,r,s,i){let o=t;return n.foreach(((n,a)=>{const c=mt(A,n);vr(t,lt(c))&&(o=Cr(e,o,c,a,r,s,i))})),n.foreach(((n,a)=>{const c=mt(A,n);vr(t,lt(c))||(o=Cr(e,o,c,a,r,s,i))})),o}function _r(e,t,A){return A.foreach(((e,A)=>{t=t.updateChild(e,A)})),t}function Fr(e,t,A,n,r,s,i,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let a,c=t;a=wt(A)?n:new bn(null).setTree(A,n);const u=t.serverCache.getNode();return a.children.inorderTraversal(((A,n)=>{if(u.hasChild(A)){const a=t.serverCache.getNode().getImmediateChild(A),u=_r(e,a,n);c=yr(e,c,new ct(A),u,r,s,i,o)}})),a.children.inorderTraversal(((A,n)=>{const a=!t.serverCache.isCompleteForChild(A)&&void 0===n.value;if(!u.hasChild(A)&&!a){const a=t.serverCache.getNode().getImmediateChild(A),u=_r(e,a,n);c=yr(e,c,new ct(A),u,r,s,i,o)}})),c}function Ur(e,t,A,n,r,s,i){if(null!=ir(r,A))return t;const o=t.serverCache.isFiltered(),a=t.serverCache;if(null!=n.value){if(wt(A)&&a.isFullyInitialized()||a.isCompleteForPath(A))return yr(e,t,A,a.getNode().getChild(A),r,s,o,i);if(wt(A)){let n=new bn(null);return a.getNode().forEachChild(Vt,((e,t)=>{n=n.set(new ct(e),t)})),Fr(e,t,A,n,r,s,o,i)}return t}{let c=new bn(null);return n.foreach(((e,t)=>{const n=mt(A,e);a.isCompleteForPath(n)&&(c=c.set(e,a.getNode().getChild(n)))})),Fr(e,t,A,c,r,s,o,i)}}function Er(e,t,A,n,r){const s=t.serverCache,i=_n(t,s.getNode(),s.isFullyInitialized()||wt(A),s.isFiltered());return wr(e,i,A,n,dr,r)}function Ir(e,t,A,n,r,i){let o;if(null!=ir(n,A))return t;{const a=new fr(n,t,r),c=t.eventCache.getNode();let u;if(wt(A)||".priority"===lt(A)){let A;if(t.serverCache.isFullyInitialized())A=nr(n,Un(t));else{const e=t.serverCache.getNode();(0,s.hu)(e instanceof gA,"serverChildren would be complete if leaf node"),A=rr(n,e)}u=e.filter.updateFullNode(c,A,i)}else{const r=lt(A);let s=ar(n,r,t.serverCache);null==s&&t.serverCache.isCompleteForChild(r)&&(s=c.getImmediateChild(r)),u=null!=s?e.filter.updateChild(c,r,s,dt(A),a,i):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(c,r,gA.EMPTY_NODE,dt(A),a,i):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=nr(n,Un(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,i)))}return o=t.serverCache.isFullyInitialized()||null!=ir(n,ut()),Qn(t,u,o,e.filter.filtersNodes())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const A=this.query_._queryParams,n=new kA(A.getIndex()),r=MA(A);this.processor_=gr(r);const s=t.serverCache,i=t.eventCache,o=n.updateFullNode(gA.EMPTY_NODE,s.getNode(),null),a=r.updateFullNode(gA.EMPTY_NODE,i.getNode(),null),c=new pn(o,s.isFullyInitialized(),n.filtersNodes()),u=new pn(a,i.isFullyInitialized(),r.filtersNodes());this.viewCache_=vn(u,c),this.eventGenerator_=new Bn(this.query_)}get query(){return this.query_}}function Tr(e){return e.viewCache_.serverCache.getNode()}function Sr(e){return Fn(e.viewCache_)}function Dr(e,t){const A=Un(e.viewCache_);return A&&(e.query._queryParams.loadsAllData()||!wt(t)&&!A.getImmediateChild(lt(t)).isEmpty())?A.getChild(t):null}function xr(e){return 0===e.eventRegistrations_.length}function Hr(e,t){e.eventRegistrations_.push(t)}function kr(e,t,A){const n=[];if(A){(0,s.hu)(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(A,r);t&&n.push(t)}))}if(t){let A=[];for(let n=0;n<e.eventRegistrations_.length;++n){const r=e.eventRegistrations_[n];if(r.matches(t)){if(t.hasAnyCallback()){A=A.concat(e.eventRegistrations_.slice(n+1));break}}else A.push(r)}e.eventRegistrations_=A}else e.eventRegistrations_=[];return n}function Lr(e,t,A,n){t.type===an.MERGE&&null!==t.source.queryId&&((0,s.hu)(Un(e.viewCache_),"We should always have a full cache before handling merges"),(0,s.hu)(Fn(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,i=Br(e.processor_,r,t,A,n);return pr(e.processor_,i.viewCache),(0,s.hu)(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=i.viewCache,Rr(e,i.changes,i.viewCache.eventCache.getNode(),null)}function Nr(e,t){const A=e.viewCache_.eventCache,n=[];if(!A.getNode().isLeafNode()){const e=A.getNode();e.forEachChild(oA,((e,t)=>{n.push(SA(e,t))}))}return A.isFullyInitialized()&&n.push(TA(A.getNode())),Rr(e,n,A.getNode(),t)}function Rr(e,t,A,n){const r=n?[n]:e.eventRegistrations_;return mn(e.eventGenerator_,t,A,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mr,Or;class Pr{constructor(){this.views=new Map}}function Kr(e){(0,s.hu)(!Mr,"__referenceConstructor has already been defined"),Mr=e}function Vr(){return(0,s.hu)(Mr,"Reference.ts has not been loaded"),Mr}function Gr(e){return 0===e.views.size}function qr(e,t,A,n){const r=t.source.queryId;if(null!==r){const i=e.views.get(r);return(0,s.hu)(null!=i,"SyncTree gave us an op for an invalid query."),Lr(i,t,A,n)}{let r=[];for(const s of e.views.values())r=r.concat(Lr(s,t,A,n));return r}}function Wr(e,t,A,n,r){const s=t._queryIdentifier,i=e.views.get(s);if(!i){let e=nr(A,r?n:null),s=!1;e?s=!0:n instanceof gA?(e=rr(A,n),s=!1):(e=gA.EMPTY_NODE,s=!1);const i=vn(new pn(e,s,!1),new pn(n,r,!1));return new br(t,i)}return i}function jr(e,t,A,n,r,s){const i=Wr(e,t,n,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,i),Hr(i,A),Nr(i,A)}function Jr(e,t,A,n){const r=t._queryIdentifier,s=[];let i=[];const o=Zr(e);if("default"===r)for(const[a,c]of e.views.entries())i=i.concat(kr(c,A,n)),xr(c)&&(e.views.delete(a),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(r);t&&(i=i.concat(kr(t,A,n)),xr(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!Zr(e)&&s.push(new(Vr())(t._repo,t._path)),{removed:s,events:i}}function Yr(e){const t=[];for(const A of e.views.values())A.query._queryParams.loadsAllData()||t.push(A);return t}function Xr(e,t){let A=null;for(const n of e.views.values())A=A||Dr(n,t);return A}function zr(e,t){const A=t._queryParams;if(A.loadsAllData())return es(e);{const A=t._queryIdentifier;return e.views.get(A)}}function $r(e,t){return null!=zr(e,t)}function Zr(e){return null!=es(e)}function es(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(e){(0,s.hu)(!Or,"__referenceConstructor has already been defined"),Or=e}function As(){return(0,s.hu)(Or,"Reference.ts has not been loaded"),Or}let ns=1;class rs{constructor(e){this.listenProvider_=e,this.syncPointTree_=new bn(null),this.pendingWriteTree_=Ar(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ss(e,t,A,n,r){return Kn(e.pendingWriteTree_,t,A,n,r),r?ms(e,new fn(cn(),t,A)):[]}function is(e,t,A,n){Vn(e.pendingWriteTree_,t,A,n);const r=bn.fromObject(A);return ms(e,new gn(cn(),t,r))}function os(e,t,A=!1){const n=Gn(e.pendingWriteTree_,t),r=qn(e.pendingWriteTree_,t);if(r){let t=new bn(null);return null!=n.snap?t=t.set(ut(),!0):R(n.children,(e=>{t=t.set(new ct(e),!0)})),ms(e,new hn(n.path,t,A))}return[]}function as(e,t,A){return ms(e,new fn(un(),t,A))}function cs(e,t,A){const n=bn.fromObject(A);return ms(e,new gn(un(),t,n))}function us(e,t){return ms(e,new dn(un(),t))}function ls(e,t,A){const n=_s(e,A);if(n){const A=Fs(n),r=A.path,s=A.queryId,i=yt(r,t),o=new dn(ln(s),i);return Us(e,r,o)}return[]}function hs(e,t,A,n){const r=t._path,s=e.syncPointTree_.get(r);let i=[];if(s&&("default"===t._queryIdentifier||$r(s,t))){const o=Jr(s,t,A,n);Gr(s)&&(e.syncPointTree_=e.syncPointTree_.remove(r));const a=o.removed;i=o.events;const c=-1!==a.findIndex((e=>e._queryParams.loadsAllData())),u=e.syncPointTree_.findOnPath(r,((e,t)=>Zr(t)));if(c&&!u){const t=e.syncPointTree_.subtree(r);if(!t.isEmpty()){const A=Es(t);for(let t=0;t<A.length;++t){const n=A[t],r=n.query,s=Cs(e,n);e.listenProvider_.startListening(Is(r),vs(e,r),s.hashFn,s.onComplete)}}}if(!u&&a.length>0&&!n)if(c){const A=null;e.listenProvider_.stopListening(Is(t),A)}else a.forEach((t=>{const A=e.queryToTagMap.get(Qs(t));e.listenProvider_.stopListening(Is(t),A)}));bs(e,a)}return i}function ds(e,t,A,n){const r=_s(e,n);if(null!=r){const n=Fs(r),s=n.path,i=n.queryId,o=yt(s,t),a=new fn(ln(i),o,A);return Us(e,s,a)}return[]}function fs(e,t,A,n){const r=_s(e,n);if(r){const n=Fs(r),s=n.path,i=n.queryId,o=yt(s,t),a=bn.fromObject(A),c=new gn(ln(i),o,a);return Us(e,s,c)}return[]}function gs(e,t,A){const n=t._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const A=yt(e,n);r=r||Xr(t,A),i=i||Zr(t)}));let o,a=e.syncPointTree_.get(n);if(a?(i=i||Zr(a),r=r||Xr(a,ut())):(a=new Pr,e.syncPointTree_=e.syncPointTree_.set(n,a)),null!=r)o=!0;else{o=!1,r=gA.EMPTY_NODE;const t=e.syncPointTree_.subtree(n);t.foreachChild(((e,t)=>{const A=Xr(t,ut());A&&(r=r.updateImmediateChild(e,A))}))}const c=$r(a,t);if(!c&&!t._queryParams.loadsAllData()){const A=Qs(t);(0,s.hu)(!e.queryToTagMap.has(A),"View does not exist, but we have a tag");const n=Ts();e.queryToTagMap.set(A,n),e.tagToQueryMap.set(n,A)}const u=Pn(e.pendingWriteTree_,n);let l=jr(a,t,A,u,r,o);if(!c&&!i){const A=zr(a,t);l=l.concat(Ss(e,t,A))}return l}function ps(e,t,A){const n=!0,r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,((e,A)=>{const n=yt(e,t),r=Xr(A,n);if(r)return r}));return Xn(r,t,s,A,n)}function Bs(e,t){const A=t._path;let n=null;e.syncPointTree_.foreachOnPath(A,((e,t)=>{const r=yt(e,A);n=n||Xr(t,r)}));let r=e.syncPointTree_.get(A);r?n=n||Xr(r,ut()):(r=new Pr,e.syncPointTree_=e.syncPointTree_.set(A,r));const s=null!=n,i=s?new pn(n,!0,!1):null,o=Pn(e.pendingWriteTree_,t._path),a=Wr(r,t,o,s?i.getNode():gA.EMPTY_NODE,s);return Sr(a)}function ms(e,t){return ws(t,e.syncPointTree_,null,Pn(e.pendingWriteTree_,ut()))}function ws(e,t,A,n){if(wt(e.path))return ys(e,t,A,n);{const r=t.get(ut());null==A&&null!=r&&(A=Xr(r,ut()));let s=[];const i=lt(e.path),o=e.operationForChild(i),a=t.children.get(i);if(a&&o){const e=A?A.getImmediateChild(i):null,t=cr(n,i);s=s.concat(ws(o,a,e,t))}return r&&(s=s.concat(qr(r,e,n,A))),s}}function ys(e,t,A,n){const r=t.get(ut());null==A&&null!=r&&(A=Xr(r,ut()));let s=[];return t.children.inorderTraversal(((t,r)=>{const i=A?A.getImmediateChild(t):null,o=cr(n,t),a=e.operationForChild(t);a&&(s=s.concat(ys(a,r,i,o)))})),r&&(s=s.concat(qr(r,e,n,A))),s}function Cs(e,t){const A=t.query,n=vs(e,A);return{hashFn:()=>{const e=Tr(t)||gA.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return n?ls(e,A._path,n):us(e,A._path);{const n=K(t,A);return hs(e,A,null,n)}}}}function vs(e,t){const A=Qs(t);return e.queryToTagMap.get(A)}function Qs(e){return e._path.toString()+"$"+e._queryIdentifier}function _s(e,t){return e.tagToQueryMap.get(t)}function Fs(e){const t=e.indexOf("$");return(0,s.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ct(e.substr(0,t))}}function Us(e,t,A){const n=e.syncPointTree_.get(t);(0,s.hu)(n,"Missing sync point for query tag that we're tracking");const r=Pn(e.pendingWriteTree_,t);return qr(n,A,r,null)}function Es(e){return e.fold(((e,t,A)=>{if(t&&Zr(t)){const e=es(t);return[e]}{let e=[];return t&&(e=Yr(t)),R(A,((t,A)=>{e=e.concat(A)})),e}}))}function Is(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(As())(e._repo,e._path):e}function bs(e,t){for(let A=0;A<t.length;++A){const n=t[A];if(!n._queryParams.loadsAllData()){const t=Qs(n),A=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(A)}}}function Ts(){return ns++}function Ss(e,t,A){const n=t._path,r=vs(e,t),i=Cs(e,A),o=e.listenProvider_.startListening(Is(t),r,i.hashFn,i.onComplete),a=e.syncPointTree_.subtree(n);if(r)(0,s.hu)(!Zr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,A)=>{if(!wt(e)&&t&&Zr(t))return[es(t).query];{let e=[];return t&&(e=e.concat(Yr(t).map((e=>e.query)))),R(A,((t,A)=>{e=e.concat(A)})),e}}));for(let A=0;A<t.length;++A){const n=t[A];e.listenProvider_.stopListening(Is(n),vs(e,n))}}return o}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ds(t)}node(){return this.node_}}class xs{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mt(this.path_,e);return new xs(this.syncTree_,t)}node(){return ps(this.syncTree_,this.path_)}}const Hs=function(e){return e=e||{},e["timestamp"]=e["timestamp"]||(new Date).getTime(),e},ks=function(e,t,A){return e&&"object"===typeof e?((0,s.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ls(e[".sv"],t,A):"object"===typeof e[".sv"]?Ns(e[".sv"],t):void(0,s.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ls=function(e,t,A){switch(e){case"timestamp":return A["timestamp"];default:(0,s.hu)(!1,"Unexpected server value: "+e)}},Ns=function(e,t,A){e.hasOwnProperty("increment")||(0,s.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const n=e["increment"];"number"!==typeof n&&(0,s.hu)(!1,"Unexpected increment value: "+n);const r=t.node();if((0,s.hu)(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;const i=r,o=i.getValue();return"number"!==typeof o?n:o+n},Rs=function(e,t,A,n){return Os(t,new xs(A,e),n)},Ms=function(e,t,A){return Os(e,new Ds(t),A)};function Os(e,t,A){const n=e.getPriority().val(),r=ks(n,t.getImmediateChild(".priority"),A);let s;if(e.isLeafNode()){const n=e,s=ks(n.getValue(),t,A);return s!==n.getValue()||r!==n.getPriority().val()?new nA(s,wA(r)):e}{const n=e;return s=n,r!==n.getPriority().val()&&(s=s.updatePriority(new nA(r))),n.forEachChild(oA,((e,n)=>{const r=Os(n,t.getImmediateChild(e),A);r!==n&&(s=s.updateImmediateChild(e,r))})),s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e="",t=null,A={children:{},childCount:0}){this.name=e,this.parent=t,this.node=A}}function Ks(e,t){let A=t instanceof ct?t:new ct(t),n=e,r=lt(A);while(null!==r){const e=(0,s.DV)(n.node.children,r)||{children:{},childCount:0};n=new Ps(r,n,e),A=dt(A),r=lt(A)}return n}function Vs(e){return e.node.value}function Gs(e,t){e.node.value=t,zs(e)}function qs(e){return e.node.childCount>0}function Ws(e){return void 0===Vs(e)&&!qs(e)}function js(e,t){R(e.node.children,((A,n)=>{t(new Ps(A,e,n))}))}function Js(e,t,A,n){A&&!n&&t(e),js(e,(e=>{Js(e,t,!0,n)})),A&&n&&t(e)}function Ys(e,t,A){let n=A?e:e.parent;while(null!==n){if(t(n))return!0;n=n.parent}return!1}function Xs(e){return new ct(null===e.parent?e.name:Xs(e.parent)+"/"+e.name)}function zs(e){null!==e.parent&&$s(e.parent,e.name,e)}function $s(e,t,A){const n=Ws(A),r=(0,s.r3)(e.node.children,t);n&&r?(delete e.node.children[t],e.node.childCount--,zs(e)):n||r||(e.node.children[t]=A.node,e.node.childCount++,zs(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=/[\[\].#$\/\u0000-\u001F\u007F]/,ei=/[\[\].#$\u0000-\u001F\u007F]/,ti=10485760,Ai=function(e){return"string"===typeof e&&0!==e.length&&!Zs.test(e)},ni=function(e){return"string"===typeof e&&0!==e.length&&!ei.test(e)},ri=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ni(e)},si=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!b(e)||e&&"object"===typeof e&&(0,s.r3)(e,".sv")},ii=function(e,t,A,n){n&&void 0===t||oi((0,s.gK)(e,"value"),t,A)},oi=function(e,t,A){const n=A instanceof ct?new _t(A,e):A;if(void 0===t)throw new Error(e+"contains undefined "+It(n));if("function"===typeof t)throw new Error(e+"contains a function "+It(n)+" with contents = "+t.toString());if(b(t))throw new Error(e+"contains "+t.toString()+" "+It(n));if("string"===typeof t&&t.length>ti/3&&(0,s.ug)(t)>ti)throw new Error(e+"contains a string greater than "+ti+" utf8 bytes "+It(n)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let A=!1,r=!1;if(R(t,((t,s)=>{if(".value"===t)A=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Ai(t)))throw new Error(e+" contains an invalid key ("+t+") "+It(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Ft(n,t),oi(e,s,n),Ut(n)})),A&&r)throw new Error(e+' contains ".value" child '+It(n)+" in addition to actual children.")}},ai=function(e,t){let A,n;for(A=0;A<t.length;A++){n=t[A];const r=pt(n);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!Ai(r[t]))throw new Error(e+"contains an invalid key ("+r[t]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Ct);let r=null;for(A=0;A<t.length;A++){if(n=t[A],null!==r&&Qt(r,n))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+n.toString());r=n}},ci=function(e,t,A,n){if(n&&void 0===t)return;const r=(0,s.gK)(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const i=[];R(t,((e,t)=>{const n=new ct(e);if(oi(r,t,mt(A,n)),".priority"===ft(n)&&!si(t))throw new Error(r+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(n)})),ai(r,i)},ui=function(e,t,A){if(!A||void 0!==t){if(b(t))throw new Error((0,s.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!si(t))throw new Error((0,s.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},li=function(e,t,A,n){if((!n||void 0!==A)&&!Ai(A))throw new Error((0,s.gK)(e,t)+'was an invalid key = "'+A+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hi=function(e,t,A,n){if((!n||void 0!==A)&&!ni(A))throw new Error((0,s.gK)(e,t)+'was an invalid path = "'+A+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},di=function(e,t,A,n){A&&(A=A.replace(/^\/*\.info(\/|$)/,"/")),hi(e,t,A,n)},fi=function(e,t){if(".info"===lt(t))throw new Error(e+" failed = Can't modify data under /.info/")},gi=function(e,t){const A=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ai(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==A.length&&!ri(A))throw new Error((0,s.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pi{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bi(e,t){let A=null;for(let n=0;n<t.length;n++){const r=t[n],s=r.getPath();null===A||vt(s,A.path)||(e.eventLists_.push(A),A=null),null===A&&(A={events:[],path:s}),A.events.push(r)}A&&e.eventLists_.push(A)}function mi(e,t,A){Bi(e,A),yi(e,(e=>vt(e,t)))}function wi(e,t,A){Bi(e,A),yi(e,(e=>Qt(e,t)||Qt(t,e)))}function yi(e,t){e.recursionDepth_++;let A=!0;for(let n=0;n<e.eventLists_.length;n++){const r=e.eventLists_[n];if(r){const s=r.path;t(s)?(Ci(e.eventLists_[n]),e.eventLists_[n]=null):A=!1}}A&&(e.eventLists_=[]),e.recursionDepth_--}function Ci(e){for(let t=0;t<e.events.length;t++){const A=e.events[t];if(null!==A){e.events[t]=null;const n=A.getEventRunner();y&&Q("event: "+A.toString()),j(n)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="repo_interrupt",Qi=25;class _i{constructor(e,t,A,n){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=A,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pi,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zA(),this.transactionQueueTree_=new Ps,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Fi(e,t,A){if(e.stats_=pe(e.repoInfo_),e.forceRestClient_||J())e.server_=new YA(e.repoInfo_,((t,A,n,r)=>{Ii(e,t,A,n,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>bi(e,!0)),0);else{if("undefined"!==typeof A&&null!==A){if("object"!==typeof A)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,s.Pz)(A)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new Rt(e.repoInfo_,t,((t,A,n,r)=>{Ii(e,t,A,n,r)}),(t=>{bi(e,t)}),(t=>{Ti(e,t)}),e.authTokenProvider_,e.appCheckProvider_,A),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=Be(e.repoInfo_,(()=>new on(e.stats_,e.server_))),e.infoData_=new XA,e.infoSyncTree_=new rs({startListening:(t,A,n,r)=>{let s=[];const i=e.infoData_.getNode(t._path);return i.isEmpty()||(s=as(e.infoSyncTree_,t._path,i),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),Si(e,"connected",!1),e.serverSyncTree_=new rs({startListening:(t,A,n,r)=>(e.server_.listen(t,n,A,((A,n)=>{const s=r(A,n);wi(e.eventQueue_,t._path,s)})),[]),stopListening:(t,A)=>{e.server_.unlisten(t,A)}})}function Ui(e){const t=e.infoData_.getNode(new ct(".info/serverTimeOffset")),A=t.val()||0;return(new Date).getTime()+A}function Ei(e){return Hs({timestamp:Ui(e)})}function Ii(e,t,A,n,r){e.dataUpdateCount++;const i=new ct(t);A=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,A):A;let o=[];if(r)if(n){const t=(0,s.UI)(A,(e=>wA(e)));o=fs(e.serverSyncTree_,i,t,r)}else{const t=wA(A);o=ds(e.serverSyncTree_,i,t,r)}else if(n){const t=(0,s.UI)(A,(e=>wA(e)));o=cs(e.serverSyncTree_,i,t)}else{const t=wA(A);o=as(e.serverSyncTree_,i,t)}let a=i;o.length>0&&(a=zi(e,i)),wi(e.eventQueue_,a,o)}function bi(e,t){Si(e,"connected",t),!1===t&&Li(e)}function Ti(e,t){R(t,((t,A)=>{Si(e,t,A)}))}function Si(e,t,A){const n=new ct("/.info/"+t),r=wA(A);e.infoData_.updateSnapshot(n,r);const s=as(e.infoSyncTree_,n,r);wi(e.eventQueue_,n,s)}function Di(e){return e.nextWriteId_++}function xi(e,t){const A=Bs(e.serverSyncTree_,t);return null!=A?Promise.resolve(A):e.server_.get(t).then((A=>{const n=wA(A).withIndex(t._queryParams.getIndex()),r=as(e.serverSyncTree_,t._path,n);return mi(e.eventQueue_,t._path,r),Promise.resolve(n)}),(A=>(qi(e,"get for query "+(0,s.Pz)(t)+" failed: "+A),Promise.reject(new Error(A)))))}function Hi(e,t,A,n,r){qi(e,"set",{path:t.toString(),value:A,priority:n});const s=Ei(e),i=wA(A,n),o=ps(e.serverSyncTree_,t),a=Ms(i,o,s),c=Di(e),u=ss(e.serverSyncTree_,t,a,c,!0);Bi(e.eventQueue_,u),e.server_.put(t.toString(),i.val(!0),((A,n)=>{const s="ok"===A;s||E("set at "+t+" failed: "+A);const i=os(e.serverSyncTree_,c,!s);wi(e.eventQueue_,t,i),Wi(e,r,A,n)}));const l=no(e,t);zi(e,l),wi(e.eventQueue_,l,[])}function ki(e,t,A,n){qi(e,"update",{path:t.toString(),value:A});let r=!0;const s=Ei(e),i={};if(R(A,((A,n)=>{r=!1,i[A]=Rs(mt(t,A),wA(n),e.serverSyncTree_,s)})),r)Q("update() called with empty data.  Don't do anything."),Wi(e,n,"ok",void 0);else{const r=Di(e),s=is(e.serverSyncTree_,t,i,r);Bi(e.eventQueue_,s),e.server_.merge(t.toString(),A,((A,s)=>{const i="ok"===A;i||E("update at "+t+" failed: "+A);const o=os(e.serverSyncTree_,r,!i),a=o.length>0?zi(e,t):t;wi(e.eventQueue_,a,o),Wi(e,n,A,s)})),R(A,(A=>{const n=no(e,mt(t,A));zi(e,n)})),wi(e.eventQueue_,t,[])}}function Li(e){qi(e,"onDisconnectEvents");const t=Ei(e),A=zA();en(e.onDisconnect_,ut(),((n,r)=>{const s=Rs(n,r,e.serverSyncTree_,t);$A(A,n,s)}));let n=[];en(A,ut(),((t,A)=>{n=n.concat(as(e.serverSyncTree_,t,A));const r=no(e,t);zi(e,r)})),e.onDisconnect_=zA(),wi(e.eventQueue_,ut(),n)}function Ni(e,t,A){e.server_.onDisconnectCancel(t.toString(),((n,r)=>{"ok"===n&&ZA(e.onDisconnect_,t),Wi(e,A,n,r)}))}function Ri(e,t,A,n){const r=wA(A);e.server_.onDisconnectPut(t.toString(),r.val(!0),((A,s)=>{"ok"===A&&$A(e.onDisconnect_,t,r),Wi(e,n,A,s)}))}function Mi(e,t,A,n,r){const s=wA(A,n);e.server_.onDisconnectPut(t.toString(),s.val(!0),((A,n)=>{"ok"===A&&$A(e.onDisconnect_,t,s),Wi(e,r,A,n)}))}function Oi(e,t,A,n){if((0,s.xb)(A))return Q("onDisconnect().update() called with empty data.  Don't do anything."),void Wi(e,n,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),A,((r,s)=>{"ok"===r&&R(A,((A,n)=>{const r=wA(n);$A(e.onDisconnect_,mt(t,A),r)})),Wi(e,n,r,s)}))}function Pi(e,t,A){let n;n=".info"===lt(t._path)?gs(e.infoSyncTree_,t,A):gs(e.serverSyncTree_,t,A),mi(e.eventQueue_,t._path,n)}function Ki(e,t,A){let n;n=".info"===lt(t._path)?hs(e.infoSyncTree_,t,A):hs(e.serverSyncTree_,t,A),mi(e.eventQueue_,t._path,n)}function Vi(e){e.persistentConnection_&&e.persistentConnection_.interrupt(vi)}function Gi(e){e.persistentConnection_&&e.persistentConnection_.resume(vi)}function qi(e,...t){let A="";e.persistentConnection_&&(A=e.persistentConnection_.id+":"),Q(A,...t)}function Wi(e,t,A,n){t&&j((()=>{if("ok"===A)t(null);else{const e=(A||"error").toUpperCase();let r=e;n&&(r+=": "+n);const s=new Error(r);s.code=e,t(s)}}))}function ji(e,t,A,n,r,i){qi(e,"transaction on "+t);const o={path:t,update:A,onComplete:n,status:null,order:B(),applyLocally:i,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Ji(e,t,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(void 0===c)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{oi("transaction failed: Data returned ",c,o.path),o.status=0;const A=Ks(e.transactionQueueTree_,t),n=Vs(A)||[];let r;if(n.push(o),Gs(A,n),"object"===typeof c&&null!==c&&(0,s.r3)(c,".priority"))r=(0,s.DV)(c,".priority"),(0,s.hu)(si(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{const A=ps(e.serverSyncTree_,t)||gA.EMPTY_NODE;r=A.getPriority().val()}const i=Ei(e),u=wA(c,r),l=Ms(u,a,i);o.currentOutputSnapshotRaw=u,o.currentOutputSnapshotResolved=l,o.currentWriteId=Di(e);const h=ss(e.serverSyncTree_,t,l,o.currentWriteId,o.applyLocally);wi(e.eventQueue_,t,h),Yi(e,e.transactionQueueTree_)}}function Ji(e,t,A){return ps(e.serverSyncTree_,t,A)||gA.EMPTY_NODE}function Yi(e,t=e.transactionQueueTree_){if(t||Ao(e,t),Vs(t)){const A=eo(e,t);(0,s.hu)(A.length>0,"Sending zero length transaction queue");const n=A.every((e=>0===e.status));n&&Xi(e,Xs(t),A)}else qs(t)&&js(t,(t=>{Yi(e,t)}))}function Xi(e,t,A){const n=A.map((e=>e.currentWriteId)),r=Ji(e,t,n);let i=r;const o=r.hash();for(let u=0;u<A.length;u++){const e=A[u];(0,s.hu)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const n=yt(t,e.path);i=i.updateChild(n,e.currentOutputSnapshotRaw)}const a=i.val(!0),c=t;e.server_.put(c.toString(),a,(n=>{qi(e,"transaction put response",{path:c.toString(),status:n});let r=[];if("ok"===n){const n=[];for(let t=0;t<A.length;t++)A[t].status=2,r=r.concat(os(e.serverSyncTree_,A[t].currentWriteId)),A[t].onComplete&&n.push((()=>A[t].onComplete(null,!0,A[t].currentOutputSnapshotResolved))),A[t].unwatcher();Ao(e,Ks(e.transactionQueueTree_,t)),Yi(e,e.transactionQueueTree_),wi(e.eventQueue_,t,r);for(let e=0;e<n.length;e++)j(n[e])}else{if("datastale"===n)for(let e=0;e<A.length;e++)3===A[e].status?A[e].status=4:A[e].status=0;else{E("transaction at "+c.toString()+" failed: "+n);for(let e=0;e<A.length;e++)A[e].status=4,A[e].abortReason=n}zi(e,t)}}),o)}function zi(e,t){const A=Zi(e,t),n=Xs(A),r=eo(e,A);return $i(e,r,n),n}function $i(e,t,A){if(0===t.length)return;const n=[];let r=[];const i=t.filter((e=>0===e.status)),o=i.map((e=>e.currentWriteId));for(let a=0;a<t.length;a++){const i=t[a],c=yt(A,i.path);let u,l=!1;if((0,s.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===i.status)l=!0,u=i.abortReason,r=r.concat(os(e.serverSyncTree_,i.currentWriteId,!0));else if(0===i.status)if(i.retryCount>=Qi)l=!0,u="maxretry",r=r.concat(os(e.serverSyncTree_,i.currentWriteId,!0));else{const A=Ji(e,i.path,o);i.currentInputSnapshot=A;const n=t[a].update(A.val());if(void 0!==n){oi("transaction failed: Data returned ",n,i.path);let t=wA(n);const a="object"===typeof n&&null!=n&&(0,s.r3)(n,".priority");a||(t=t.updatePriority(A.getPriority()));const c=i.currentWriteId,u=Ei(e),l=Ms(t,A,u);i.currentOutputSnapshotRaw=t,i.currentOutputSnapshotResolved=l,i.currentWriteId=Di(e),o.splice(o.indexOf(c),1),r=r.concat(ss(e.serverSyncTree_,i.path,l,i.currentWriteId,i.applyLocally)),r=r.concat(os(e.serverSyncTree_,c,!0))}else l=!0,u="nodata",r=r.concat(os(e.serverSyncTree_,i.currentWriteId,!0))}wi(e.eventQueue_,A,r),r=[],l&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===u?n.push((()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot))):n.push((()=>t[a].onComplete(new Error(u),!1,null)))))}Ao(e,e.transactionQueueTree_);for(let s=0;s<n.length;s++)j(n[s]);Yi(e,e.transactionQueueTree_)}function Zi(e,t){let A,n=e.transactionQueueTree_;A=lt(t);while(null!==A&&void 0===Vs(n))n=Ks(n,A),t=dt(t),A=lt(t);return n}function eo(e,t){const A=[];return to(e,t,A),A.sort(((e,t)=>e.order-t.order)),A}function to(e,t,A){const n=Vs(t);if(n)for(let r=0;r<n.length;r++)A.push(n[r]);js(t,(t=>{to(e,t,A)}))}function Ao(e,t){const A=Vs(t);if(A){let e=0;for(let t=0;t<A.length;t++)2!==A[t].status&&(A[e]=A[t],e++);A.length=e,Gs(t,A.length>0?A:void 0)}js(t,(t=>{Ao(e,t)}))}function no(e,t){const A=Xs(Zi(e,t)),n=Ks(e.transactionQueueTree_,t);return Ys(n,(t=>{ro(e,t)})),ro(e,n),Js(n,(t=>{ro(e,t)})),A}function ro(e,t){const A=Vs(t);if(A){const n=[];let r=[],i=-1;for(let t=0;t<A.length;t++)3===A[t].status||(1===A[t].status?((0,s.hu)(i===t-1,"All SENT items should be at beginning of queue."),i=t,A[t].status=3,A[t].abortReason="set"):((0,s.hu)(0===A[t].status,"Unexpected transaction status in abort"),A[t].unwatcher(),r=r.concat(os(e.serverSyncTree_,A[t].currentWriteId,!0)),A[t].onComplete&&n.push(A[t].onComplete.bind(null,new Error("set"),!1,null))));-1===i?Gs(t,void 0):A.length=i+1,wi(e.eventQueue_,Xs(t),r);for(let e=0;e<n.length;e++)j(n[e])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(e){let t="";const A=e.split("/");for(let r=0;r<A.length;r++)if(A[r].length>0){let e=A[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(n){}t+="/"+e}return t}function io(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const A of e.split("&")){if(0===A.length)continue;const n=A.split("=");2===n.length?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):E(`Invalid query segment '${A}' in query '${e}'`)}return t}const oo=function(e,t){const A=ao(e),n=A.namespace;"firebase.com"===A.domain&&U(A.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===A.domain||U("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),A.secure||I();const r="ws"===A.scheme||"wss"===A.scheme;return{repoInfo:new ue(A.host,A.secure,n,r,t,"",n!==A.subdomain),path:new ct(A.pathString)}},ao=function(e){let t="",A="",n="",r="",s="",i=!0,o="https",a=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let l=e.indexOf("?");-1===l&&(l=e.length),t=e.substring(0,Math.min(u,l)),u<l&&(r=so(e.substring(u,l)));const h=io(e.substring(Math.min(e.length,l)));c=t.indexOf(":"),c>=0?(i="https"===o||"wss"===o,a=parseInt(t.substring(c+1),10)):c=t.length;const d=t.slice(0,c);if("localhost"===d.toLowerCase())A="localhost";else if(d.split(".").length<=2)A=d;else{const e=t.indexOf(".");n=t.substring(0,e).toLowerCase(),A=t.substring(e+1),s=n}"ns"in h&&(s=h["ns"])}return{host:t,port:a,domain:A,subdomain:n,secure:i,scheme:o,pathString:r,namespace:s}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class co{constructor(e,t,A,n){this.eventType=e,this.eventRegistration=t,this.snapshot=A,this.prevName=n}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,s.Pz)(this.snapshot.exportVal())}}class uo{constructor(e,t,A){this.eventRegistration=e,this.error=t,this.path=A}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,s.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new s.BH;return Ni(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){fi("OnDisconnect.remove",this._path);const e=new s.BH;return Ri(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){fi("OnDisconnect.set",this._path),ii("OnDisconnect.set",e,this._path,!1);const t=new s.BH;return Ri(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){fi("OnDisconnect.setWithPriority",this._path),ii("OnDisconnect.setWithPriority",e,this._path,!1),ui("OnDisconnect.setWithPriority",t,!1);const A=new s.BH;return Mi(this._repo,this._path,e,t,A.wrapCallback((()=>{}))),A.promise}update(e){fi("OnDisconnect.update",this._path),ci("OnDisconnect.update",e,this._path,!1);const t=new s.BH;return Oi(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,A,n){this._repo=e,this._path=t,this._queryParams=A,this._orderByCalled=n}get key(){return wt(this._path)?null:ft(this._path)}get ref(){return new mo(this._repo,this._path)}get _queryIdentifier(){const e=JA(this._queryParams),t=L(e);return"{}"===t?"default":t}get _queryObject(){return JA(this._queryParams)}isEqual(e){if(e=(0,s.m9)(e),!(e instanceof fo))return!1;const t=this._repo===e._repo,A=vt(this._path,e._path),n=this._queryIdentifier===e._queryIdentifier;return t&&A&&n}toJSON(){return this.toString()}toString(){return this._repo.toString()+gt(this._path)}}function go(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function po(e){let t=null,A=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(A=e.getIndexEndValue()),e.getIndex()===Vt){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){const A=e.getIndexStartName();if(A!==S)throw new Error(n);if("string"!==typeof t)throw new Error(r)}if(e.hasEnd()){const t=e.getIndexEndName();if(t!==D)throw new Error(n);if("string"!==typeof A)throw new Error(r)}}else if(e.getIndex()===oA){if(null!=t&&!si(t)||null!=A&&!si(A))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,s.hu)(e.getIndex()instanceof yA||e.getIndex()===vA,"unknown index type."),null!=t&&"object"===typeof t||null!=A&&"object"===typeof A)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Bo(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class mo extends fo{constructor(e,t){super(e,t,new RA,!1)}get parent(){const e=Bt(this._path);return null===e?null:new mo(this._repo,e)}get root(){let e=this;while(null!==e.parent)e=e.parent;return e}}class wo{constructor(e,t,A){this._node=e,this.ref=t,this._index=A}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ct(e),A=vo(this.ref,e);return new wo(this._node.getChild(t),A,oA)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;const t=this._node;return!!t.forEachChild(this._index,((t,A)=>e(new wo(A,vo(this.ref,t),oA))))}hasChild(e){const t=new ct(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yo(e,t){return e=(0,s.m9)(e),e._checkNotDeleted("ref"),void 0!==t?vo(e._root,t):e._root}function Co(e,t){e=(0,s.m9)(e),e._checkNotDeleted("refFromURL");const A=oo(t,e._repo.repoInfo_.nodeAdmin);gi("refFromURL",A);const n=A.repoInfo;return e._repo.repoInfo_.isCustomHost()||n.host===e._repo.repoInfo_.host||U("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+e._repo.repoInfo_.host+")"),yo(e,A.path.toString())}function vo(e,t){return e=(0,s.m9)(e),null===lt(e._path)?di("child","path",t,!1):hi("child","path",t,!1),new mo(e._repo,mt(e._path,t))}function Qo(e,t){e=(0,s.m9)(e),fi("push",e._path),ii("push",t,e._path,!0);const A=Ui(e._repo),n=EA(A),r=vo(e,n),i=vo(e,n);let o;return o=null!=t?Fo(i,t).then((()=>i)):Promise.resolve(i),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function _o(e){return fi("remove",e._path),Fo(e,null)}function Fo(e,t){e=(0,s.m9)(e),fi("set",e._path),ii("set",t,e._path,!1);const A=new s.BH;return Hi(e._repo,e._path,t,null,A.wrapCallback((()=>{}))),A.promise}function Uo(e,t){e=(0,s.m9)(e),fi("setPriority",e._path),ui("setPriority",t,!1);const A=new s.BH;return Hi(e._repo,mt(e._path,".priority"),t,null,A.wrapCallback((()=>{}))),A.promise}function Eo(e,t,A){if(fi("setWithPriority",e._path),ii("setWithPriority",t,e._path,!1),ui("setWithPriority",A,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const n=new s.BH;return Hi(e._repo,e._path,t,A,n.wrapCallback((()=>{}))),n.promise}function Io(e,t){ci("update",t,e._path,!1);const A=new s.BH;return ki(e._repo,e._path,t,A.wrapCallback((()=>{}))),A.promise}function bo(e){return e=(0,s.m9)(e),xi(e._repo,e).then((t=>new wo(t,new mo(e._repo,e._path),e._queryParams.getIndex())))}class To{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const A=t._queryParams.getIndex();return new co("value",this,new wo(e.snapshotNode,new mo(t._repo,t._path),A))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uo(this,e,t):null}matches(e){return e instanceof To&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class So{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uo(this,e,t):null}createEvent(e,t){(0,s.hu)(null!=e.childName,"Child events should have a childName.");const A=vo(new mo(t._repo,t._path),e.childName),n=t._queryParams.getIndex();return new co(e.type,this,new wo(e.snapshotNode,A,n),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof So&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Do(e,t,A,n,r){let s;if("object"===typeof n&&(s=void 0,r=n),"function"===typeof n&&(s=n),r&&r.onlyOnce){const t=A,n=(A,n)=>{Ki(e._repo,e,o),t(A,n)};n.userCallback=A.userCallback,n.context=A.context,A=n}const i=new lo(A,s||void 0),o="value"===t?new To(i):new So(t,i);return Pi(e._repo,e,o),()=>Ki(e._repo,e,o)}function xo(e,t,A,n){return Do(e,"value",t,A,n)}function Ho(e,t,A,n){return Do(e,"child_added",t,A,n)}function ko(e,t,A,n){return Do(e,"child_changed",t,A,n)}function Lo(e,t,A,n){return Do(e,"child_moved",t,A,n)}function No(e,t,A,n){return Do(e,"child_removed",t,A,n)}function Ro(e,t,A){let n=null;const r=A?new lo(A):null;"value"===t?n=new To(r):t&&(n=new So(t,r)),Ki(e._repo,e,n)}class Mo{}class Oo extends Mo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ii("endAt",this._value,e._path,!0);const t=GA(e._queryParams,this._value,this._key);if(Bo(t),po(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}function Po(e,t){return li("endAt","key",t,!0),new Oo(e,t)}class Ko extends Mo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ii("endBefore",this._value,e._path,!1);const t=qA(e._queryParams,this._value,this._key);if(Bo(t),po(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}function Vo(e,t){return li("endBefore","key",t,!0),new Ko(e,t)}class Go extends Mo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ii("startAt",this._value,e._path,!0);const t=KA(e._queryParams,this._value,this._key);if(Bo(t),po(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}function qo(e=null,t){return li("startAt","key",t,!0),new Go(e,t)}class Wo extends Mo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ii("startAfter",this._value,e._path,!1);const t=VA(e._queryParams,this._value,this._key);if(Bo(t),po(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}function jo(e,t){return li("startAfter","key",t,!0),new Wo(e,t)}class Jo extends Mo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,OA(e._queryParams,this._limit),e._orderByCalled)}}function Yo(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Jo(e)}class Xo extends Mo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,PA(e._queryParams,this._limit),e._orderByCalled)}}function zo(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Xo(e)}class $o extends Mo{constructor(e){super(),this._path=e}_apply(e){go(e,"orderByChild");const t=new ct(this._path);if(wt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const A=new yA(t),n=WA(e._queryParams,A);return po(n),new fo(e._repo,e._path,n,!0)}}function Zo(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hi("orderByChild","path",e,!1),new $o(e)}class ea extends Mo{_apply(e){go(e,"orderByKey");const t=WA(e._queryParams,Vt);return po(t),new fo(e._repo,e._path,t,!0)}}function ta(){return new ea}class Aa extends Mo{_apply(e){go(e,"orderByPriority");const t=WA(e._queryParams,oA);return po(t),new fo(e._repo,e._path,t,!0)}}function na(){return new Aa}class ra extends Mo{_apply(e){go(e,"orderByValue");const t=WA(e._queryParams,vA);return po(t),new fo(e._repo,e._path,t,!0)}}function sa(){return new ra}class ia extends Mo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ii("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Oo(this._value,this._key)._apply(new Go(this._value,this._key)._apply(e))}}function oa(e,t){return li("equalTo","key",t,!0),new ia(e,t)}function aa(e,...t){let A=(0,s.m9)(e);for(const n of t)A=n._apply(A);return A}Kr(mo),ts(mo);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ca="FIREBASE_DATABASE_EMULATOR_HOST",ua={};let la=!1;function ha(e,t,A,n){e.repoInfo_=new ue(`${t}:${A}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),n&&(e.authTokenProvider_=n)}function da(e,t,A,n,r){let s=n||e.options.databaseURL;void 0===s&&(e.options.projectId||U("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Q("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let i,o,a=oo(s,r),c=a.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",BASE_URL:"/"}[ca]),o?(i=!0,s=`http://${o}?ns=${c.namespace}`,a=oo(s,r),c=a.repoInfo):i=!a.repoInfo.secure;const u=r&&i?new $($.OWNER):new z(e.name,e.options,t);gi("Invalid Firebase Database URL",a),wt(a.path)||U("Database URL must point to the root of a Firebase Database (not including a child path).");const l=ga(c,e,u,new X(e.name,A));return new pa(l,e)}function fa(e,t){const A=ua[t];A&&A[e.key]===e||U(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Vi(e),delete A[e.key]}function ga(e,t,A,n){let r=ua[t.name];r||(r={},ua[t.name]=r);let s=r[e.toURLString()];return s&&U("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new _i(e,la,A,n),r[e.toURLString()]=s,s}class pa{constructor(e,t){this._repoInternal=e,this.app=t,this["type"]="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Fi(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mo(this._repo,ut())),this._rootInternal}_delete(){return null!==this._rootInternal&&(fa(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&U("Cannot call "+e+" on a deleted database.")}}function Ba(){Ke.IS_TRANSPORT_INITIALIZED&&E("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ma(){Ba(),Le.forceDisallow()}function wa(){Ba(),Pe.forceDisallow(),Le.forceAllow()}function ya(e,t,A,n={}){e=(0,s.m9)(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&U("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let i;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&U('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new $($.OWNER);else if(n.mockUserToken){const t="string"===typeof n.mockUserToken?n.mockUserToken:(0,s.Sg)(n.mockUserToken,e.app.options.projectId);i=new $(t)}ha(r,t,A,i)}function Ca(e){e=(0,s.m9)(e),e._checkNotDeleted("goOffline"),Vi(e._repo)}function va(e){e=(0,s.m9)(e),e._checkNotDeleted("goOnline"),Gi(e._repo)}function Qa(e,t){v(e,t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(e){u(n.SDK_VERSION),(0,n._registerComponent)(new r.wA("database",((e,{instanceIdentifier:t})=>{const A=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return da(A,n,r,t)}),"PUBLIC").setMultipleInstances(!0)),(0,n.registerVersion)(o,a,e),(0,n.registerVersion)(o,a,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa={".sv":"timestamp"};function Ua(){return Fa}function Ea(e){return{".sv":{increment:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function ba(e,t,A){var n;if(e=(0,s.m9)(e),fi("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const r=null===(n=null===A||void 0===A?void 0:A.applyLocally)||void 0===n||n,i=new s.BH,o=(t,A,n)=>{let r=null;t?i.reject(t):(r=new wo(n,new mo(e._repo,e._path),oA),i.resolve(new Ia(A,r)))},a=xo(e,(()=>{}));return ji(e._repo,e._path,t,o,a,r),i.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Rt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};_a()},444:function(e,t,A){"use strict";A.d(t,{BH:function(){return g},DV:function(){return P},Dv:function(){return $},G6:function(){return E},GJ:function(){return M},L:function(){return u},LL:function(){return D},Mn:function(){return F},Pz:function(){return L},Sg:function(){return p},UI:function(){return V},US:function(){return a},Wj:function(){return ee},Yr:function(){return U},ZB:function(){return d},ZR:function(){return S},b$:function(){return v},cI:function(){return k},d:function(){return Q},dS:function(){return Ae},eu:function(){return b},g5:function(){return s},gK:function(){return Z},gQ:function(){return j},h$:function(){return c},hl:function(){return I},hu:function(){return r},jU:function(){return y},lb:function(){return te},m9:function(){return re},ne:function(){return J},p$:function(){return h},r3:function(){return O},ru:function(){return C},uI:function(){return m},ug:function(){return ne},vZ:function(){return G},w1:function(){return _},w9:function(){return R},xO:function(){return W},xb:function(){return K},z$:function(){return B}});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},i=function(e){const t=[];let A=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t[A++]=r:r<2048?(t[A++]=r>>6|192,t[A++]=63&r|128):55296===(64512&r)&&n+1<e.length&&56320===(64512&e.charCodeAt(n+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n)),t[A++]=r>>18|240,t[A++]=r>>12&63|128,t[A++]=r>>6&63|128,t[A++]=63&r|128):(t[A++]=r>>12|224,t[A++]=r>>6&63|128,t[A++]=63&r|128)}return t},o=function(e){const t=[];let A=0,n=0;while(A<e.length){const r=e[A++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[A++];t[n++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=e[A++],i=e[A++],o=e[A++],a=((7&r)<<18|(63&s)<<12|(63&i)<<6|63&o)-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else{const s=e[A++],i=e[A++];t[n++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&i)}}return t.join("")},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,i=s?e[r+1]:0,o=r+2<e.length,a=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let l=(15&i)<<2|a>>6,h=63&a;o||(h=64,s||(l=64)),n.push(A[c],A[u],A[l],A[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):o(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const A=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<e.length;){const t=A[e.charAt(r++)],s=r<e.length,i=s?A[e.charAt(r)]:0;++r;const o=r<e.length,a=o?A[e.charAt(r)]:64;++r;const c=r<e.length,u=c?A[e.charAt(r)]:64;if(++r,null==t||null==i||null==a||null==u)throw Error();const l=t<<2|i>>4;if(n.push(l),64!==a){const e=i<<4&240|a>>2;if(n.push(e),64!==u){const e=a<<6&192|u;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){const t=i(e);return a.encodeByteArray(t,!0)},u=function(e){return c(e).replace(/\./g,"")},l=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function h(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const A=t;return new Date(A.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const A in t)t.hasOwnProperty(A)&&f(A)&&(e[A]=d(e[A],t[A]));return e}function f(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,A)=>{t?this.reject(t):this.resolve(A),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,A))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A={alg:"none",type:"JWT"},n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),o="";return[u(JSON.stringify(A)),u(JSON.stringify(i)),o].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function m(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(B())}function w(){try{return"[object process]"===Object.prototype.toString.call(A.g.process)}catch(e){return!1}}function y(){return"object"===typeof self&&self.self===self}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function v(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function Q(){return B().indexOf("Electron/")>=0}function _(){const e=B();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function F(){return B().indexOf("MSAppHost/")>=0}function U(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN}function E(){return!w()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return"object"===typeof indexedDB}function b(){return new Promise(((e,t)=>{try{let A=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),A||self.indexedDB.deleteDatabase(n),e(!0)},r.onupgradeneeded=()=>{A=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(A){t(A)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const T="FirebaseError";class S extends Error{constructor(e,t,A){super(t),this.code=e,this.customData=A,this.name=T,Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(e,t,A){this.service=e,this.serviceName=t,this.errors=A}create(e,...t){const A=t[0]||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?x(r,A):"Error",i=`${this.serviceName}: ${s} (${n}).`,o=new S(n,i,A);return o}}function x(e,t){return e.replace(H,((e,A)=>{const n=t[A];return null!=n?String(n):`<${A}?>`}))}const H=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(e){return JSON.parse(e)}function L(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=function(e){let t={},A={},n={},r="";try{const s=e.split(".");t=k(l(s[0])||""),A=k(l(s[1])||""),r=s[2],n=A["d"]||{},delete A["d"]}catch(s){}return{header:t,claims:A,data:n,signature:r}},R=function(e){const t=N(e),A=t.claims;return!!A&&"object"===typeof A&&A.hasOwnProperty("iat")},M=function(e){const t=N(e).claims;return"object"===typeof t&&!0===t["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function K(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function V(e,t,A){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=t.call(A,e[r],r,e));return n}function G(e,t){if(e===t)return!0;const A=Object.keys(e),n=Object.keys(t);for(const r of A){if(!n.includes(r))return!1;const A=e[r],s=t[r];if(q(A)&&q(s)){if(!G(A,s))return!1}else if(A!==s)return!1}for(const r of n)if(!A.includes(r))return!1;return!0}function q(e){return null!==e&&"object"===typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e){const t=[];for(const[A,n]of Object.entries(e))Array.isArray(n)?n.forEach((e=>{t.push(encodeURIComponent(A)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(A)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class j{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const A=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)A[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)A[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=A[u-3]^A[u-8]^A[u-14]^A[u-16];A[u]=4294967295&(e<<1|e>>>31)}let n,r,s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(n=a^i&(o^a),r=1518500249):(n=i^o^a,r=1859775393):u<60?(n=i&o|a&(i|o),r=2400959708):(n=i^o^a,r=3395469782);const e=(s<<5|s>>>27)+n+c+r+A[u]&4294967295;c=a,a=o,o=4294967295&(i<<30|i>>>2),i=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const A=t-this.blockSize;let n=0;const r=this.buf_;let s=this.inbuf_;while(n<t){if(0===s)while(n<=A)this.compress_(e,n),n+=this.blockSize;if("string"===typeof e){while(n<t)if(r[s]=e.charCodeAt(n),++s,++n,s===this.blockSize){this.compress_(r),s=0;break}}else while(n<t)if(r[s]=e[n],++s,++n,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);let A=0;for(let n=0;n<5;n++)for(let t=24;t>=0;t-=8)e[A]=this.chain_[n]>>t&255,++A;return e}}function J(e,t){const A=new Y(e,t);return A.subscribe.bind(A)}class Y{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,A){let n;if(void 0===e&&void 0===t&&void 0===A)throw new Error("Missing Observer.");n=X(e,["next","error","complete"])?e:{next:e,error:t,complete:A},void 0===n.next&&(n.next=z),void 0===n.error&&(n.error=z),void 0===n.complete&&(n.complete=z);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}})),this.observers.push(n),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(A){"undefined"!==typeof console&&console.error&&console.error(A)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function X(e,t){if("object"!==typeof e||null===e)return!1;for(const A of t)if(A in e&&"function"===typeof e[A])return!0;return!1}function z(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(e,t,A,n){let r;if(n<t?r="at least "+t:n>A&&(r=0===A?"none":"no more than "+A),r){const t=e+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+r+".";throw new Error(t)}};function Z(e,t){return`${e} failed: ${t} argument `}function ee(e,t,A,n){if((!n||A)&&"function"!==typeof A)throw new Error(Z(e,t)+"must be a valid function.")}function te(e,t,A,n){if((!n||A)&&("object"!==typeof A||null===A))throw new Error(Z(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae=function(e){const t=[];let A=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s>=55296&&s<=56319){const t=s-55296;n++,r(n<e.length,"Surrogate pair missing trail surrogate.");const A=e.charCodeAt(n)-56320;s=65536+(t<<10)+A}s<128?t[A++]=s:s<2048?(t[A++]=s>>6|192,t[A++]=63&s|128):s<65536?(t[A++]=s>>12|224,t[A++]=s>>6&63|128,t[A++]=63&s|128):(t[A++]=s>>18|240,t[A++]=s>>12&63|128,t[A++]=s>>6&63|128,t[A++]=63&s|128)}return t},ne=function(e){let t=0;for(let A=0;A<e.length;A++){const n=e.charCodeAt(A);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,A++):t+=3}return t};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function re(e){return e&&e._delegate?e._delegate:e}},262:function(e,t,A){"use strict";A.d(t,{Bj:function(){return s},Fl:function(){return Ve},IU:function(){return Ie},Jd:function(){return Q},PG:function(){return _e},SU:function(){return Me},Um:function(){return Ce},WL:function(){return Pe},X$:function(){return E},X3:function(){return Ee},XI:function(){return Le},Xl:function(){return be},dq:function(){return He},iH:function(){return ke},j:function(){return F},lk:function(){return _},qj:function(){return ye},qq:function(){return w},yT:function(){return Ue}});var n=A(577);let r;class s{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&r&&(this.parent=r,this.index=(r.scopes||(r.scopes=[])).push(this)-1)}run(e){if(this.active){const t=r;try{return r=this,e()}finally{r=t}}else 0}on(){r=this}off(){r=this.parent}stop(e){if(this.active){let t,A;for(t=0,A=this.effects.length;t<A;t++)this.effects[t].stop();for(t=0,A=this.cleanups.length;t<A;t++)this.cleanups[t]();if(this.scopes)for(t=0,A=this.scopes.length;t<A;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function i(e,t=r){t&&t.active&&t.effects.push(e)}const o=e=>{const t=new Set(e);return t.w=0,t.n=0,t},a=e=>(e.w&f)>0,c=e=>(e.n&f)>0,u=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=f},l=e=>{const{deps:t}=e;if(t.length){let A=0;for(let n=0;n<t.length;n++){const r=t[n];a(r)&&!c(r)?r.delete(e):t[A++]=r,r.w&=~f,r.n&=~f}t.length=A}},h=new WeakMap;let d=0,f=1;const g=30;let p;const B=Symbol(""),m=Symbol("");class w{constructor(e,t=null,A){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,i(this,A)}run(){if(!this.active)return this.fn();let e=p,t=C;while(e){if(e===this)return;e=e.parent}try{return this.parent=p,p=this,C=!0,f=1<<++d,d<=g?u(this):y(this),this.fn()}finally{d<=g&&l(this),f=1<<--d,p=this.parent,C=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){p===this?this.deferStop=!0:this.active&&(y(this),this.onStop&&this.onStop(),this.active=!1)}}function y(e){const{deps:t}=e;if(t.length){for(let A=0;A<t.length;A++)t[A].delete(e);t.length=0}}let C=!0;const v=[];function Q(){v.push(C),C=!1}function _(){const e=v.pop();C=void 0===e||e}function F(e,t,A){if(C&&p){let t=h.get(e);t||h.set(e,t=new Map);let n=t.get(A);n||t.set(A,n=o());const r=void 0;U(n,r)}}function U(e,t){let A=!1;d<=g?c(e)||(e.n|=f,A=!a(e)):A=!e.has(p),A&&(e.add(p),p.deps.push(e))}function E(e,t,A,r,s,i){const a=h.get(e);if(!a)return;let c=[];if("clear"===t)c=[...a.values()];else if("length"===A&&(0,n.kJ)(e))a.forEach(((e,t)=>{("length"===t||t>=r)&&c.push(e)}));else switch(void 0!==A&&c.push(a.get(A)),t){case"add":(0,n.kJ)(e)?(0,n.S0)(A)&&c.push(a.get("length")):(c.push(a.get(B)),(0,n._N)(e)&&c.push(a.get(m)));break;case"delete":(0,n.kJ)(e)||(c.push(a.get(B)),(0,n._N)(e)&&c.push(a.get(m)));break;case"set":(0,n._N)(e)&&c.push(a.get(B));break}if(1===c.length)c[0]&&I(c[0]);else{const e=[];for(const t of c)t&&e.push(...t);I(o(e))}}function I(e,t){const A=(0,n.kJ)(e)?e:[...e];for(const n of A)n.computed&&b(n,t);for(const n of A)n.computed||b(n,t)}function b(e,t){(e!==p||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const T=(0,n.fY)("__proto__,__v_isRef,__isVue"),S=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(n.yk)),D=N(),x=N(!1,!0),H=N(!0),k=L();function L(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const A=Ie(this);for(let t=0,r=this.length;t<r;t++)F(A,"get",t+"");const n=A[t](...e);return-1===n||!1===n?A[t](...e.map(Ie)):n}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){Q();const A=Ie(this)[t].apply(this,e);return _(),A}})),e}function N(e=!1,t=!1){return function(A,r,s){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&s===(e?t?Be:pe:t?ge:fe).get(A))return A;const i=(0,n.kJ)(A);if(!e&&i&&(0,n.RI)(k,r))return Reflect.get(k,r,s);const o=Reflect.get(A,r,s);return((0,n.yk)(r)?S.has(r):T(r))?o:(e||F(A,"get",r),t?o:He(o)?i&&(0,n.S0)(r)?o:o.value:(0,n.Kn)(o)?e?ve(o):ye(o):o)}}const R=O(),M=O(!0);function O(e=!1){return function(t,A,r,s){let i=t[A];if(Fe(i)&&He(i)&&!He(r))return!1;if(!e&&!Fe(r)&&(Ue(r)||(r=Ie(r),i=Ie(i)),!(0,n.kJ)(t)&&He(i)&&!He(r)))return i.value=r,!0;const o=(0,n.kJ)(t)&&(0,n.S0)(A)?Number(A)<t.length:(0,n.RI)(t,A),a=Reflect.set(t,A,r,s);return t===Ie(s)&&(o?(0,n.aU)(r,i)&&E(t,"set",A,r,i):E(t,"add",A,r)),a}}function P(e,t){const A=(0,n.RI)(e,t),r=e[t],s=Reflect.deleteProperty(e,t);return s&&A&&E(e,"delete",t,void 0,r),s}function K(e,t){const A=Reflect.has(e,t);return(0,n.yk)(t)&&S.has(t)||F(e,"has",t),A}function V(e){return F(e,"iterate",(0,n.kJ)(e)?"length":B),Reflect.ownKeys(e)}const G={get:D,set:R,deleteProperty:P,has:K,ownKeys:V},q={get:H,set(e,t){return!0},deleteProperty(e,t){return!0}},W=(0,n.l7)({},G,{get:x,set:M}),j=e=>e,J=e=>Reflect.getPrototypeOf(e);function Y(e,t,A=!1,n=!1){e=e["__v_raw"];const r=Ie(e),s=Ie(t);A||(t!==s&&F(r,"get",t),F(r,"get",s));const{has:i}=J(r),o=n?j:A?Se:Te;return i.call(r,t)?o(e.get(t)):i.call(r,s)?o(e.get(s)):void(e!==r&&e.get(t))}function X(e,t=!1){const A=this["__v_raw"],n=Ie(A),r=Ie(e);return t||(e!==r&&F(n,"has",e),F(n,"has",r)),e===r?A.has(e):A.has(e)||A.has(r)}function z(e,t=!1){return e=e["__v_raw"],!t&&F(Ie(e),"iterate",B),Reflect.get(e,"size",e)}function $(e){e=Ie(e);const t=Ie(this),A=J(t),n=A.has.call(t,e);return n||(t.add(e),E(t,"add",e,e)),this}function Z(e,t){t=Ie(t);const A=Ie(this),{has:r,get:s}=J(A);let i=r.call(A,e);i||(e=Ie(e),i=r.call(A,e));const o=s.call(A,e);return A.set(e,t),i?(0,n.aU)(t,o)&&E(A,"set",e,t,o):E(A,"add",e,t),this}function ee(e){const t=Ie(this),{has:A,get:n}=J(t);let r=A.call(t,e);r||(e=Ie(e),r=A.call(t,e));const s=n?n.call(t,e):void 0,i=t.delete(e);return r&&E(t,"delete",e,void 0,s),i}function te(){const e=Ie(this),t=0!==e.size,A=void 0,n=e.clear();return t&&E(e,"clear",void 0,void 0,A),n}function Ae(e,t){return function(A,n){const r=this,s=r["__v_raw"],i=Ie(s),o=t?j:e?Se:Te;return!e&&F(i,"iterate",B),s.forEach(((e,t)=>A.call(n,o(e),o(t),r)))}}function ne(e,t,A){return function(...r){const s=this["__v_raw"],i=Ie(s),o=(0,n._N)(i),a="entries"===e||e===Symbol.iterator&&o,c="keys"===e&&o,u=s[e](...r),l=A?j:t?Se:Te;return!t&&F(i,"iterate",c?m:B),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:a?[l(e[0]),l(e[1])]:l(e),done:t}},[Symbol.iterator](){return this}}}}function re(e){return function(...t){return"delete"!==e&&this}}function se(){const e={get(e){return Y(this,e)},get size(){return z(this)},has:X,add:$,set:Z,delete:ee,clear:te,forEach:Ae(!1,!1)},t={get(e){return Y(this,e,!1,!0)},get size(){return z(this)},has:X,add:$,set:Z,delete:ee,clear:te,forEach:Ae(!1,!0)},A={get(e){return Y(this,e,!0)},get size(){return z(this,!0)},has(e){return X.call(this,e,!0)},add:re("add"),set:re("set"),delete:re("delete"),clear:re("clear"),forEach:Ae(!0,!1)},n={get(e){return Y(this,e,!0,!0)},get size(){return z(this,!0)},has(e){return X.call(this,e,!0)},add:re("add"),set:re("set"),delete:re("delete"),clear:re("clear"),forEach:Ae(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach((r=>{e[r]=ne(r,!1,!1),A[r]=ne(r,!0,!1),t[r]=ne(r,!1,!0),n[r]=ne(r,!0,!0)})),[e,A,t,n]}const[ie,oe,ae,ce]=se();function ue(e,t){const A=t?e?ce:ae:e?oe:ie;return(t,r,s)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,n.RI)(A,r)&&r in t?A:t,r,s)}const le={get:ue(!1,!1)},he={get:ue(!1,!0)},de={get:ue(!0,!1)};const fe=new WeakMap,ge=new WeakMap,pe=new WeakMap,Be=new WeakMap;function me(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function we(e){return e["__v_skip"]||!Object.isExtensible(e)?0:me((0,n.W7)(e))}function ye(e){return Fe(e)?e:Qe(e,!1,G,le,fe)}function Ce(e){return Qe(e,!1,W,he,ge)}function ve(e){return Qe(e,!0,q,de,pe)}function Qe(e,t,A,r,s){if(!(0,n.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const i=s.get(e);if(i)return i;const o=we(e);if(0===o)return e;const a=new Proxy(e,2===o?r:A);return s.set(e,a),a}function _e(e){return Fe(e)?_e(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Fe(e){return!(!e||!e["__v_isReadonly"])}function Ue(e){return!(!e||!e["__v_isShallow"])}function Ee(e){return _e(e)||Fe(e)}function Ie(e){const t=e&&e["__v_raw"];return t?Ie(t):e}function be(e){return(0,n.Nj)(e,"__v_skip",!0),e}const Te=e=>(0,n.Kn)(e)?ye(e):e,Se=e=>(0,n.Kn)(e)?ve(e):e;function De(e){C&&p&&(e=Ie(e),U(e.dep||(e.dep=o())))}function xe(e,t){e=Ie(e),e.dep&&I(e.dep)}function He(e){return!(!e||!0!==e.__v_isRef)}function ke(e){return Ne(e,!1)}function Le(e){return Ne(e,!0)}function Ne(e,t){return He(e)?e:new Re(e,t)}class Re{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ie(e),this._value=t?e:Te(e)}get value(){return De(this),this._value}set value(e){e=this.__v_isShallow?e:Ie(e),(0,n.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Te(e),xe(this,e))}}function Me(e){return He(e)?e.value:e}const Oe={get:(e,t,A)=>Me(Reflect.get(e,t,A)),set:(e,t,A,n)=>{const r=e[t];return He(r)&&!He(A)?(r.value=A,!0):Reflect.set(e,t,A,n)}};function Pe(e){return _e(e)?e:new Proxy(e,Oe)}class Ke{constructor(e,t,A,n){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new w(e,(()=>{this._dirty||(this._dirty=!0,xe(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!n,this["__v_isReadonly"]=A}get value(){const e=Ie(this);return De(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Ve(e,t,A=!1){let r,s;const i=(0,n.mf)(e);i?(r=e,s=n.dG):(r=e.get,s=e.set);const o=new Ke(r,s,i||!s,A);return o}},252:function(e,t,A){"use strict";A.d(t,{$d:function(){return i},Cn:function(){return P},FN:function(){return mA},Fl:function(){return HA},HY:function(){return Nt},JJ:function(){return z},Ko:function(){return qe},LL:function(){return Ke},P$:function(){return ae},Q6:function(){return fe},U2:function(){return ue},Uk:function(){return iA},Us:function(){return St},Wm:function(){return AA},Y3:function(){return v},Y8:function(){return se},YP:function(){return ee},_:function(){return tA},aZ:function(){return ge},dD:function(){return O},f3:function(){return $},h:function(){return kA},iD:function(){return Jt},ic:function(){return Te},j4:function(){return Yt},kq:function(){return aA},nK:function(){return de},uE:function(){return oA},up:function(){return Oe},w5:function(){return K},wg:function(){return Vt},wy:function(){return Ne}});var n=A(262),r=A(577);function s(e,t,A,n){let r;try{r=n?e(...n):e()}catch(s){o(s,t,A)}return r}function i(e,t,A,n){if((0,r.mf)(e)){const i=s(e,t,A,n);return i&&(0,r.tI)(i)&&i.catch((e=>{o(e,t,A)})),i}const a=[];for(let r=0;r<e.length;r++)a.push(i(e[r],t,A,n));return a}function o(e,t,A,n=!0){const r=t?t.vnode:null;if(t){let n=t.parent;const r=t.proxy,i=A;while(n){const t=n.ec;if(t)for(let A=0;A<t.length;A++)if(!1===t[A](e,r,i))return;n=n.parent}const o=t.appContext.config.errorHandler;if(o)return void s(o,null,10,[e,r,i])}a(e,A,r,n)}function a(e,t,A,n=!0){console.error(e)}let c=!1,u=!1;const l=[];let h=0;const d=[];let f=null,g=0;const p=[];let B=null,m=0;const w=Promise.resolve();let y=null,C=null;function v(e){const t=y||w;return e?t.then(this?e.bind(this):e):t}function Q(e){let t=h+1,A=l.length;while(t<A){const n=t+A>>>1,r=D(l[n]);r<e?t=n+1:A=n}return t}function _(e){l.length&&l.includes(e,c&&e.allowRecurse?h+1:h)||e===C||(null==e.id?l.push(e):l.splice(Q(e.id),0,e),F())}function F(){c||u||(u=!0,y=w.then(x))}function U(e){const t=l.indexOf(e);t>h&&l.splice(t,1)}function E(e,t,A,n){(0,r.kJ)(e)?A.push(...e):t&&t.includes(e,e.allowRecurse?n+1:n)||A.push(e),F()}function I(e){E(e,f,d,g)}function b(e){E(e,B,p,m)}function T(e,t=null){if(d.length){for(C=t,f=[...new Set(d)],d.length=0,g=0;g<f.length;g++)f[g]();f=null,g=0,C=null,T(e,t)}}function S(e){if(T(),p.length){const e=[...new Set(p)];if(p.length=0,B)return void B.push(...e);for(B=e,B.sort(((e,t)=>D(e)-D(t))),m=0;m<B.length;m++)B[m]();B=null,m=0}}const D=e=>null==e.id?1/0:e.id;function x(e){u=!1,c=!0,T(e),l.sort(((e,t)=>D(e)-D(t)));r.dG;try{for(h=0;h<l.length;h++){const e=l[h];e&&!1!==e.active&&s(e,null,14)}}finally{h=0,l.length=0,S(e),c=!1,y=null,(l.length||d.length||p.length)&&x(e)}}new Set;new Map;function H(e,t,...A){if(e.isUnmounted)return;const n=e.vnode.props||r.kT;let s=A;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:i}=n[e]||r.kT;i&&(s=A.map((e=>e.trim()))),t&&(s=A.map(r.He))}let c;let u=n[c=(0,r.hR)(t)]||n[c=(0,r.hR)((0,r._A)(t))];!u&&o&&(u=n[c=(0,r.hR)((0,r.rs)(t))]),u&&i(u,e,6,s);const l=n[c+"Once"];if(l){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,i(l,e,6,s)}}function k(e,t,A=!1){const n=t.emitsCache,s=n.get(e);if(void 0!==s)return s;const i=e.emits;let o={},a=!1;if(!(0,r.mf)(e)){const n=e=>{const A=k(e,t,!0);A&&(a=!0,(0,r.l7)(o,A))};!A&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return i||a?((0,r.kJ)(i)?i.forEach((e=>o[e]=null)):(0,r.l7)(o,i),n.set(e,o),o):(n.set(e,null),null)}function L(e,t){return!(!e||!(0,r.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,r.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,r.RI)(e,(0,r.rs)(t))||(0,r.RI)(e,t))}let N=null,R=null;function M(e){const t=N;return N=e,R=e&&e.type.__scopeId||null,t}function O(e){R=e}function P(){R=null}function K(e,t=N,A){if(!t)return e;if(e._n)return e;const n=(...A)=>{n._d&&Wt(-1);const r=M(t),s=e(...A);return M(r),n._d&&Wt(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function V(e){const{type:t,vnode:A,proxy:n,withProxy:s,props:i,propsOptions:[a],slots:c,attrs:u,emit:l,render:h,renderCache:d,data:f,setupState:g,ctx:p,inheritAttrs:B}=e;let m,w;const y=M(e);try{if(4&A.shapeFlag){const e=s||n;m=cA(h.call(e,e,d,i,g,f,p)),w=u}else{const e=t;0,m=cA(e.length>1?e(i,{attrs:u,slots:c,emit:l}):e(i,null)),w=t.props?u:G(u)}}catch(v){Pt.length=0,o(v,e,1),m=AA(Mt)}let C=m;if(w&&!1!==B){const e=Object.keys(w),{shapeFlag:t}=C;e.length&&7&t&&(a&&e.some(r.tR)&&(w=q(w,a)),C=sA(C,w))}return A.dirs&&(C=sA(C),C.dirs=C.dirs?C.dirs.concat(A.dirs):A.dirs),A.transition&&(C.transition=A.transition),m=C,M(y),m}const G=e=>{let t;for(const A in e)("class"===A||"style"===A||(0,r.F7)(A))&&((t||(t={}))[A]=e[A]);return t},q=(e,t)=>{const A={};for(const n in e)(0,r.tR)(n)&&n.slice(9)in t||(A[n]=e[n]);return A};function W(e,t,A){const{props:n,children:r,component:s}=e,{props:i,children:o,patchFlag:a}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(A&&a>=0))return!(!r&&!o||o&&o.$stable)||n!==i&&(n?!i||j(n,i,c):!!i);if(1024&a)return!0;if(16&a)return n?j(n,i,c):!!i;if(8&a){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const A=e[t];if(i[A]!==n[A]&&!L(c,A))return!0}}return!1}function j(e,t,A){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(t[s]!==e[s]&&!L(A,s))return!0}return!1}function J({vnode:e,parent:t},A){while(t&&t.subTree===e)(e=t.vnode).el=A,t=t.parent}const Y=e=>e.__isSuspense;function X(e,t){t&&t.pendingBranch?(0,r.kJ)(e)?t.effects.push(...e):t.effects.push(e):b(e)}function z(e,t){if(BA){let A=BA.provides;const n=BA.parent&&BA.parent.provides;n===A&&(A=BA.provides=Object.create(n)),A[e]=t}else 0}function $(e,t,A=!1){const n=BA||N;if(n){const s=null==n.parent?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return A&&(0,r.mf)(t)?t.call(n.proxy):t}else 0}const Z={};function ee(e,t,A){return te(e,t,A)}function te(e,t,{immediate:A,deep:o,flush:a,onTrack:c,onTrigger:u}=r.kT){const l=BA;let h,d,f=!1,g=!1;if((0,n.dq)(e)?(h=()=>e.value,f=(0,n.yT)(e)):(0,n.PG)(e)?(h=()=>e,o=!0):(0,r.kJ)(e)?(g=!0,f=e.some((e=>(0,n.PG)(e)||(0,n.yT)(e))),h=()=>e.map((e=>(0,n.dq)(e)?e.value:(0,n.PG)(e)?re(e):(0,r.mf)(e)?s(e,l,2):void 0))):h=(0,r.mf)(e)?t?()=>s(e,l,2):()=>{if(!l||!l.isUnmounted)return d&&d(),i(e,l,3,[p])}:r.dG,t&&o){const e=h;h=()=>re(e())}let p=e=>{d=y.onStop=()=>{s(e,l,4)}};if(_A)return p=r.dG,t?A&&i(t,l,3,[h(),g?[]:void 0,p]):h(),r.dG;let B=g?[]:Z;const m=()=>{if(y.active)if(t){const e=y.run();(o||f||(g?e.some(((e,t)=>(0,r.aU)(e,B[t]))):(0,r.aU)(e,B)))&&(d&&d(),i(t,l,3,[e,B===Z?void 0:B,p]),B=e)}else y.run()};let w;m.allowRecurse=!!t,w="sync"===a?m:"post"===a?()=>Tt(m,l&&l.suspense):()=>I(m);const y=new n.qq(h,w);return t?A?m():B=y.run():"post"===a?Tt(y.run.bind(y),l&&l.suspense):y.run(),()=>{y.stop(),l&&l.scope&&(0,r.Od)(l.scope.effects,y)}}function Ae(e,t,A){const n=this.proxy,s=(0,r.HD)(e)?e.includes(".")?ne(n,e):()=>n[e]:e.bind(n,n);let i;(0,r.mf)(t)?i=t:(i=t.handler,A=t);const o=BA;wA(this);const a=te(s,i.bind(n),A);return o?wA(o):yA(),a}function ne(e,t){const A=t.split(".");return()=>{let t=e;for(let e=0;e<A.length&&t;e++)t=t[A[e]];return t}}function re(e,t){if(!(0,r.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,n.dq)(e))re(e.value,t);else if((0,r.kJ)(e))for(let A=0;A<e.length;A++)re(e[A],t);else if((0,r.DM)(e)||(0,r._N)(e))e.forEach((e=>{re(e,t)}));else if((0,r.PO)(e))for(const A in e)re(e[A],t);return e}function se(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ie((()=>{e.isMounted=!0})),Se((()=>{e.isUnmounting=!0})),e}const ie=[Function,Array],oe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ie,onEnter:ie,onAfterEnter:ie,onEnterCancelled:ie,onBeforeLeave:ie,onLeave:ie,onAfterLeave:ie,onLeaveCancelled:ie,onBeforeAppear:ie,onAppear:ie,onAfterAppear:ie,onAppearCancelled:ie},setup(e,{slots:t}){const A=mA(),r=se();let s;return()=>{const i=t.default&&fe(t.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){let e=!1;for(const t of i)if(t.type!==Mt){0,o=t,e=!0;break}}const a=(0,n.IU)(e),{mode:c}=a;if(r.isLeaving)return le(o);const u=he(o);if(!u)return le(o);const l=ue(u,a,r,A);de(u,l);const h=A.subTree,d=h&&he(h);let f=!1;const{getTransitionKey:g}=u.type;if(g){const e=g();void 0===s?s=e:e!==s&&(s=e,f=!0)}if(d&&d.type!==Mt&&(!zt(u,d)||f)){const e=ue(d,a,r,A);if(de(d,e),"out-in"===c)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,A.update()},le(o);"in-out"===c&&u.type!==Mt&&(e.delayLeave=(e,t,A)=>{const n=ce(r,d);n[String(d.key)]=d,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=A})}return o}}},ae=oe;function ce(e,t){const{leavingVNodes:A}=e;let n=A.get(t.type);return n||(n=Object.create(null),A.set(t.type,n)),n}function ue(e,t,A,n){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:l,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:g,onLeaveCancelled:p,onBeforeAppear:B,onAppear:m,onAfterAppear:w,onAppearCancelled:y}=t,C=String(e.key),v=ce(A,e),Q=(e,t)=>{e&&i(e,n,9,t)},_=(e,t)=>{const A=t[1];Q(e,t),(0,r.kJ)(e)?e.every((e=>e.length<=1))&&A():e.length<=1&&A()},F={mode:o,persisted:a,beforeEnter(t){let n=c;if(!A.isMounted){if(!s)return;n=B||c}t._leaveCb&&t._leaveCb(!0);const r=v[C];r&&zt(e,r)&&r.el._leaveCb&&r.el._leaveCb(),Q(n,[t])},enter(e){let t=u,n=l,r=h;if(!A.isMounted){if(!s)return;t=m||u,n=w||l,r=y||h}let i=!1;const o=e._enterCb=t=>{i||(i=!0,Q(t?r:n,[e]),F.delayedLeave&&F.delayedLeave(),e._enterCb=void 0)};t?_(t,[e,o]):o()},leave(t,n){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),A.isUnmounting)return n();Q(d,[t]);let s=!1;const i=t._leaveCb=A=>{s||(s=!0,n(),Q(A?p:g,[t]),t._leaveCb=void 0,v[r]===e&&delete v[r])};v[r]=e,f?_(f,[t,i]):i()},clone(e){return ue(e,t,A,n)}};return F}function le(e){if(Be(e))return e=sA(e),e.children=null,e}function he(e){return Be(e)?e.children?e.children[0]:void 0:e}function de(e,t){6&e.shapeFlag&&e.component?de(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fe(e,t=!1,A){let n=[],r=0;for(let s=0;s<e.length;s++){let i=e[s];const o=null==A?i.key:String(A)+String(null!=i.key?i.key:s);i.type===Nt?(128&i.patchFlag&&r++,n=n.concat(fe(i.children,t,o))):(t||i.type!==Mt)&&n.push(null!=o?sA(i,{key:o}):i)}if(r>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function ge(e){return(0,r.mf)(e)?{setup:e,name:e.name}:e}const pe=e=>!!e.type.__asyncLoader;const Be=e=>e.type.__isKeepAlive;RegExp,RegExp;function me(e,t){return(0,r.kJ)(e)?e.some((e=>me(e,t))):(0,r.HD)(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function we(e,t){Ce(e,"a",t)}function ye(e,t){Ce(e,"da",t)}function Ce(e,t,A=BA){const n=e.__wdc||(e.__wdc=()=>{let t=A;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(Fe(t,n,A),A){let e=A.parent;while(e&&e.parent)Be(e.parent.vnode)&&ve(n,t,A,e),e=e.parent}}function ve(e,t,A,n){const s=Fe(t,e,n,!0);De((()=>{(0,r.Od)(n[t],s)}),A)}function Qe(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function _e(e){return 128&e.shapeFlag?e.ssContent:e}function Fe(e,t,A=BA,r=!1){if(A){const s=A[e]||(A[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(A.isUnmounted)return;(0,n.Jd)(),wA(A);const s=i(t,A,e,r);return yA(),(0,n.lk)(),s});return r?s.unshift(o):s.push(o),o}}const Ue=e=>(t,A=BA)=>(!_A||"sp"===e)&&Fe(e,t,A),Ee=Ue("bm"),Ie=Ue("m"),be=Ue("bu"),Te=Ue("u"),Se=Ue("bum"),De=Ue("um"),xe=Ue("sp"),He=Ue("rtg"),ke=Ue("rtc");function Le(e,t=BA){Fe("ec",e,t)}function Ne(e,t){const A=N;if(null===A)return e;const n=SA(A)||A.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[e,A,o,a=r.kT]=t[i];(0,r.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&re(A),s.push({dir:e,instance:n,value:A,oldValue:void 0,arg:o,modifiers:a})}return e}function Re(e,t,A,r){const s=e.dirs,o=t&&t.dirs;for(let a=0;a<s.length;a++){const c=s[a];o&&(c.oldValue=o[a].value);let u=c.dir[r];u&&((0,n.Jd)(),i(u,A,8,[e.el,c,e,t]),(0,n.lk)())}}const Me="components";function Oe(e,t){return Ve(Me,e,!0,t)||e}const Pe=Symbol();function Ke(e){return(0,r.HD)(e)?Ve(Me,e,!1)||e:e||Pe}function Ve(e,t,A=!0,n=!1){const s=N||BA;if(s){const A=s.type;if(e===Me){const e=DA(A);if(e&&(e===t||e===(0,r._A)(t)||e===(0,r.kC)((0,r._A)(t))))return A}const i=Ge(s[e]||A[e],t)||Ge(s.appContext[e],t);return!i&&n?A:i}}function Ge(e,t){return e&&(e[t]||e[(0,r._A)(t)]||e[(0,r.kC)((0,r._A)(t))])}function qe(e,t,A,n){let s;const i=A&&A[n];if((0,r.kJ)(e)||(0,r.HD)(e)){s=new Array(e.length);for(let A=0,n=e.length;A<n;A++)s[A]=t(e[A],A,void 0,i&&i[A])}else if("number"===typeof e){0,s=new Array(e);for(let A=0;A<e;A++)s[A]=t(A+1,A,void 0,i&&i[A])}else if((0,r.Kn)(e))if(e[Symbol.iterator])s=Array.from(e,((e,A)=>t(e,A,void 0,i&&i[A])));else{const A=Object.keys(e);s=new Array(A.length);for(let n=0,r=A.length;n<r;n++){const r=A[n];s[n]=t(e[r],r,n,i&&i[n])}}else s=[];return A&&(A[n]=s),s}const We=e=>e?CA(e)?SA(e)||e.proxy:We(e.parent):null,je=(0,r.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>We(e.parent),$root:e=>We(e.root),$emit:e=>e.emit,$options:e=>et(e),$forceUpdate:e=>e.f||(e.f=()=>_(e.update)),$nextTick:e=>e.n||(e.n=v.bind(e.proxy)),$watch:e=>Ae.bind(e)}),Je={get({_:e},t){const{ctx:A,setupState:s,data:i,props:o,accessCache:a,type:c,appContext:u}=e;let l;if("$"!==t[0]){const n=a[t];if(void 0!==n)switch(n){case 1:return s[t];case 2:return i[t];case 4:return A[t];case 3:return o[t]}else{if(s!==r.kT&&(0,r.RI)(s,t))return a[t]=1,s[t];if(i!==r.kT&&(0,r.RI)(i,t))return a[t]=2,i[t];if((l=e.propsOptions[0])&&(0,r.RI)(l,t))return a[t]=3,o[t];if(A!==r.kT&&(0,r.RI)(A,t))return a[t]=4,A[t];Ye&&(a[t]=0)}}const h=je[t];let d,f;return h?("$attrs"===t&&(0,n.j)(e,"get",t),h(e)):(d=c.__cssModules)&&(d=d[t])?d:A!==r.kT&&(0,r.RI)(A,t)?(a[t]=4,A[t]):(f=u.config.globalProperties,(0,r.RI)(f,t)?f[t]:void 0)},set({_:e},t,A){const{data:n,setupState:s,ctx:i}=e;return s!==r.kT&&(0,r.RI)(s,t)?(s[t]=A,!0):n!==r.kT&&(0,r.RI)(n,t)?(n[t]=A,!0):!(0,r.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(i[t]=A,!0))},has({_:{data:e,setupState:t,accessCache:A,ctx:n,appContext:s,propsOptions:i}},o){let a;return!!A[o]||e!==r.kT&&(0,r.RI)(e,o)||t!==r.kT&&(0,r.RI)(t,o)||(a=i[0])&&(0,r.RI)(a,o)||(0,r.RI)(n,o)||(0,r.RI)(je,o)||(0,r.RI)(s.config.globalProperties,o)},defineProperty(e,t,A){return null!=A.get?e._.accessCache[t]=0:(0,r.RI)(A,"value")&&this.set(e,t,A.value,null),Reflect.defineProperty(e,t,A)}};let Ye=!0;function Xe(e){const t=et(e),A=e.proxy,s=e.ctx;Ye=!1,t.beforeCreate&&$e(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:c,provide:u,inject:l,created:h,beforeMount:d,mounted:f,beforeUpdate:g,updated:p,activated:B,deactivated:m,beforeDestroy:w,beforeUnmount:y,destroyed:C,unmounted:v,render:Q,renderTracked:_,renderTriggered:F,errorCaptured:U,serverPrefetch:E,expose:I,inheritAttrs:b,components:T,directives:S,filters:D}=t,x=null;if(l&&ze(l,s,x,e.appContext.config.unwrapInjectedRef),a)for(const n in a){const e=a[n];(0,r.mf)(e)&&(s[n]=e.bind(A))}if(i){0;const t=i.call(A,A);0,(0,r.Kn)(t)&&(e.data=(0,n.qj)(t))}if(Ye=!0,o)for(const n in o){const e=o[n],t=(0,r.mf)(e)?e.bind(A,A):(0,r.mf)(e.get)?e.get.bind(A,A):r.dG;0;const i=!(0,r.mf)(e)&&(0,r.mf)(e.set)?e.set.bind(A):r.dG,a=HA({get:t,set:i});Object.defineProperty(s,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(c)for(const n in c)Ze(c[n],s,A,n);if(u){const e=(0,r.mf)(u)?u.call(A):u;Reflect.ownKeys(e).forEach((t=>{z(t,e[t])}))}function H(e,t){(0,r.kJ)(t)?t.forEach((t=>e(t.bind(A)))):t&&e(t.bind(A))}if(h&&$e(h,e,"c"),H(Ee,d),H(Ie,f),H(be,g),H(Te,p),H(we,B),H(ye,m),H(Le,U),H(ke,_),H(He,F),H(Se,y),H(De,v),H(xe,E),(0,r.kJ)(I))if(I.length){const t=e.exposed||(e.exposed={});I.forEach((e=>{Object.defineProperty(t,e,{get:()=>A[e],set:t=>A[e]=t})}))}else e.exposed||(e.exposed={});Q&&e.render===r.dG&&(e.render=Q),null!=b&&(e.inheritAttrs=b),T&&(e.components=T),S&&(e.directives=S)}function ze(e,t,A=r.dG,s=!1){(0,r.kJ)(e)&&(e=st(e));for(const i in e){const A=e[i];let o;o=(0,r.Kn)(A)?"default"in A?$(A.from||i,A.default,!0):$(A.from||i):$(A),(0,n.dq)(o)&&s?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[i]=o}}function $e(e,t,A){i((0,r.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,A)}function Ze(e,t,A,n){const s=n.includes(".")?ne(A,n):()=>A[n];if((0,r.HD)(e)){const A=t[e];(0,r.mf)(A)&&ee(s,A)}else if((0,r.mf)(e))ee(s,e.bind(A));else if((0,r.Kn)(e))if((0,r.kJ)(e))e.forEach((e=>Ze(e,t,A,n)));else{const n=(0,r.mf)(e.handler)?e.handler.bind(A):t[e.handler];(0,r.mf)(n)&&ee(s,n,e)}else 0}function et(e){const t=e.type,{mixins:A,extends:n}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:i}}=e.appContext,o=s.get(t);let a;return o?a=o:r.length||A||n?(a={},r.length&&r.forEach((e=>tt(a,e,i,!0))),tt(a,t,i)):a=t,s.set(t,a),a}function tt(e,t,A,n=!1){const{mixins:r,extends:s}=t;s&&tt(e,s,A,!0),r&&r.forEach((t=>tt(e,t,A,!0)));for(const i in t)if(n&&"expose"===i);else{const n=At[i]||A&&A[i];e[i]=n?n(e[i],t[i]):t[i]}return e}const At={data:nt,props:ot,emits:ot,methods:ot,computed:ot,beforeCreate:it,created:it,beforeMount:it,mounted:it,beforeUpdate:it,updated:it,beforeDestroy:it,beforeUnmount:it,destroyed:it,unmounted:it,activated:it,deactivated:it,errorCaptured:it,serverPrefetch:it,components:ot,directives:ot,watch:at,provide:nt,inject:rt};function nt(e,t){return t?e?function(){return(0,r.l7)((0,r.mf)(e)?e.call(this,this):e,(0,r.mf)(t)?t.call(this,this):t)}:t:e}function rt(e,t){return ot(st(e),st(t))}function st(e){if((0,r.kJ)(e)){const t={};for(let A=0;A<e.length;A++)t[e[A]]=e[A];return t}return e}function it(e,t){return e?[...new Set([].concat(e,t))]:t}function ot(e,t){return e?(0,r.l7)((0,r.l7)(Object.create(null),e),t):t}function at(e,t){if(!e)return t;if(!t)return e;const A=(0,r.l7)(Object.create(null),e);for(const n in t)A[n]=it(e[n],t[n]);return A}function ct(e,t,A,s=!1){const i={},o={};(0,r.Nj)(o,$t,1),e.propsDefaults=Object.create(null),lt(e,t,i,o);for(const n in e.propsOptions[0])n in i||(i[n]=void 0);A?e.props=s?i:(0,n.Um)(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function ut(e,t,A,s){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,c=(0,n.IU)(i),[u]=e.propsOptions;let l=!1;if(!(s||a>0)||16&a){let n;lt(e,t,i,o)&&(l=!0);for(const s in c)t&&((0,r.RI)(t,s)||(n=(0,r.rs)(s))!==s&&(0,r.RI)(t,n))||(u?!A||void 0===A[s]&&void 0===A[n]||(i[s]=ht(u,c,s,void 0,e,!0)):delete i[s]);if(o!==c)for(const e in o)t&&(0,r.RI)(t,e)||(delete o[e],l=!0)}else if(8&a){const A=e.vnode.dynamicProps;for(let n=0;n<A.length;n++){let s=A[n];if(L(e.emitsOptions,s))continue;const a=t[s];if(u)if((0,r.RI)(o,s))a!==o[s]&&(o[s]=a,l=!0);else{const t=(0,r._A)(s);i[t]=ht(u,c,t,a,e,!1)}else a!==o[s]&&(o[s]=a,l=!0)}}l&&(0,n.X$)(e,"set","$attrs")}function lt(e,t,A,s){const[i,o]=e.propsOptions;let a,c=!1;if(t)for(let n in t){if((0,r.Gg)(n))continue;const u=t[n];let l;i&&(0,r.RI)(i,l=(0,r._A)(n))?o&&o.includes(l)?(a||(a={}))[l]=u:A[l]=u:L(e.emitsOptions,n)||n in s&&u===s[n]||(s[n]=u,c=!0)}if(o){const t=(0,n.IU)(A),s=a||r.kT;for(let n=0;n<o.length;n++){const a=o[n];A[a]=ht(i,t,a,s[a],e,!(0,r.RI)(s,a))}}return c}function ht(e,t,A,n,s,i){const o=e[A];if(null!=o){const e=(0,r.RI)(o,"default");if(e&&void 0===n){const e=o.default;if(o.type!==Function&&(0,r.mf)(e)){const{propsDefaults:r}=s;A in r?n=r[A]:(wA(s),n=r[A]=e.call(null,t),yA())}else n=e}o[0]&&(i&&!e?n=!1:!o[1]||""!==n&&n!==(0,r.rs)(A)||(n=!0))}return n}function dt(e,t,A=!1){const n=t.propsCache,s=n.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!(0,r.mf)(e)){const n=e=>{c=!0;const[A,n]=dt(e,t,!0);(0,r.l7)(o,A),n&&a.push(...n)};!A&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}if(!i&&!c)return n.set(e,r.Z6),r.Z6;if((0,r.kJ)(i))for(let l=0;l<i.length;l++){0;const e=(0,r._A)(i[l]);ft(e)&&(o[e]=r.kT)}else if(i){0;for(const e in i){const t=(0,r._A)(e);if(ft(t)){const A=i[e],n=o[t]=(0,r.kJ)(A)||(0,r.mf)(A)?{type:A}:A;if(n){const e=Bt(Boolean,n.type),A=Bt(String,n.type);n[0]=e>-1,n[1]=A<0||e<A,(e>-1||(0,r.RI)(n,"default"))&&a.push(t)}}}}const u=[o,a];return n.set(e,u),u}function ft(e){return"$"!==e[0]}function gt(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function pt(e,t){return gt(e)===gt(t)}function Bt(e,t){return(0,r.kJ)(t)?t.findIndex((t=>pt(t,e))):(0,r.mf)(t)&&pt(t,e)?0:-1}const mt=e=>"_"===e[0]||"$stable"===e,wt=e=>(0,r.kJ)(e)?e.map(cA):[cA(e)],yt=(e,t,A)=>{if(t._n)return t;const n=K(((...e)=>wt(t(...e))),A);return n._c=!1,n},Ct=(e,t,A)=>{const n=e._ctx;for(const s in e){if(mt(s))continue;const A=e[s];if((0,r.mf)(A))t[s]=yt(s,A,n);else if(null!=A){0;const e=wt(A);t[s]=()=>e}}},vt=(e,t)=>{const A=wt(t);e.slots.default=()=>A},Qt=(e,t)=>{if(32&e.vnode.shapeFlag){const A=t._;A?(e.slots=(0,n.IU)(t),(0,r.Nj)(t,"_",A)):Ct(t,e.slots={})}else e.slots={},t&&vt(e,t);(0,r.Nj)(e.slots,$t,1)},_t=(e,t,A)=>{const{vnode:n,slots:s}=e;let i=!0,o=r.kT;if(32&n.shapeFlag){const e=t._;e?A&&1===e?i=!1:((0,r.l7)(s,t),A||1!==e||delete s._):(i=!t.$stable,Ct(t,s)),o=t}else t&&(vt(e,t),o={default:1});if(i)for(const r in s)mt(r)||r in o||delete s[r]};function Ft(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ut=0;function Et(e,t){return function(A,n=null){(0,r.mf)(A)||(A=Object.assign({},A)),null==n||(0,r.Kn)(n)||(n=null);const s=Ft(),i=new Set;let o=!1;const a=s.app={_uid:Ut++,_component:A,_props:n,_container:null,_context:s,_instance:null,version:LA,get config(){return s.config},set config(e){0},use(e,...t){return i.has(e)||(e&&(0,r.mf)(e.install)?(i.add(e),e.install(a,...t)):(0,r.mf)(e)&&(i.add(e),e(a,...t))),a},mixin(e){return s.mixins.includes(e)||s.mixins.push(e),a},component(e,t){return t?(s.components[e]=t,a):s.components[e]},directive(e,t){return t?(s.directives[e]=t,a):s.directives[e]},mount(r,i,c){if(!o){0;const u=AA(A,n);return u.appContext=s,i&&t?t(u,r):e(u,r,c),o=!0,a._container=r,r.__vue_app__=a,SA(u.component)||u.component.proxy}},unmount(){o&&(e(null,a._container),delete a._container.__vue_app__)},provide(e,t){return s.provides[e]=t,a}};return a}}function It(e,t,A,i,o=!1){if((0,r.kJ)(e))return void e.forEach(((e,n)=>It(e,t&&((0,r.kJ)(t)?t[n]:t),A,i,o)));if(pe(i)&&!o)return;const a=4&i.shapeFlag?SA(i.component)||i.component.proxy:i.el,c=o?null:a,{i:u,r:l}=e;const h=t&&t.r,d=u.refs===r.kT?u.refs={}:u.refs,f=u.setupState;if(null!=h&&h!==l&&((0,r.HD)(h)?(d[h]=null,(0,r.RI)(f,h)&&(f[h]=null)):(0,n.dq)(h)&&(h.value=null)),(0,r.mf)(l))s(l,u,12,[c,d]);else{const t=(0,r.HD)(l),s=(0,n.dq)(l);if(t||s){const s=()=>{if(e.f){const A=t?d[l]:l.value;o?(0,r.kJ)(A)&&(0,r.Od)(A,a):(0,r.kJ)(A)?A.includes(a)||A.push(a):t?(d[l]=[a],(0,r.RI)(f,l)&&(f[l]=d[l])):(l.value=[a],e.k&&(d[e.k]=l.value))}else t?(d[l]=c,(0,r.RI)(f,l)&&(f[l]=c)):(0,n.dq)(l)&&(l.value=c,e.k&&(d[e.k]=c))};c?(s.id=-1,Tt(s,A)):s()}else 0}}function bt(){}const Tt=X;function St(e){return Dt(e)}function Dt(e,t){bt();const A=(0,r.E9)();A.__VUE__=!0;const{insert:s,remove:i,patchProp:o,createElement:a,createText:c,createComment:u,setText:l,setElementText:h,parentNode:d,nextSibling:f,setScopeId:g=r.dG,cloneNode:p,insertStaticContent:B}=e,m=(e,t,A,n=null,r=null,s=null,i=!1,o=null,a=!!t.dynamicChildren)=>{if(e===t)return;e&&!zt(e,t)&&(n=Z(e),j(e,r,s,!0),e=null),-2===t.patchFlag&&(a=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:l}=t;switch(c){case Rt:w(e,t,A,n);break;case Mt:y(e,t,A,n);break;case Ot:null==e&&C(t,A,n,i);break;case Nt:k(e,t,A,n,r,s,i,o,a);break;default:1&l?F(e,t,A,n,r,s,i,o,a):6&l?L(e,t,A,n,r,s,i,o,a):(64&l||128&l)&&c.process(e,t,A,n,r,s,i,o,a,te)}null!=u&&r&&It(u,e&&e.ref,s,t||e,!t)},w=(e,t,A,n)=>{if(null==e)s(t.el=c(t.children),A,n);else{const A=t.el=e.el;t.children!==e.children&&l(A,t.children)}},y=(e,t,A,n)=>{null==e?s(t.el=u(t.children||""),A,n):t.el=e.el},C=(e,t,A,n)=>{[e.el,e.anchor]=B(e.children,t,A,n,e.el,e.anchor)},v=({el:e,anchor:t},A,n)=>{let r;while(e&&e!==t)r=f(e),s(e,A,n),e=r;s(t,A,n)},Q=({el:e,anchor:t})=>{let A;while(e&&e!==t)A=f(e),i(e),e=A;i(t)},F=(e,t,A,n,r,s,i,o,a)=>{i=i||"svg"===t.type,null==e?E(t,A,n,r,s,i,o,a):D(e,t,r,s,i,o,a)},E=(e,t,A,n,i,c,u,l)=>{let d,f;const{type:g,props:B,shapeFlag:m,transition:w,patchFlag:y,dirs:C}=e;if(e.el&&void 0!==p&&-1===y)d=e.el=p(e.el);else{if(d=e.el=a(e.type,c,B&&B.is,B),8&m?h(d,e.children):16&m&&b(e.children,d,null,n,i,c&&"foreignObject"!==g,u,l),C&&Re(e,null,n,"created"),B){for(const t in B)"value"===t||(0,r.Gg)(t)||o(d,t,null,B[t],c,e.children,n,i,$);"value"in B&&o(d,"value",null,B.value),(f=B.onVnodeBeforeMount)&&dA(f,n,e)}I(d,e,e.scopeId,u,n)}C&&Re(e,null,n,"beforeMount");const v=(!i||i&&!i.pendingBranch)&&w&&!w.persisted;v&&w.beforeEnter(d),s(d,t,A),((f=B&&B.onVnodeMounted)||v||C)&&Tt((()=>{f&&dA(f,n,e),v&&w.enter(d),C&&Re(e,null,n,"mounted")}),i)},I=(e,t,A,n,r)=>{if(A&&g(e,A),n)for(let s=0;s<n.length;s++)g(e,n[s]);if(r){let A=r.subTree;if(t===A){const t=r.vnode;I(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},b=(e,t,A,n,r,s,i,o,a=0)=>{for(let c=a;c<e.length;c++){const a=e[c]=o?uA(e[c]):cA(e[c]);m(null,a,t,A,n,r,s,i,o)}},D=(e,t,A,n,s,i,a)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:l,dirs:d}=t;u|=16&e.patchFlag;const f=e.props||r.kT,g=t.props||r.kT;let p;A&&xt(A,!1),(p=g.onVnodeBeforeUpdate)&&dA(p,A,t,e),d&&Re(t,e,A,"beforeUpdate"),A&&xt(A,!0);const B=s&&"foreignObject"!==t.type;if(l?x(e.dynamicChildren,l,c,A,n,B,i):a||P(e,t,c,null,A,n,B,i,!1),u>0){if(16&u)H(c,t,f,g,A,n,s);else if(2&u&&f.class!==g.class&&o(c,"class",null,g.class,s),4&u&&o(c,"style",f.style,g.style,s),8&u){const r=t.dynamicProps;for(let t=0;t<r.length;t++){const i=r[t],a=f[i],u=g[i];u===a&&"value"!==i||o(c,i,a,u,s,e.children,A,n,$)}}1&u&&e.children!==t.children&&h(c,t.children)}else a||null!=l||H(c,t,f,g,A,n,s);((p=g.onVnodeUpdated)||d)&&Tt((()=>{p&&dA(p,A,t,e),d&&Re(t,e,A,"updated")}),n)},x=(e,t,A,n,r,s,i)=>{for(let o=0;o<t.length;o++){const a=e[o],c=t[o],u=a.el&&(a.type===Nt||!zt(a,c)||70&a.shapeFlag)?d(a.el):A;m(a,c,u,null,n,r,s,i,!0)}},H=(e,t,A,n,s,i,a)=>{if(A!==n){for(const c in n){if((0,r.Gg)(c))continue;const u=n[c],l=A[c];u!==l&&"value"!==c&&o(e,c,l,u,a,t.children,s,i,$)}if(A!==r.kT)for(const c in A)(0,r.Gg)(c)||c in n||o(e,c,A[c],null,a,t.children,s,i,$);"value"in n&&o(e,"value",A.value,n.value)}},k=(e,t,A,n,r,i,o,a,u)=>{const l=t.el=e?e.el:c(""),h=t.anchor=e?e.anchor:c("");let{patchFlag:d,dynamicChildren:f,slotScopeIds:g}=t;g&&(a=a?a.concat(g):g),null==e?(s(l,A,n),s(h,A,n),b(t.children,A,h,r,i,o,a,u)):d>0&&64&d&&f&&e.dynamicChildren?(x(e.dynamicChildren,f,A,r,i,o,a),(null!=t.key||r&&t===r.subTree)&&Ht(e,t,!0)):P(e,t,A,h,r,i,o,a,u)},L=(e,t,A,n,r,s,i,o,a)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?r.ctx.activate(t,A,n,i,a):N(t,A,n,r,s,i,a):R(e,t,a)},N=(e,t,A,n,r,s,i)=>{const o=e.component=pA(e,n,r);if(Be(e)&&(o.ctx.renderer=te),FA(o),o.asyncDep){if(r&&r.registerDep(o,M),!e.el){const e=o.subTree=AA(Mt);y(null,e,t,A)}}else M(o,e,t,A,r,s,i)},R=(e,t,A)=>{const n=t.component=e.component;if(W(e,t,A)){if(n.asyncDep&&!n.asyncResolved)return void O(n,t,A);n.next=t,U(n.update),n.update()}else t.el=e.el,n.vnode=t},M=(e,t,A,s,i,o,a)=>{const c=()=>{if(e.isMounted){let t,{next:A,bu:n,u:s,parent:c,vnode:u}=e,l=A;0,xt(e,!1),A?(A.el=u.el,O(e,A,a)):A=u,n&&(0,r.ir)(n),(t=A.props&&A.props.onVnodeBeforeUpdate)&&dA(t,c,A,u),xt(e,!0);const h=V(e);0;const f=e.subTree;e.subTree=h,m(f,h,d(f.el),Z(f),e,i,o),A.el=h.el,null===l&&J(e,h.el),s&&Tt(s,i),(t=A.props&&A.props.onVnodeUpdated)&&Tt((()=>dA(t,c,A,u)),i)}else{let n;const{el:a,props:c}=t,{bm:u,m:l,parent:h}=e,d=pe(t);if(xt(e,!1),u&&(0,r.ir)(u),!d&&(n=c&&c.onVnodeBeforeMount)&&dA(n,h,t),xt(e,!0),a&&ne){const A=()=>{e.subTree=V(e),ne(a,e.subTree,e,i,null)};d?t.type.__asyncLoader().then((()=>!e.isUnmounted&&A())):A()}else{0;const n=e.subTree=V(e);0,m(null,n,A,s,e,i,o),t.el=n.el}if(l&&Tt(l,i),!d&&(n=c&&c.onVnodeMounted)){const e=t;Tt((()=>dA(n,h,e)),i)}(256&t.shapeFlag||h&&pe(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&Tt(e.a,i),e.isMounted=!0,t=A=s=null}},u=e.effect=new n.qq(c,(()=>_(l)),e.scope),l=e.update=()=>u.run();l.id=e.uid,xt(e,!0),l()},O=(e,t,A)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,ut(e,t.props,r,A),_t(e,t.children,A),(0,n.Jd)(),T(void 0,e.update),(0,n.lk)()},P=(e,t,A,n,r,s,i,o,a=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,l=t.children,{patchFlag:d,shapeFlag:f}=t;if(d>0){if(128&d)return void G(c,l,A,n,r,s,i,o,a);if(256&d)return void K(c,l,A,n,r,s,i,o,a)}8&f?(16&u&&$(c,r,s),l!==c&&h(A,l)):16&u?16&f?G(c,l,A,n,r,s,i,o,a):$(c,r,s,!0):(8&u&&h(A,""),16&f&&b(l,A,n,r,s,i,o,a))},K=(e,t,A,n,s,i,o,a,c)=>{e=e||r.Z6,t=t||r.Z6;const u=e.length,l=t.length,h=Math.min(u,l);let d;for(d=0;d<h;d++){const n=t[d]=c?uA(t[d]):cA(t[d]);m(e[d],n,A,null,s,i,o,a,c)}u>l?$(e,s,i,!0,!1,h):b(t,A,n,s,i,o,a,c,h)},G=(e,t,A,n,s,i,o,a,c)=>{let u=0;const l=t.length;let h=e.length-1,d=l-1;while(u<=h&&u<=d){const n=e[u],r=t[u]=c?uA(t[u]):cA(t[u]);if(!zt(n,r))break;m(n,r,A,null,s,i,o,a,c),u++}while(u<=h&&u<=d){const n=e[h],r=t[d]=c?uA(t[d]):cA(t[d]);if(!zt(n,r))break;m(n,r,A,null,s,i,o,a,c),h--,d--}if(u>h){if(u<=d){const e=d+1,r=e<l?t[e].el:n;while(u<=d)m(null,t[u]=c?uA(t[u]):cA(t[u]),A,r,s,i,o,a,c),u++}}else if(u>d)while(u<=h)j(e[u],s,i,!0),u++;else{const f=u,g=u,p=new Map;for(u=g;u<=d;u++){const e=t[u]=c?uA(t[u]):cA(t[u]);null!=e.key&&p.set(e.key,u)}let B,w=0;const y=d-g+1;let C=!1,v=0;const Q=new Array(y);for(u=0;u<y;u++)Q[u]=0;for(u=f;u<=h;u++){const n=e[u];if(w>=y){j(n,s,i,!0);continue}let r;if(null!=n.key)r=p.get(n.key);else for(B=g;B<=d;B++)if(0===Q[B-g]&&zt(n,t[B])){r=B;break}void 0===r?j(n,s,i,!0):(Q[r-g]=u+1,r>=v?v=r:C=!0,m(n,t[r],A,null,s,i,o,a,c),w++)}const _=C?kt(Q):r.Z6;for(B=_.length-1,u=y-1;u>=0;u--){const e=g+u,r=t[e],h=e+1<l?t[e+1].el:n;0===Q[u]?m(null,r,A,h,s,i,o,a,c):C&&(B<0||u!==_[B]?q(r,A,h,2):B--)}}},q=(e,t,A,n,r=null)=>{const{el:i,type:o,transition:a,children:c,shapeFlag:u}=e;if(6&u)return void q(e.component.subTree,t,A,n);if(128&u)return void e.suspense.move(t,A,n);if(64&u)return void o.move(e,t,A,te);if(o===Nt){s(i,t,A);for(let e=0;e<c.length;e++)q(c[e],t,A,n);return void s(e.anchor,t,A)}if(o===Ot)return void v(e,t,A);const l=2!==n&&1&u&&a;if(l)if(0===n)a.beforeEnter(i),s(i,t,A),Tt((()=>a.enter(i)),r);else{const{leave:e,delayLeave:n,afterLeave:r}=a,o=()=>s(i,t,A),c=()=>{e(i,(()=>{o(),r&&r()}))};n?n(i,o,c):c()}else s(i,t,A)},j=(e,t,A,n=!1,r=!1)=>{const{type:s,props:i,ref:o,children:a,dynamicChildren:c,shapeFlag:u,patchFlag:l,dirs:h}=e;if(null!=o&&It(o,null,A,e,!0),256&u)return void t.ctx.deactivate(e);const d=1&u&&h,f=!pe(e);let g;if(f&&(g=i&&i.onVnodeBeforeUnmount)&&dA(g,t,e),6&u)z(e.component,A,n);else{if(128&u)return void e.suspense.unmount(A,n);d&&Re(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,A,r,te,n):c&&(s!==Nt||l>0&&64&l)?$(c,t,A,!1,!0):(s===Nt&&384&l||!r&&16&u)&&$(a,t,A),n&&Y(e)}(f&&(g=i&&i.onVnodeUnmounted)||d)&&Tt((()=>{g&&dA(g,t,e),d&&Re(e,null,t,"unmounted")}),A)},Y=e=>{const{type:t,el:A,anchor:n,transition:r}=e;if(t===Nt)return void X(A,n);if(t===Ot)return void Q(e);const s=()=>{i(A),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:n}=r,i=()=>t(A,s);n?n(e.el,s,i):i()}else s()},X=(e,t)=>{let A;while(e!==t)A=f(e),i(e),e=A;i(t)},z=(e,t,A)=>{const{bum:n,scope:s,update:i,subTree:o,um:a}=e;n&&(0,r.ir)(n),s.stop(),i&&(i.active=!1,j(o,e,t,A)),a&&Tt(a,t),Tt((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},$=(e,t,A,n=!1,r=!1,s=0)=>{for(let i=s;i<e.length;i++)j(e[i],t,A,n,r)},Z=e=>6&e.shapeFlag?Z(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),ee=(e,t,A)=>{null==e?t._vnode&&j(t._vnode,null,null,!0):m(t._vnode||null,e,t,null,null,null,A),S(),t._vnode=e},te={p:m,um:j,m:q,r:Y,mt:N,mc:b,pc:P,pbc:x,n:Z,o:e};let Ae,ne;return t&&([Ae,ne]=t(te)),{render:ee,hydrate:Ae,createApp:Et(ee,Ae)}}function xt({effect:e,update:t},A){e.allowRecurse=t.allowRecurse=A}function Ht(e,t,A=!1){const n=e.children,s=t.children;if((0,r.kJ)(n)&&(0,r.kJ)(s))for(let r=0;r<n.length;r++){const e=n[r];let t=s[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[r]=uA(s[r]),t.el=e.el),A||Ht(e,t))}}function kt(e){const t=e.slice(),A=[0];let n,r,s,i,o;const a=e.length;for(n=0;n<a;n++){const a=e[n];if(0!==a){if(r=A[A.length-1],e[r]<a){t[n]=r,A.push(n);continue}s=0,i=A.length-1;while(s<i)o=s+i>>1,e[A[o]]<a?s=o+1:i=o;a<e[A[s]]&&(s>0&&(t[n]=A[s-1]),A[s]=n)}}s=A.length,i=A[s-1];while(s-- >0)A[s]=i,i=t[i];return A}const Lt=e=>e.__isTeleport;const Nt=Symbol(void 0),Rt=Symbol(void 0),Mt=Symbol(void 0),Ot=Symbol(void 0),Pt=[];let Kt=null;function Vt(e=!1){Pt.push(Kt=e?null:[])}function Gt(){Pt.pop(),Kt=Pt[Pt.length-1]||null}let qt=1;function Wt(e){qt+=e}function jt(e){return e.dynamicChildren=qt>0?Kt||r.Z6:null,Gt(),qt>0&&Kt&&Kt.push(e),e}function Jt(e,t,A,n,r,s){return jt(tA(e,t,A,n,r,s,!0))}function Yt(e,t,A,n,r){return jt(AA(e,t,A,n,r,!0))}function Xt(e){return!!e&&!0===e.__v_isVNode}function zt(e,t){return e.type===t.type&&e.key===t.key}const $t="__vInternal",Zt=({key:e})=>null!=e?e:null,eA=({ref:e,ref_key:t,ref_for:A})=>null!=e?(0,r.HD)(e)||(0,n.dq)(e)||(0,r.mf)(e)?{i:N,r:e,k:t,f:!!A}:e:null;function tA(e,t=null,A=null,n=0,s=null,i=(e===Nt?0:1),o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Zt(t),ref:t&&eA(t),scopeId:R,slotScopeIds:null,children:A,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(lA(c,A),128&i&&e.normalize(c)):A&&(c.shapeFlag|=(0,r.HD)(A)?8:16),qt>0&&!o&&Kt&&(c.patchFlag>0||6&i)&&32!==c.patchFlag&&Kt.push(c),c}const AA=nA;function nA(e,t=null,A=null,s=0,i=null,o=!1){if(e&&e!==Pe||(e=Mt),Xt(e)){const n=sA(e,t,!0);return A&&lA(n,A),qt>0&&!o&&Kt&&(6&n.shapeFlag?Kt[Kt.indexOf(e)]=n:Kt.push(n)),n.patchFlag|=-2,n}if(xA(e)&&(e=e.__vccOpts),t){t=rA(t);let{class:e,style:A}=t;e&&!(0,r.HD)(e)&&(t.class=(0,r.C_)(e)),(0,r.Kn)(A)&&((0,n.X3)(A)&&!(0,r.kJ)(A)&&(A=(0,r.l7)({},A)),t.style=(0,r.j5)(A))}const a=(0,r.HD)(e)?1:Y(e)?128:Lt(e)?64:(0,r.Kn)(e)?4:(0,r.mf)(e)?2:0;return tA(e,t,A,s,i,a,o,!0)}function rA(e){return e?(0,n.X3)(e)||$t in e?(0,r.l7)({},e):e:null}function sA(e,t,A=!1){const{props:n,ref:s,patchFlag:i,children:o}=e,a=t?hA(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Zt(a),ref:t&&t.ref?A&&s?(0,r.kJ)(s)?s.concat(eA(t)):[s,eA(t)]:eA(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Nt?-1===i?16:16|i:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&sA(e.ssContent),ssFallback:e.ssFallback&&sA(e.ssFallback),el:e.el,anchor:e.anchor};return c}function iA(e=" ",t=0){return AA(Rt,null,e,t)}function oA(e,t){const A=AA(Ot,null,e);return A.staticCount=t,A}function aA(e="",t=!1){return t?(Vt(),Yt(Mt,null,e)):AA(Mt,null,e)}function cA(e){return null==e||"boolean"===typeof e?AA(Mt):(0,r.kJ)(e)?AA(Nt,null,e.slice()):"object"===typeof e?uA(e):AA(Rt,null,String(e))}function uA(e){return null===e.el||e.memo?e:sA(e)}function lA(e,t){let A=0;const{shapeFlag:n}=e;if(null==t)t=null;else if((0,r.kJ)(t))A=16;else if("object"===typeof t){if(65&n){const A=t.default;return void(A&&(A._c&&(A._d=!1),lA(e,A()),A._c&&(A._d=!0)))}{A=32;const n=t._;n||$t in t?3===n&&N&&(1===N.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=N}}else(0,r.mf)(t)?(t={default:t,_ctx:N},A=32):(t=String(t),64&n?(A=16,t=[iA(t)]):A=8);e.children=t,e.shapeFlag|=A}function hA(...e){const t={};for(let A=0;A<e.length;A++){const n=e[A];for(const e in n)if("class"===e)t.class!==n.class&&(t.class=(0,r.C_)([t.class,n.class]));else if("style"===e)t.style=(0,r.j5)([t.style,n.style]);else if((0,r.F7)(e)){const A=t[e],s=n[e];!s||A===s||(0,r.kJ)(A)&&A.includes(s)||(t[e]=A?[].concat(A,s):s)}else""!==e&&(t[e]=n[e])}return t}function dA(e,t,A,n=null){i(e,t,7,[A,n])}const fA=Ft();let gA=0;function pA(e,t,A){const s=e.type,i=(t?t.appContext:e.appContext)||fA,o={uid:gA++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new n.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dt(s,i),emitsOptions:k(s,i),emit:null,emitted:null,propsDefaults:r.kT,inheritAttrs:s.inheritAttrs,ctx:r.kT,data:r.kT,props:r.kT,attrs:r.kT,slots:r.kT,refs:r.kT,setupState:r.kT,setupContext:null,suspense:A,suspenseId:A?A.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=H.bind(null,o),e.ce&&e.ce(o),o}let BA=null;const mA=()=>BA||N,wA=e=>{BA=e,e.scope.on()},yA=()=>{BA&&BA.scope.off(),BA=null};function CA(e){return 4&e.vnode.shapeFlag}let vA,QA,_A=!1;function FA(e,t=!1){_A=t;const{props:A,children:n}=e.vnode,r=CA(e);ct(e,A,r,t),Qt(e,n);const s=r?UA(e,t):void 0;return _A=!1,s}function UA(e,t){const A=e.type;e.accessCache=Object.create(null),e.proxy=(0,n.Xl)(new Proxy(e.ctx,Je));const{setup:i}=A;if(i){const A=e.setupContext=i.length>1?TA(e):null;wA(e),(0,n.Jd)();const a=s(i,e,0,[e.props,A]);if((0,n.lk)(),yA(),(0,r.tI)(a)){if(a.then(yA,yA),t)return a.then((A=>{EA(e,A,t)})).catch((t=>{o(t,e,0)}));e.asyncDep=a}else EA(e,a,t)}else IA(e,t)}function EA(e,t,A){(0,r.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,r.Kn)(t)&&(e.setupState=(0,n.WL)(t)),IA(e,A)}function IA(e,t,A){const s=e.type;if(!e.render){if(!t&&vA&&!s.render){const t=s.template;if(t){0;const{isCustomElement:A,compilerOptions:n}=e.appContext.config,{delimiters:i,compilerOptions:o}=s,a=(0,r.l7)((0,r.l7)({isCustomElement:A,delimiters:i},n),o);s.render=vA(t,a)}}e.render=s.render||r.dG,QA&&QA(e)}wA(e),(0,n.Jd)(),Xe(e),(0,n.lk)(),yA()}function bA(e){return new Proxy(e.attrs,{get(t,A){return(0,n.j)(e,"get","$attrs"),t[A]}})}function TA(e){const t=t=>{e.exposed=t||{}};let A;return{get attrs(){return A||(A=bA(e))},slots:e.slots,emit:e.emit,expose:t}}function SA(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,n.WL)((0,n.Xl)(e.exposed)),{get(t,A){return A in t?t[A]:A in je?je[A](e):void 0}}))}function DA(e){return(0,r.mf)(e)&&e.displayName||e.name}function xA(e){return(0,r.mf)(e)&&"__vccOpts"in e}const HA=(e,t)=>(0,n.Fl)(e,t,_A);function kA(e,t,A){const n=arguments.length;return 2===n?(0,r.Kn)(t)&&!(0,r.kJ)(t)?Xt(t)?AA(e,null,[t]):AA(e,t):AA(e,null,t):(n>3?A=Array.prototype.slice.call(arguments,2):3===n&&Xt(A)&&(A=[A]),AA(e,t,A))}Symbol("");const LA="3.2.36"},963:function(e,t,A){"use strict";A.d(t,{bM:function(){return ne},nr:function(){return Ae},ri:function(){return ce}});var n=A(577),r=A(252);A(262);const s="http://www.w3.org/2000/svg",i="undefined"!==typeof document?document:null,o=i&&i.createElement("template"),a={insert:(e,t,A)=>{t.insertBefore(e,A||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,A,n)=>{const r=t?i.createElementNS(s,e):i.createElement(e,A?{is:A}:void 0);return"select"===e&&n&&null!=n.multiple&&r.setAttribute("multiple",n.multiple),r},createText:e=>i.createTextNode(e),createComment:e=>i.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>i.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,A,n,r,s){const i=A?A.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling)){while(1)if(t.insertBefore(r.cloneNode(!0),A),r===s||!(r=r.nextSibling))break}else{o.innerHTML=n?`<svg>${e}</svg>`:e;const r=o.content;if(n){const e=r.firstChild;while(e.firstChild)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,A)}return[i?i.nextSibling:t.firstChild,A?A.previousSibling:t.lastChild]}};function c(e,t,A){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),null==t?e.removeAttribute("class"):A?e.setAttribute("class",t):e.className=t}function u(e,t,A){const r=e.style,s=(0,n.HD)(A);if(A&&!s){for(const e in A)h(r,e,A[e]);if(t&&!(0,n.HD)(t))for(const e in t)null==A[e]&&h(r,e,"")}else{const n=r.display;s?t!==A&&(r.cssText=A):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=n)}}const l=/\s*!important$/;function h(e,t,A){if((0,n.kJ)(A))A.forEach((A=>h(e,t,A)));else if(null==A&&(A=""),t.startsWith("--"))e.setProperty(t,A);else{const r=g(e,t);l.test(A)?e.setProperty((0,n.rs)(r),A.replace(l,""),"important"):e[r]=A}}const d=["Webkit","Moz","ms"],f={};function g(e,t){const A=f[t];if(A)return A;let r=(0,n._A)(t);if("filter"!==r&&r in e)return f[t]=r;r=(0,n.kC)(r);for(let n=0;n<d.length;n++){const A=d[n]+r;if(A in e)return f[t]=A}return t}const p="http://www.w3.org/1999/xlink";function B(e,t,A,r,s){if(r&&t.startsWith("xlink:"))null==A?e.removeAttributeNS(p,t.slice(6,t.length)):e.setAttributeNS(p,t,A);else{const r=(0,n.Pq)(t);null==A||r&&!(0,n.yA)(A)?e.removeAttribute(t):e.setAttribute(t,r?"":A)}}function m(e,t,A,r,s,i,o){if("innerHTML"===t||"textContent"===t)return r&&o(r,s,i),void(e[t]=null==A?"":A);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=A;const n=null==A?"":A;return e.value===n&&"OPTION"!==e.tagName||(e.value=n),void(null==A&&e.removeAttribute(t))}let a=!1;if(""===A||null==A){const r=typeof e[t];"boolean"===r?A=(0,n.yA)(A):null==A&&"string"===r?(A="",a=!0):"number"===r&&(A=0,a=!0)}try{e[t]=A}catch(c){0}a&&e.removeAttribute(t)}const[w,y]=(()=>{let e=Date.now,t=!1;if("undefined"!==typeof window){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const A=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(A&&Number(A[1])<=53)}return[e,t]})();let C=0;const v=Promise.resolve(),Q=()=>{C=0},_=()=>C||(v.then(Q),C=w());function F(e,t,A,n){e.addEventListener(t,A,n)}function U(e,t,A,n){e.removeEventListener(t,A,n)}function E(e,t,A,n,r=null){const s=e._vei||(e._vei={}),i=s[t];if(n&&i)i.value=n;else{const[A,o]=b(t);if(n){const i=s[t]=T(n,r);F(e,A,i,o)}else i&&(U(e,A,i,o),s[t]=void 0)}}const I=/(?:Once|Passive|Capture)$/;function b(e){let t;if(I.test(e)){let A;t={};while(A=e.match(I))e=e.slice(0,e.length-A[0].length),t[A[0].toLowerCase()]=!0}return[(0,n.rs)(e.slice(2)),t]}function T(e,t){const A=e=>{const n=e.timeStamp||w();(y||n>=A.attached-1)&&(0,r.$d)(S(e,A.value),t,5,[e])};return A.value=e,A.attached=_(),A}function S(e,t){if((0,n.kJ)(t)){const A=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{A.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const D=/^on[a-z]/,x=(e,t,A,r,s=!1,i,o,a,l)=>{"class"===t?c(e,r,s):"style"===t?u(e,A,r):(0,n.F7)(t)?(0,n.tR)(t)||E(e,t,A,r,o):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):H(e,t,r,s))?m(e,t,r,i,o,a,l):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),B(e,t,r,s))};function H(e,t,A,r){return r?"innerHTML"===t||"textContent"===t||!!(t in e&&D.test(t)&&(0,n.mf)(A)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!D.test(t)||!(0,n.HD)(A))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const k="transition",L="animation",N=(e,{slots:t})=>(0,r.h)(r.P$,P(e),t);N.displayName="Transition";const R={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},M=(N.props=(0,n.l7)({},r.P$.props,R),(e,t=[])=>{(0,n.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)}),O=e=>!!e&&((0,n.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function P(e){const t={};for(const n in e)n in R||(t[n]=e[n]);if(!1===e.css)return t;const{name:A="v",type:r,duration:s,enterFromClass:i=`${A}-enter-from`,enterActiveClass:o=`${A}-enter-active`,enterToClass:a=`${A}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:l=a,leaveFromClass:h=`${A}-leave-from`,leaveActiveClass:d=`${A}-leave-active`,leaveToClass:f=`${A}-leave-to`}=e,g=K(s),p=g&&g[0],B=g&&g[1],{onBeforeEnter:m,onEnter:w,onEnterCancelled:y,onLeave:C,onLeaveCancelled:v,onBeforeAppear:Q=m,onAppear:_=w,onAppearCancelled:F=y}=t,U=(e,t,A)=>{q(e,t?l:a),q(e,t?u:o),A&&A()},E=(e,t)=>{e._isLeaving=!1,q(e,h),q(e,f),q(e,d),t&&t()},I=e=>(t,A)=>{const n=e?_:w,s=()=>U(t,e,A);M(n,[t,s]),W((()=>{q(t,e?c:i),G(t,e?l:a),O(n)||J(t,r,p,s)}))};return(0,n.l7)(t,{onBeforeEnter(e){M(m,[e]),G(e,i),G(e,o)},onBeforeAppear(e){M(Q,[e]),G(e,c),G(e,u)},onEnter:I(!1),onAppear:I(!0),onLeave(e,t){e._isLeaving=!0;const A=()=>E(e,t);G(e,h),$(),G(e,d),W((()=>{e._isLeaving&&(q(e,h),G(e,f),O(C)||J(e,r,B,A))})),M(C,[e,A])},onEnterCancelled(e){U(e,!1),M(y,[e])},onAppearCancelled(e){U(e,!0),M(F,[e])},onLeaveCancelled(e){E(e),M(v,[e])}})}function K(e){if(null==e)return null;if((0,n.Kn)(e))return[V(e.enter),V(e.leave)];{const t=V(e);return[t,t]}}function V(e){const t=(0,n.He)(e);return t}function G(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function q(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:A}=e;A&&(A.delete(t),A.size||(e._vtc=void 0))}function W(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let j=0;function J(e,t,A,n){const r=e._endId=++j,s=()=>{r===e._endId&&n()};if(A)return setTimeout(s,A);const{type:i,timeout:o,propCount:a}=Y(e,t);if(!i)return n();const c=i+"end";let u=0;const l=()=>{e.removeEventListener(c,h),s()},h=t=>{t.target===e&&++u>=a&&l()};setTimeout((()=>{u<a&&l()}),o+1),e.addEventListener(c,h)}function Y(e,t){const A=window.getComputedStyle(e),n=e=>(A[e]||"").split(", "),r=n(k+"Delay"),s=n(k+"Duration"),i=X(r,s),o=n(L+"Delay"),a=n(L+"Duration"),c=X(o,a);let u=null,l=0,h=0;t===k?i>0&&(u=k,l=i,h=s.length):t===L?c>0&&(u=L,l=c,h=a.length):(l=Math.max(i,c),u=l>0?i>c?k:L:null,h=u?u===k?s.length:a.length:0);const d=u===k&&/\b(transform|all)(,|$)/.test(A[k+"Property"]);return{type:u,timeout:l,propCount:h,hasTransform:d}}function X(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,A)=>z(t)+z(e[A]))))}function z(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function $(){return document.body.offsetHeight}new WeakMap,new WeakMap;const Z=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,n.kJ)(t)?e=>(0,n.ir)(t,e):t};function ee(e){e.target.composing=!0}function te(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ae={created(e,{modifiers:{lazy:t,trim:A,number:r}},s){e._assign=Z(s);const i=r||s.props&&"number"===s.props.type;F(e,t?"change":"input",(t=>{if(t.target.composing)return;let r=e.value;A&&(r=r.trim()),i&&(r=(0,n.He)(r)),e._assign(r)})),A&&F(e,"change",(()=>{e.value=e.value.trim()})),t||(F(e,"compositionstart",ee),F(e,"compositionend",te),F(e,"change",te))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:A,trim:r,number:s}},i){if(e._assign=Z(i),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(A)return;if(r&&e.value.trim()===t)return;if((s||"number"===e.type)&&(0,n.He)(e.value)===t)return}const o=null==t?"":t;e.value!==o&&(e.value=o)}};const ne={deep:!0,created(e,{value:t,modifiers:{number:A}},r){const s=(0,n.DM)(t);F(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>A?(0,n.He)(se(e)):se(e)));e._assign(e.multiple?s?new Set(t):t:t[0])})),e._assign=Z(r)},mounted(e,{value:t}){re(e,t)},beforeUpdate(e,t,A){e._assign=Z(A)},updated(e,{value:t}){re(e,t)}};function re(e,t){const A=e.multiple;if(!A||(0,n.kJ)(t)||(0,n.DM)(t)){for(let r=0,s=e.options.length;r<s;r++){const s=e.options[r],i=se(s);if(A)(0,n.kJ)(t)?s.selected=(0,n.hq)(t,i)>-1:s.selected=t.has(i);else if((0,n.WV)(se(s),t))return void(e.selectedIndex!==r&&(e.selectedIndex=r))}A||-1===e.selectedIndex||(e.selectedIndex=-1)}}function se(e){return"_value"in e?e._value:e.value}const ie=(0,n.l7)({patchProp:x},a);let oe;function ae(){return oe||(oe=(0,r.Us)(ie))}const ce=(...e)=>{const t=ae().createApp(...e);const{mount:A}=t;return t.mount=e=>{const r=ue(e);if(!r)return;const s=t._component;(0,n.mf)(s)||s.render||s.template||(s.template=r.innerHTML),r.innerHTML="";const i=A(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t};function ue(e){if((0,n.HD)(e)){const t=document.querySelector(e);return t}return e}},577:function(e,t,A){"use strict";function n(e,t){const A=Object.create(null),n=e.split(",");for(let r=0;r<n.length;r++)A[n[r]]=!0;return t?e=>!!A[e.toLowerCase()]:e=>!!A[e]}A.d(t,{C_:function(){return d},DM:function(){return D},E9:function(){return ne},F7:function(){return _},Gg:function(){return G},HD:function(){return k},He:function(){return te},Kn:function(){return N},NO:function(){return v},Nj:function(){return ee},Od:function(){return E},PO:function(){return K},Pq:function(){return o},RI:function(){return b},S0:function(){return V},W7:function(){return P},WV:function(){return g},Z6:function(){return y},_A:function(){return j},_N:function(){return S},aU:function(){return $},dG:function(){return C},e1:function(){return s},fY:function(){return n},hR:function(){return z},hq:function(){return p},ir:function(){return Z},j5:function(){return c},kC:function(){return X},kJ:function(){return T},kT:function(){return w},l7:function(){return U},mf:function(){return H},rs:function(){return Y},tI:function(){return R},tR:function(){return F},yA:function(){return a},yk:function(){return L},zw:function(){return B}});const r="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=n(r);const i="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",o=n(i);function a(e){return!!e||""===e}function c(e){if(T(e)){const t={};for(let A=0;A<e.length;A++){const n=e[A],r=k(n)?h(n):c(n);if(r)for(const e in r)t[e]=r[e]}return t}return k(e)||N(e)?e:void 0}const u=/;(?![^(]*\))/g,l=/:(.+)/;function h(e){const t={};return e.split(u).forEach((e=>{if(e){const A=e.split(l);A.length>1&&(t[A[0].trim()]=A[1].trim())}})),t}function d(e){let t="";if(k(e))t=e;else if(T(e))for(let A=0;A<e.length;A++){const n=d(e[A]);n&&(t+=n+" ")}else if(N(e))for(const A in e)e[A]&&(t+=A+" ");return t.trim()}function f(e,t){if(e.length!==t.length)return!1;let A=!0;for(let n=0;A&&n<e.length;n++)A=g(e[n],t[n]);return A}function g(e,t){if(e===t)return!0;let A=x(e),n=x(t);if(A||n)return!(!A||!n)&&e.getTime()===t.getTime();if(A=L(e),n=L(t),A||n)return e===t;if(A=T(e),n=T(t),A||n)return!(!A||!n)&&f(e,t);if(A=N(e),n=N(t),A||n){if(!A||!n)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const A in e){const n=e.hasOwnProperty(A),r=t.hasOwnProperty(A);if(n&&!r||!n&&r||!g(e[A],t[A]))return!1}}return String(e)===String(t)}function p(e,t){return e.findIndex((e=>g(e,t)))}const B=e=>k(e)?e:null==e?"":T(e)||N(e)&&(e.toString===M||!H(e.toString))?JSON.stringify(e,m,2):String(e),m=(e,t)=>t&&t.__v_isRef?m(e,t.value):S(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,A])=>(e[`${t} =>`]=A,e)),{})}:D(t)?{[`Set(${t.size})`]:[...t.values()]}:!N(t)||T(t)||K(t)?t:String(t),w={},y=[],C=()=>{},v=()=>!1,Q=/^on[^a-z]/,_=e=>Q.test(e),F=e=>e.startsWith("onUpdate:"),U=Object.assign,E=(e,t)=>{const A=e.indexOf(t);A>-1&&e.splice(A,1)},I=Object.prototype.hasOwnProperty,b=(e,t)=>I.call(e,t),T=Array.isArray,S=e=>"[object Map]"===O(e),D=e=>"[object Set]"===O(e),x=e=>"[object Date]"===O(e),H=e=>"function"===typeof e,k=e=>"string"===typeof e,L=e=>"symbol"===typeof e,N=e=>null!==e&&"object"===typeof e,R=e=>N(e)&&H(e.then)&&H(e.catch),M=Object.prototype.toString,O=e=>M.call(e),P=e=>O(e).slice(8,-1),K=e=>"[object Object]"===O(e),V=e=>k(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,G=n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),q=e=>{const t=Object.create(null);return A=>{const n=t[A];return n||(t[A]=e(A))}},W=/-(\w)/g,j=q((e=>e.replace(W,((e,t)=>t?t.toUpperCase():"")))),J=/\B([A-Z])/g,Y=q((e=>e.replace(J,"-$1").toLowerCase())),X=q((e=>e.charAt(0).toUpperCase()+e.slice(1))),z=q((e=>e?`on${X(e)}`:"")),$=(e,t)=>!Object.is(e,t),Z=(e,t)=>{for(let A=0;A<e.length;A++)e[A](t)},ee=(e,t,A)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:A})},te=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ae;const ne=()=>Ae||(Ae="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof A.g?A.g:{})},902:function(e,t,A){"use strict";A.d(t,{Z:function(){return n.Z}});var n=A(180),r="firebase",s="9.8.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.Z.registerVersion(r,s,"app-compat")},17:function(e,t,A){"use strict";var n=A(180),r=A(463),s=A(276),i=A(444),o=A(333);const a="@firebase/database-compat",c="0.2.0",u=new o.Yd("@firebase/database-compat"),l=function(e){const t="FIREBASE WARNING: "+e;u.warn(t)},h=function(e,t,A,n){if((!n||void 0!==A)&&"boolean"!==typeof A)throw new Error((0,i.gK)(e,t)+"must be a boolean.")},d=function(e,t,A){if(!A||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,i.gK)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class f{constructor(e){this._delegate=e}cancel(e){(0,i.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,i.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){(0,i.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,i.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){(0,i.Dv)("OnDisconnect.set",1,2,arguments.length),(0,i.Wj)("OnDisconnect.set","onComplete",t,!0);const A=this._delegate.set(e);return t&&A.then((()=>t(null)),(e=>t(e))),A}setWithPriority(e,t,A){(0,i.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,i.Wj)("OnDisconnect.setWithPriority","onComplete",A,!0);const n=this._delegate.setWithPriority(e,t);return A&&n.then((()=>A(null)),(e=>A(e))),n}update(e,t){if((0,i.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let A=0;A<e.length;++A)t[""+A]=e[A];e=t,l("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,i.Wj)("OnDisconnect.update","onComplete",t,!0);const A=this._delegate.update(e);return t&&A.then((()=>t(null)),(e=>t(e))),A}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,i.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,i.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,i.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,i.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,i.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,i.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),(0,s.FQ)("DataSnapshot.child","path",e,!1),new p(this._database,this._delegate.child(e))}hasChild(e){return(0,i.Dv)("DataSnapshot.hasChild",1,1,arguments.length),(0,s.FQ)("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,i.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,i.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,i.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new p(this._database,t))))}hasChildren(){return(0,i.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,i.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,i.Dv)("DataSnapshot.ref",0,0,arguments.length),new m(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class B{constructor(e,t){this.database=e,this._delegate=t}on(e,t,A,n){var r;(0,i.Dv)("Query.on",2,4,arguments.length),(0,i.Wj)("Query.on","callback",t,!1);const o=B.getCancelAndContextArgs_("Query.on",A,n),a=(e,A)=>{t.call(o.context,new p(this.database,e),A)};a.userCallback=t,a.context=o.context;const c=null===(r=o.cancel)||void 0===r?void 0:r.bind(o.context);switch(e){case"value":return(0,s.jM)(this._delegate,a,c),t;case"child_added":return(0,s.yv)(this._delegate,a,c),t;case"child_removed":return(0,s.MQ)(this._delegate,a,c),t;case"child_changed":return(0,s.Jr)(this._delegate,a,c),t;case"child_moved":return(0,s.Vt)(this._delegate,a,c),t;default:throw new Error((0,i.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,A){if((0,i.Dv)("Query.off",0,3,arguments.length),d("Query.off",e,!0),(0,i.Wj)("Query.off","callback",t,!0),(0,i.lb)("Query.off","context",A,!0),t){const n=()=>{};n.userCallback=t,n.context=A,(0,s.S1)(this._delegate,e,n)}else(0,s.S1)(this._delegate,e)}get(){return(0,s.U2)(this._delegate).then((e=>new p(this.database,e)))}once(e,t,A,n){(0,i.Dv)("Query.once",1,4,arguments.length),(0,i.Wj)("Query.once","callback",t,!0);const r=B.getCancelAndContextArgs_("Query.once",A,n),o=new i.BH,a=(e,A)=>{const n=new p(this.database,e);t&&t.call(r.context,n,A),o.resolve(n)};a.userCallback=t,a.context=r.context;const c=e=>{r.cancel&&r.cancel.call(r.context,e),o.reject(e)};switch(e){case"value":(0,s.jM)(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":(0,s.yv)(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":(0,s.MQ)(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":(0,s.Jr)(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":(0,s.Vt)(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error((0,i.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,i.Dv)("Query.limitToFirst",1,1,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.Kk)(e)))}limitToLast(e){return(0,i.Dv)("Query.limitToLast",1,1,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.vh)(e)))}orderByChild(e){return(0,i.Dv)("Query.orderByChild",1,1,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.g2)(e)))}orderByKey(){return(0,i.Dv)("Query.orderByKey",0,0,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.R)()))}orderByPriority(){return(0,i.Dv)("Query.orderByPriority",0,0,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.HE)()))}orderByValue(){return(0,i.Dv)("Query.orderByValue",0,0,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.Bd)()))}startAt(e=null,t){return(0,i.Dv)("Query.startAt",0,2,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.e0)(e,t)))}startAfter(e=null,t){return(0,i.Dv)("Query.startAfter",0,2,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.TQ)(e,t)))}endAt(e=null,t){return(0,i.Dv)("Query.endAt",0,2,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.Wu)(e,t)))}endBefore(e=null,t){return(0,i.Dv)("Query.endBefore",0,2,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.Lx)(e,t)))}equalTo(e,t){return(0,i.Dv)("Query.equalTo",1,2,arguments.length),new B(this.database,(0,s.IO)(this._delegate,(0,s.EW)(e,t)))}toString(){return(0,i.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,i.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,i.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof B)){const e="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(e)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,A){const n={cancel:void 0,context:void 0};if(t&&A)n.cancel=t,(0,i.Wj)(e,"cancel",n.cancel,!0),n.context=A,(0,i.lb)(e,"context",n.context,!0);else if(t)if("object"===typeof t&&null!==t)n.context=t;else{if("function"!==typeof t)throw new Error((0,i.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");n.cancel=t}return n}get ref(){return new m(this.database,new s.tn(this._delegate._repo,this._delegate._path))}}class m extends B{constructor(e,t){super(e,new s.JH(t._repo,t._path,new s.G$,!1)),this.database=e,this._delegate=t}getKey(){return(0,i.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,i.Dv)("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new m(this.database,(0,s.iU)(this._delegate,e))}getParent(){(0,i.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new m(this.database,e):null}getRoot(){return(0,i.Dv)("Reference.root",0,0,arguments.length),new m(this.database,this._delegate.root)}set(e,t){(0,i.Dv)("Reference.set",1,2,arguments.length),(0,i.Wj)("Reference.set","onComplete",t,!0);const A=(0,s.t8)(this._delegate,e);return t&&A.then((()=>t(null)),(e=>t(e))),A}update(e,t){if((0,i.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let A=0;A<e.length;++A)t[""+A]=e[A];e=t,l("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,s.mI)("Reference.update",this._delegate._path),(0,i.Wj)("Reference.update","onComplete",t,!0);const A=(0,s.Vx)(this._delegate,e);return t&&A.then((()=>t(null)),(e=>t(e))),A}setWithPriority(e,t,A){(0,i.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,i.Wj)("Reference.setWithPriority","onComplete",A,!0);const n=(0,s.cy)(this._delegate,e,t);return A&&n.then((()=>A(null)),(e=>A(e))),n}remove(e){(0,i.Dv)("Reference.remove",0,1,arguments.length),(0,i.Wj)("Reference.remove","onComplete",e,!0);const t=(0,s.Od)(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,A){(0,i.Dv)("Reference.transaction",1,3,arguments.length),(0,i.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,i.Wj)("Reference.transaction","onComplete",t,!0),h("Reference.transaction","applyLocally",A,!0);const n=(0,s.i3)(this._delegate,e,{applyLocally:A}).then((e=>new g(e.committed,new p(this.database,e.snapshot))));return t&&n.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),n}setPriority(e,t){(0,i.Dv)("Reference.setPriority",1,2,arguments.length),(0,i.Wj)("Reference.setPriority","onComplete",t,!0);const A=(0,s.Sl)(this._delegate,e);return t&&A.then((()=>t(null)),(e=>t(e))),A}push(e,t){(0,i.Dv)("Reference.push",0,2,arguments.length),(0,i.Wj)("Reference.push","onComplete",t,!0);const A=(0,s.VF)(this._delegate,e),n=A.then((e=>new m(this.database,e)));t&&n.then((()=>t(null)),(e=>t(e)));const r=new m(this.database,A);return r.then=n.then.bind(n),r.catch=n.catch.bind(n,void 0),r}onDisconnect(){return(0,s.mI)("Reference.onDisconnect",this._delegate._path),new f(new s.vA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:s.TD,forceLongPolling:s.Ot}}useEmulator(e,t,A={}){(0,s.dH)(this._delegate,e,t,A)}ref(e){if((0,i.Dv)("database.ref",0,1,arguments.length),e instanceof m){const t=(0,s.qT)(this._delegate,e.toString());return new m(this,t)}{const t=(0,s.iH)(this._delegate,e);return new m(this,t)}}refFromURL(e){const t="database.refFromURL";(0,i.Dv)(t,1,1,arguments.length);const A=(0,s.qT)(this._delegate,e);return new m(this,A)}goOffline(){return(0,i.Dv)("database.goOffline",0,0,arguments.length),(0,s.Sb)(this._delegate)}goOnline(){return(0,i.Dv)("database.goOnline",0,0,arguments.length),(0,s.$o)(this._delegate)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function y({app:e,url:t,version:A,customAuthImpl:n,namespace:i,nodeAdmin:o=!1}){(0,s.AM)(A);const a=new r.zt("auth-internal",new r.H0("database-standalone"));return a.setComponent(new r.wA("auth-internal",(()=>n),"PRIVATE")),{instance:new w((0,s.wj)(e,a,void 0,t,o),e),namespace:i}}w.ServerValue={TIMESTAMP:(0,s.Bt)(),increment:e=>(0,s.nP)(e)};var C=Object.freeze({__proto__:null,initStandalone:y});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v=w.ServerValue;function Q(e){e.INTERNAL.registerComponent(new r.wA("database-compat",((e,{instanceIdentifier:t})=>{const A=e.getProvider("app-compat").getImmediate(),n=e.getProvider("database").getImmediate({identifier:t});return new w(n,A)}),"PUBLIC").setServiceProps({Reference:m,Query:B,Database:w,DataSnapshot:p,enableLogging:s.U7,INTERNAL:C,ServerValue:v}).setMultipleInstances(!0)),e.registerVersion(a,c)}Q(n.Z)},621:function(e,t,A){"use strict";var n,r=A(180),s=A(816),i=A(463),o=A(333),a=A(444),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof A.g?A.g:"undefined"!==typeof self?self:{},u={},l=l||{},h=c||self;function d(){}function f(e){var t=typeof e;return t="object"!=t?t:e?Array.isArray(e)?"array":t:"null","array"==t||"object"==t&&"number"==typeof e.length}function g(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function p(e){return Object.prototype.hasOwnProperty.call(e,B)&&e[B]||(e[B]=++m)}var B="closure_uid_"+(1e9*Math.random()>>>0),m=0;function w(e,t,A){return e.call.apply(e.bind,arguments)}function y(e,t,A){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,n),e.apply(t,A)}}return function(){return e.apply(t,arguments)}}function C(e,t,A){return C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:y,C.apply(null,arguments)}function v(e,t){var A=Array.prototype.slice.call(arguments,1);return function(){var t=A.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Q(e,t){function A(){}A.prototype=t.prototype,e.Z=t.prototype,e.prototype=new A,e.prototype.constructor=e,e.Vb=function(e,A,n){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[A].apply(e,r)}}function _(){this.s=this.s,this.o=this.o}var F=0,U={};_.prototype.s=!1,_.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=F)){var e=p(this);delete U[e]}},_.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let A=0;A<e.length;A++)if(A in e&&e[A]===t)return A;return-1},I=Array.prototype.forEach?function(e,t,A){Array.prototype.forEach.call(e,t,A)}:function(e,t,A){const n=e.length,r="string"===typeof e?e.split(""):e;for(let s=0;s<n;s++)s in r&&t.call(A,r[s],s,e)};function b(e){e:{var t=WA;const A=e.length,n="string"===typeof e?e.split(""):e;for(let r=0;r<A;r++)if(r in n&&t.call(void 0,n[r],r,e)){t=r;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}function T(e){return Array.prototype.concat.apply([],arguments)}function S(e){const t=e.length;if(0<t){const A=Array(t);for(let n=0;n<t;n++)A[n]=e[n];return A}return[]}function D(e){return/^[\s\xa0]*$/.test(e)}var x,H=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function k(e,t){return-1!=e.indexOf(t)}function L(e,t){return e<t?-1:e>t?1:0}e:{var N=h.navigator;if(N){var R=N.userAgent;if(R){x=R;break e}}x=""}function M(e,t,A){for(const n in e)t.call(A,e[n],n,e)}function O(e){const t={};for(const A in e)t[A]=e[A];return t}var P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(e,t){let A,n;for(let r=1;r<arguments.length;r++){for(A in n=arguments[r],n)e[A]=n[A];for(let t=0;t<P.length;t++)A=P[t],Object.prototype.hasOwnProperty.call(n,A)&&(e[A]=n[A])}}function V(e){return V[" "](e),e}function G(e){var t=ne;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}V[" "]=d;var q,W=k(x,"Opera"),j=k(x,"Trident")||k(x,"MSIE"),J=k(x,"Edge"),Y=J||j,X=k(x,"Gecko")&&!(k(x.toLowerCase(),"webkit")&&!k(x,"Edge"))&&!(k(x,"Trident")||k(x,"MSIE"))&&!k(x,"Edge"),z=k(x.toLowerCase(),"webkit")&&!k(x,"Edge");function $(){var e=h.document;return e?e.documentMode:void 0}e:{var Z="",ee=function(){var e=x;return X?/rv:([^\);]+)(\)|;)/.exec(e):J?/Edge\/([\d\.]+)/.exec(e):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):z?/WebKit\/(\S+)/.exec(e):W?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ee&&(Z=ee?ee[1]:""),j){var te=$();if(null!=te&&te>parseFloat(Z)){q=String(te);break e}}q=Z}var Ae,ne={};function re(){return G((function(){let e=0;const t=H(String(q)).split("."),A=H("9").split("."),n=Math.max(t.length,A.length);for(let i=0;0==e&&i<n;i++){var r=t[i]||"",s=A[i]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;e=L(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||L(0==r[2].length,0==s[2].length)||L(r[2],s[2]),r=r[3],s=s[3]}while(0==e)}return 0<=e}))}if(h.document&&j){var se=$();Ae=se||(parseInt(q,10)||void 0)}else Ae=void 0;var ie=Ae,oe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{h.addEventListener("test",d,t),h.removeEventListener("test",d,t)}catch(A){}return e}();function ae(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ce(e,t){if(ae.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var A=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(X){e:{try{V(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==A?t=e.fromElement:"mouseout"==A&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ue[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ce.Z.h.call(this)}}ae.prototype.h=function(){this.defaultPrevented=!0},Q(ce,ae);var ue={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),he=0;function de(e,t,A,n,r){this.listener=e,this.proxy=null,this.src=t,this.type=A,this.capture=!!n,this.ia=r,this.key=++he,this.ca=this.fa=!1}function fe(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ge(e){this.src=e,this.g={},this.h=0}function pe(e,t){var A=t.type;if(A in e.g){var n,r=e.g[A],s=E(r,t);(n=0<=s)&&Array.prototype.splice.call(r,s,1),n&&(fe(t),0==e.g[A].length&&(delete e.g[A],e.h--))}}function Be(e,t,A,n){for(var r=0;r<e.length;++r){var s=e[r];if(!s.ca&&s.listener==t&&s.capture==!!A&&s.ia==n)return r}return-1}ge.prototype.add=function(e,t,A,n,r){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var i=Be(e,t,n,r);return-1<i?(t=e[i],A||(t.fa=!1)):(t=new de(t,this.src,s,!!n,r),t.fa=A,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),we={};function ye(e,t,A,n,r){if(n&&n.once)return Qe(e,t,A,n,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ye(e,t[s],A,n,r);return null}return A=Te(A),e&&e[le]?e.N(t,A,g(n)?!!n.capture:!!n,r):Ce(e,t,A,!1,n,r)}function Ce(e,t,A,n,r,s){if(!t)throw Error("Invalid event type");var i=g(r)?!!r.capture:!!r,o=Ie(e);if(o||(e[me]=o=new ge(e)),A=o.add(t,A,n,i,s),A.proxy)return A;if(n=ve(),A.proxy=n,n.src=e,n.listener=A,e.addEventListener)oe||(r=i),void 0===r&&(r=!1),e.addEventListener(t.toString(),n,r);else if(e.attachEvent)e.attachEvent(Ue(t.toString()),n);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(n)}return A}function ve(){function e(A){return t.call(e.src,e.listener,A)}var t=Ee;return e}function Qe(e,t,A,n,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Qe(e,t[s],A,n,r);return null}return A=Te(A),e&&e[le]?e.O(t,A,g(n)?!!n.capture:!!n,r):Ce(e,t,A,!0,n,r)}function _e(e,t,A,n,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)_e(e,t[s],A,n,r);else n=g(n)?!!n.capture:!!n,A=Te(A),e&&e[le]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],A=Be(s,A,n,r),-1<A&&(fe(s[A]),Array.prototype.splice.call(s,A,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ie(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Be(t,A,n,r)),(A=-1<e?t[e]:null)&&Fe(A))}function Fe(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[le])pe(t.i,e);else{var A=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(A,n,e.capture):t.detachEvent?t.detachEvent(Ue(A),n):t.addListener&&t.removeListener&&t.removeListener(n),(A=Ie(t))?(pe(A,e),0==A.h&&(A.src=null,t[me]=null)):fe(e)}}}function Ue(e){return e in we?we[e]:we[e]="on"+e}function Ee(e,t){if(e.ca)e=!0;else{t=new ce(t,this);var A=e.listener,n=e.ia||e.src;e.fa&&Fe(e),e=A.call(n,t)}return e}function Ie(e){return e=e[me],e instanceof ge?e:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(e){return"function"===typeof e?e:(e[be]||(e[be]=function(t){return e.handleEvent(t)}),e[be])}function Se(){_.call(this),this.i=new ge(this),this.P=this,this.I=null}function De(e,t){var A,n=e.I;if(n)for(A=[];n;n=n.I)A.push(n);if(e=e.P,n=t.type||t,"string"===typeof t)t=new ae(t,e);else if(t instanceof ae)t.target=t.target||e;else{var r=t;t=new ae(n,e),K(t,r)}if(r=!0,A)for(var s=A.length-1;0<=s;s--){var i=t.g=A[s];r=xe(i,n,!0,t)&&r}if(i=t.g=e,r=xe(i,n,!0,t)&&r,r=xe(i,n,!1,t)&&r,A)for(s=0;s<A.length;s++)i=t.g=A[s],r=xe(i,n,!1,t)&&r}function xe(e,t,A,n){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var i=t[s];if(i&&!i.ca&&i.capture==A){var o=i.listener,a=i.ia||i.src;i.fa&&pe(e.i,i),r=!1!==o.call(a,n)&&r}}return r&&!n.defaultPrevented}Q(Se,_),Se.prototype[le]=!0,Se.prototype.removeEventListener=function(e,t,A,n){_e(this,e,t,A,n)},Se.prototype.M=function(){if(Se.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var A=t.g[e],n=0;n<A.length;n++)fe(A[n]);delete t.g[e],t.h--}}this.I=null},Se.prototype.N=function(e,t,A,n){return this.i.add(String(e),t,!1,A,n)},Se.prototype.O=function(e,t,A,n){return this.i.add(String(e),t,!0,A,n)};var He=h.JSON.stringify;function ke(){var e=Ge;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class Le{constructor(){this.h=this.g=null}add(e,t){const A=Re.get();A.set(e,t),this.h?this.h.next=A:this.g=A,this.h=A}}var Ne,Re=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Me),(e=>e.reset()));class Me{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Oe(e){h.setTimeout((()=>{throw e}),0)}function Pe(e,t){Ne||Ke(),Ve||(Ne(),Ve=!0),Ge.add(e,t)}function Ke(){var e=h.Promise.resolve(void 0);Ne=function(){e.then(qe)}}var Ve=!1,Ge=new Le;function qe(){for(var e;e=ke();){try{e.h.call(e.g)}catch(A){Oe(A)}var t=Re;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ve=!1}function We(e,t){Se.call(this),this.h=e||1,this.g=t||h,this.j=C(this.kb,this),this.l=Date.now()}function je(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Je(e,t,A){if("function"===typeof e)A&&(e=C(e,A));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=C(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function Ye(e){e.g=Je((()=>{e.g=null,e.i&&(e.i=!1,Ye(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Q(We,Se),n=We.prototype,n.da=!1,n.S=null,n.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),De(this,"tick"),this.da&&(je(this),this.start()))}},n.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},n.M=function(){We.Z.M.call(this),je(this),delete this.g};class Xe extends _{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ye(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(e){_.call(this),this.h=e,this.g={}}Q(ze,_);var $e=[];function Ze(e,t,A,n){Array.isArray(A)||(A&&($e[0]=A.toString()),A=$e);for(var r=0;r<A.length;r++){var s=ye(t,A[r],n||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function et(e){M(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Fe(e)}),e),e.g={}}function tt(){this.g=!0}function At(e,t,A,n,r,s){e.info((function(){if(e.g)if(s)for(var i="",o=s.split("&"),a=0;a<o.length;a++){var c=o[a].split("=");if(1<c.length){var u=c[0];c=c[1];var l=u.split("_");i=2<=l.length&&"type"==l[1]?i+(u+"=")+c+"&":i+(u+"=redacted&")}}else i=null;else i=s;return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+"\n"+A+"\n"+i}))}function nt(e,t,A,n,r,s,i){e.info((function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+"\n"+A+"\n"+s+" "+i}))}function rt(e,t,A,n){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+it(e,A)+(n?" "+n:"")}))}function st(e,t){e.info((function(){return"TIMEOUT: "+t}))}function it(e,t){if(!e.g)return t;if(!t)return null;try{var A=JSON.parse(t);if(A)for(e=0;e<A.length;e++)if(Array.isArray(A[e])){var n=A[e];if(!(2>n.length)){var r=n[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var i=1;i<r.length;i++)r[i]=""}}}return He(A)}catch(o){return t}}ze.prototype.M=function(){ze.Z.M.call(this),et(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tt.prototype.Aa=function(){this.g=!1},tt.prototype.info=function(){};var ot={},at=null;function ct(){return at=at||new Se}function ut(e){ae.call(this,ot.Ma,e)}function lt(e){const t=ct();De(t,new ut(t,e))}function ht(e,t){ae.call(this,ot.STAT_EVENT,e),this.stat=t}function dt(e){const t=ct();De(t,new ht(t,e))}function ft(e,t){ae.call(this,ot.Na,e),this.size=t}function gt(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){e()}),t)}ot.Ma="serverreachability",Q(ut,ae),ot.STAT_EVENT="statevent",Q(ht,ae),ot.Na="timingevent",Q(ft,ae);var pt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Bt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mt(){}function wt(e){return e.h||(e.h=e.i())}function yt(){}mt.prototype.h=null;var Ct,vt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Qt(){ae.call(this,"d")}function _t(){ae.call(this,"c")}function Ft(){}function Ut(e,t,A,n){this.l=e,this.j=t,this.m=A,this.X=n||1,this.V=new ze(this),this.P=It,e=Y?125:void 0,this.W=new We(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}Q(Qt,ae),Q(_t,ae),Q(Ft,mt),Ft.prototype.g=function(){return new XMLHttpRequest},Ft.prototype.i=function(){return{}},Ct=new Ft;var It=45e3,bt={},Tt={};function St(e,t,A){e.K=1,e.v=AA(Xt(t)),e.s=A,e.U=!0,Dt(e,null)}function Dt(e,t){e.F=Date.now(),Lt(e),e.A=Xt(e.v);var A=e.A,n=e.X;Array.isArray(n)||(n=[String(n)]),BA(A.h,"t",n),e.C=0,A=e.l.H,e.h=new Et,e.g=_n(e.l,A?t:null,!e.s),0<e.O&&(e.L=new Xe(C(e.Ia,e,e.g),e.O)),Ze(e.V,e.g,"readystatechange",e.gb),t=e.H?O(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),lt(1),At(e.j,e.u,e.A,e.m,e.X,e.s)}function xt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ht(e,t,A){let n,r=!0;for(;!e.I&&e.C<A.length;){if(n=kt(e,A),n==Tt){4==t&&(e.o=4,dt(14),r=!1),rt(e.j,e.m,null,"[Incomplete Response]");break}if(n==bt){e.o=4,dt(15),rt(e.j,e.m,A,"[Invalid Chunk]"),r=!1;break}rt(e.j,e.m,n,null),Pt(e,n)}xt(e)&&n!=Tt&&n!=bt&&(e.h.g="",e.C=0),4!=t||0!=A.length||e.h.h||(e.o=1,dt(16),r=!1),e.i=e.i&&r,r?0<A.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+A.length),pn(t),t.L=!0,dt(11))):(rt(e.j,e.m,A,"[Invalid Chunked Response]"),Ot(e),Mt(e))}function kt(e,t){var A=e.C,n=t.indexOf("\n",A);return-1==n?Tt:(A=Number(t.substring(A,n)),isNaN(A)?bt:(n+=1,n+A>t.length?Tt:(t=t.substr(n,A),e.C=n+A,t)))}function Lt(e){e.Y=Date.now()+e.P,Nt(e,e.P)}function Nt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=gt(C(e.eb,e),t)}function Rt(e){e.B&&(h.clearTimeout(e.B),e.B=null)}function Mt(e){0==e.l.G||e.I||wn(e.l,e)}function Ot(e){Rt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,je(e.W),et(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Pt(e,t){try{var A=e.l;if(0!=A.G&&(A.g==e||FA(A.i,e)))if(A.I=e.N,!e.J&&FA(A.i,e)&&3==A.G){try{var n=A.Ca.g.parse(t)}catch(c){n=null}if(Array.isArray(n)&&3==n.length){var r=n;if(0==r[0]){e:if(!A.u){if(A.g){if(!(A.g.F+3e3<e.F))break e;mn(A),sn(A)}gn(A),dt(18)}}else A.ta=r[1],0<A.ta-A.U&&37500>r[2]&&A.N&&0==A.A&&!A.v&&(A.v=gt(C(A.ab,A),6e3));if(1>=_A(A.i)&&A.ka){try{A.ka()}catch(c){}A.ka=void 0}}else Cn(A,11)}else if((e.J||A.g==e)&&mn(A),!D(t))for(r=A.Ca.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(A.U=c[0],c=c[1],2==A.G)if("c"==c[0]){A.J=c[1],A.la=c[2];const t=c[3];null!=t&&(A.ma=t,A.h.info("VER="+A.ma));const r=c[4];null!=r&&(A.za=r,A.h.info("SVER="+A.za));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(n=1.5*u,A.K=n,A.h.info("backChannelRequestTimeoutMs_="+n)),n=A;const l=e.g;if(l){const e=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=n.i;!s.g&&(k(e,"spdy")||k(e,"quic")||k(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(UA(s,s.h),s.h=null))}if(n.D){const e=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.sa=e,tA(n.F,n.D,e))}}A.G=3,A.j&&A.j.xa(),A.$&&(A.O=Date.now()-e.F,A.h.info("Handshake RTT: "+A.O+"ms")),n=A;var i=e;if(n.oa=Qn(n,n.H?n.la:null,n.W),i.J){EA(n.i,i);var o=i,a=n.K;a&&o.setTimeout(a),o.B&&(Rt(o),Lt(o)),n.g=i}else fn(n);0<A.l.length&&cn(A)}else"stop"!=c[0]&&"close"!=c[0]||Cn(A,7);else 3==A.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Cn(A,7):rn(A):"noop"!=c[0]&&A.j&&A.j.wa(c),A.A=0)}lt(4)}catch(c){}}function Kt(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(f(e)){for(var t=[],A=e.length,n=0;n<A;n++)t.push(e[n]);return t}for(n in t=[],A=0,e)t[A++]=e[n];return t}function Vt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"===typeof e)I(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var A=e.T();else if(e.R&&"function"==typeof e.R)A=void 0;else if(f(e)||"string"===typeof e){A=[];for(var n=e.length,r=0;r<n;r++)A.push(r)}else for(r in A=[],n=0,e)A[n++]=r;n=Kt(e),r=n.length;for(var s=0;s<r;s++)t.call(void 0,n[s],A&&A[s],e)}}function Gt(e,t){this.h={},this.g=[],this.i=0;var A=arguments.length;if(1<A){if(A%2)throw Error("Uneven number of arguments");for(var n=0;n<A;n+=2)this.set(arguments[n],arguments[n+1])}else if(e)if(e instanceof Gt)for(A=e.T(),n=0;n<A.length;n++)this.set(A[n],e.get(A[n]));else for(n in e)this.set(n,e[n])}function qt(e){if(e.i!=e.g.length){for(var t=0,A=0;t<e.g.length;){var n=e.g[t];Wt(e.h,n)&&(e.g[A++]=n),t++}e.g.length=A}if(e.i!=e.g.length){var r={};for(A=t=0;t<e.g.length;)n=e.g[t],Wt(r,n)||(e.g[A++]=n,r[n]=1),t++;e.g.length=A}}function Wt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n=Ut.prototype,n.setTimeout=function(e){this.P=e},n.gb=function(e){e=e.target;const t=this.L;t&&3==$A(e)?t.l():this.Ia(e)},n.Ia=function(e){try{if(e==this.g)e:{const u=$A(this.g);var t=this.g.Da();const l=this.g.ba();if(!(3>u)&&(3!=u||Y||this.g&&(this.h.h||this.g.ga()||ZA(this.g)))){this.I||4!=u||7==t||lt(8==t||0>=l?3:2),Rt(this);var A=this.g.ba();this.N=A;t:if(xt(this)){var n=ZA(this.g);e="";var r=n.length,s=4==$A(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ot(this),Mt(this);var i="";break t}this.h.i=new h.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:s&&t==r-1});n.splice(0,r),this.h.g+=e,this.C=0,i=this.h.g}else i=this.g.ga();if(this.i=200==A,nt(this.j,this.u,this.A,this.m,this.X,u,A),this.i){if(this.$&&!this.J){t:{if(this.g){var o,a=this.g;if((o=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(o)){var c=o;break t}}c=null}if(!(A=c)){this.i=!1,this.o=3,dt(12),Ot(this),Mt(this);break e}rt(this.j,this.m,A,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pt(this,A)}this.U?(Ht(this,u,i),Y&&this.i&&3==u&&(Ze(this.V,this.W,"tick",this.fb),this.W.start())):(rt(this.j,this.m,i,null),Pt(this,i)),4==u&&Ot(this),this.i&&!this.I&&(4==u?wn(this.l,this):(this.i=!1,Lt(this)))}else 400==A&&0<i.indexOf("Unknown SID")?(this.o=3,dt(12)):(this.o=0,dt(13)),Ot(this),Mt(this)}}}catch(u){}},n.fb=function(){if(this.g){var e=$A(this.g),t=this.g.ga();this.C<t.length&&(Rt(this),Ht(this,e,t),this.i&&4!=e&&Lt(this))}},n.cancel=function(){this.I=!0,Ot(this)},n.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(st(this.j,this.A),2!=this.K&&(lt(3),dt(17)),Ot(this),this.o=2,Mt(this)):Nt(this,this.Y-e)},n=Gt.prototype,n.R=function(){qt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},n.T=function(){return qt(this),this.g.concat()},n.get=function(e,t){return Wt(this.h,e)?this.h[e]:t},n.set=function(e,t){Wt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},n.forEach=function(e,t){for(var A=this.T(),n=0;n<A.length;n++){var r=A[n],s=this.get(r);e.call(t,s,r,this)}};var jt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jt(e,t){if(e){e=e.split("&");for(var A=0;A<e.length;A++){var n=e[A].indexOf("="),r=null;if(0<=n){var s=e[A].substring(0,n);r=e[A].substring(n+1)}else s=e[A];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Yt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Yt){this.g=void 0!==t?t:e.g,zt(this,e.j),this.s=e.s,$t(this,e.i),Zt(this,e.m),this.l=e.l,t=e.h;var A=new dA;A.i=t.i,t.g&&(A.g=new Gt(t.g),A.h=t.h),eA(this,A),this.o=e.o}else e&&(A=String(e).match(jt))?(this.g=!!t,zt(this,A[1]||"",!0),this.s=sA(A[2]||""),$t(this,A[3]||"",!0),Zt(this,A[4]),this.l=sA(A[5]||"",!0),eA(this,A[6]||"",!0),this.o=sA(A[7]||"")):(this.g=!!t,this.h=new dA(null,this.g))}function Xt(e){return new Yt(e)}function zt(e,t,A){e.j=A?sA(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $t(e,t,A){e.i=A?sA(t,!0):t}function Zt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function eA(e,t,A){t instanceof dA?(e.h=t,wA(e.h,e.g)):(A||(t=iA(t,lA)),e.h=new dA(t,e.g))}function tA(e,t,A){e.h.set(t,A)}function AA(e){return tA(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function nA(e){return e instanceof Yt?Xt(e):new Yt(e,void 0)}function rA(e,t,A,n){var r=new Yt(null,void 0);return e&&zt(r,e),t&&$t(r,t),A&&Zt(r,A),n&&(r.l=n),r}function sA(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function iA(e,t,A){return"string"===typeof e?(e=encodeURI(e).replace(t,oA),A&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function oA(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}Yt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(iA(t,aA,!0),":");var A=this.i;return(A||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(iA(t,aA,!0),"@"),e.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.m,null!=A&&e.push(":",String(A))),(A=this.l)&&(this.i&&"/"!=A.charAt(0)&&e.push("/"),e.push(iA(A,"/"==A.charAt(0)?uA:cA,!0))),(A=this.h.toString())&&e.push("?",A),(A=this.o)&&e.push("#",iA(A,hA)),e.join("")};var aA=/[#\/\?@]/g,cA=/[#\?:]/g,uA=/[#\?]/g,lA=/[#\?@]/g,hA=/#/g;function dA(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fA(e){e.g||(e.g=new Gt,e.h=0,e.i&&Jt(e.i,(function(t,A){e.add(decodeURIComponent(t.replace(/\+/g," ")),A)})))}function gA(e,t){fA(e),t=mA(e,t),Wt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Wt(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&qt(e)))}function pA(e,t){return fA(e),t=mA(e,t),Wt(e.g.h,t)}function BA(e,t,A){gA(e,t),0<A.length&&(e.i=null,e.g.set(mA(e,t),S(A)),e.h+=A.length)}function mA(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function wA(e,t){t&&!e.j&&(fA(e),e.i=null,e.g.forEach((function(e,t){var A=t.toLowerCase();t!=A&&(gA(this,t),BA(this,A,e))}),e)),e.j=t}n=dA.prototype,n.add=function(e,t){fA(this),this.i=null,e=mA(this,e);var A=this.g.get(e);return A||this.g.set(e,A=[]),A.push(t),this.h+=1,this},n.forEach=function(e,t){fA(this),this.g.forEach((function(A,n){I(A,(function(A){e.call(t,A,n,this)}),this)}),this)},n.T=function(){fA(this);for(var e=this.g.R(),t=this.g.T(),A=[],n=0;n<t.length;n++)for(var r=e[n],s=0;s<r.length;s++)A.push(t[n]);return A},n.R=function(e){fA(this);var t=[];if("string"===typeof e)pA(this,e)&&(t=T(t,this.g.get(mA(this,e))));else{e=this.g.R();for(var A=0;A<e.length;A++)t=T(t,e[A])}return t},n.set=function(e,t){return fA(this),this.i=null,e=mA(this,e),pA(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},n.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),A=0;A<t.length;A++){var n=t[A],r=encodeURIComponent(String(n));n=this.R(n);for(var s=0;s<n.length;s++){var i=r;""!==n[s]&&(i+="="+encodeURIComponent(String(n[s]))),e.push(i)}}return this.i=e.join("&")};var yA=class{constructor(e,t){this.h=e,this.g=t}};function CA(e){this.l=e||vA,h.PerformanceNavigationTiming?(e=h.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(h.g&&h.g.Ea&&h.g.Ea()&&h.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vA=10;function QA(e){return!!e.h||!!e.g&&e.g.size>=e.j}function _A(e){return e.h?1:e.g?e.g.size:0}function FA(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function UA(e,t){e.g?e.g.add(t):e.h=t}function EA(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function IA(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const A of e.g.values())t=t.concat(A.D);return t}return S(e.i)}function bA(){}function TA(){this.g=new bA}function SA(e,t,A){const n=A||"";try{Vt(e,(function(e,A){let r=e;g(e)&&(r=He(e)),t.push(n+A+"="+encodeURIComponent(r))}))}catch(r){throw t.push(n+"type="+encodeURIComponent("_badmap")),r}}function DA(e,t){const A=new tt;if(h.Image){const n=new Image;n.onload=v(xA,A,n,"TestLoadImage: loaded",!0,t),n.onerror=v(xA,A,n,"TestLoadImage: error",!1,t),n.onabort=v(xA,A,n,"TestLoadImage: abort",!1,t),n.ontimeout=v(xA,A,n,"TestLoadImage: timeout",!1,t),h.setTimeout((function(){n.ontimeout&&n.ontimeout()}),1e4),n.src=e}else t(!1)}function xA(e,t,A,n,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(n)}catch(s){}}function HA(e){this.l=e.$b||null,this.j=e.ib||!1}function kA(e,t){Se.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=LA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}CA.prototype.cancel=function(){if(this.i=IA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},bA.prototype.stringify=function(e){return h.JSON.stringify(e,void 0)},bA.prototype.parse=function(e){return h.JSON.parse(e,void 0)},Q(HA,mt),HA.prototype.g=function(){return new kA(this.l,this.j)},HA.prototype.i=function(e){return function(){return e}}({}),Q(kA,Se);var LA=0;function NA(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function RA(e){e.readyState=4,e.l=null,e.j=null,e.A=null,MA(e)}function MA(e){e.onreadystatechange&&e.onreadystatechange.call(e)}n=kA.prototype,n.open=function(e,t){if(this.readyState!=LA)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,MA(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||h).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},n.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,RA(this)),this.readyState=LA},n.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,MA(this)),this.g&&(this.readyState=3,MA(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof h.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NA(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},n.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?RA(this):MA(this),3==this.readyState&&NA(this)}},n.Ua=function(e){this.g&&(this.response=this.responseText=e,RA(this))},n.Ta=function(e){this.g&&(this.response=e,RA(this))},n.ha=function(){this.g&&RA(this)},n.setRequestHeader=function(e,t){this.v.append(e,t)},n.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var A=t.next();!A.done;)A=A.value,e.push(A[0]+": "+A[1]),A=t.next();return e.join("\r\n")},Object.defineProperty(kA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var OA=h.JSON.parse;function PA(e){Se.call(this),this.headers=new Gt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=KA,this.K=this.L=!1}Q(PA,Se);var KA="",VA=/^https?$/i,GA=["POST","PUT"];function qA(e){return j&&re()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function WA(e){return"content-type"==e.toLowerCase()}function jA(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,JA(e),XA(e)}function JA(e){e.D||(e.D=!0,De(e,"complete"),De(e,"error"))}function YA(e){if(e.h&&"undefined"!=typeof l&&(!e.C[1]||4!=$A(e)||2!=e.ba()))if(e.v&&4==$A(e))Je(e.Fa,0,e);else if(De(e,"readystatechange"),4==$A(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var A;if(!(A=t)){var n;if(n=0===a){var r=String(e.H).match(jt)[1]||null;if(!r&&h.self&&h.self.location){var s=h.self.location.protocol;r=s.substr(0,s.length-1)}n=!VA.test(r?r.toLowerCase():"")}A=n}if(A)De(e,"complete"),De(e,"success");else{e.m=6;try{var i=2<$A(e)?e.g.statusText:""}catch(o){i=""}e.j=i+" ["+e.ba()+"]",JA(e)}}finally{XA(e)}}}function XA(e,t){if(e.g){zA(e);const n=e.g,r=e.C[0]?d:null;e.g=null,e.C=null,t||De(e,"ready");try{n.onreadystatechange=r}catch(A){}}}function zA(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(h.clearTimeout(e.A),e.A=null)}function $A(e){return e.g?e.g.readyState:0}function ZA(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case KA:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function en(e){let t="";return M(e,(function(e,A){t+=A,t+=":",t+=e,t+="\r\n"})),t}function tn(e,t,A){e:{for(n in A){var n=!1;break e}n=!0}n||(A=en(A),"string"===typeof e?null!=A&&encodeURIComponent(String(A)):tA(e,t,A))}function An(e,t,A){return A&&A.internalChannelParams&&A.internalChannelParams[e]||t}function nn(e){this.za=0,this.l=[],this.h=new tt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=An("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=An("baseRetryDelayMs",5e3,e),this.$a=An("retryDelaySeedMs",1e4,e),this.Ya=An("forwardChannelMaxRetries",2,e),this.ra=An("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new CA(e&&e.concurrentRequestLimit),this.Ca=new TA,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function rn(e){if(on(e),3==e.G){var t=e.V++,A=Xt(e.F);tA(A,"SID",e.J),tA(A,"RID",t),tA(A,"TYPE","terminate"),hn(e,A),t=new Ut(e,e.h,t,void 0),t.K=2,t.v=AA(Xt(A)),A=!1,h.navigator&&h.navigator.sendBeacon&&(A=h.navigator.sendBeacon(t.v.toString(),"")),!A&&h.Image&&((new Image).src=t.v,A=!0),A||(t.g=_n(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Lt(t)}vn(e)}function sn(e){e.g&&(pn(e),e.g.cancel(),e.g=null)}function on(e){sn(e),e.u&&(h.clearTimeout(e.u),e.u=null),mn(e),e.i.cancel(),e.m&&("number"===typeof e.m&&h.clearTimeout(e.m),e.m=null)}function an(e,t){e.l.push(new yA(e.Za++,t)),3==e.G&&cn(e)}function cn(e){QA(e.i)||e.m||(e.m=!0,Pe(e.Ha,e),e.C=0)}function un(e,t){return!(_A(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=gt(C(e.Ha,e,t),yn(e,e.C)),e.C++,!0))}function ln(e,t){var A;A=t?t.m:e.V++;const n=Xt(e.F);tA(n,"SID",e.J),tA(n,"RID",A),tA(n,"AID",e.U),hn(e,n),e.o&&e.s&&tn(n,e.o,e.s),A=new Ut(e,e.h,A,e.C+1),null===e.o&&(A.H=e.s),t&&(e.l=t.D.concat(e.l)),t=dn(e,A,1e3),A.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),UA(e.i,A),St(A,n,t)}function hn(e,t){e.j&&Vt({},(function(e,A){tA(t,A,e)}))}function dn(e,t,A){A=Math.min(e.l.length,A);var n=e.j?C(e.j.Oa,e.j,e):null;e:{var r=e.l;let t=-1;for(;;){const e=["count="+A];-1==t?0<A?(t=r[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let i=0;i<A;i++){let A=r[i].h;const o=r[i].g;if(A-=t,0>A)t=Math.max(0,r[i].h-100),s=!1;else try{SA(o,e,"req"+A+"_")}catch(er){n&&n(o)}}if(s){n=e.join("&");break e}}}return e=e.l.splice(0,A),t.D=e,n}function fn(e){e.g||e.u||(e.Y=1,Pe(e.Ga,e),e.A=0)}function gn(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=gt(C(e.Ga,e),yn(e,e.A)),e.A++,!0)}function pn(e){null!=e.B&&(h.clearTimeout(e.B),e.B=null)}function Bn(e){e.g=new Ut(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Xt(e.oa);tA(t,"RID","rpc"),tA(t,"SID",e.J),tA(t,"CI",e.N?"0":"1"),tA(t,"AID",e.U),hn(e,t),tA(t,"TYPE","xmlhttp"),e.o&&e.s&&tn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var A=e.g;e=e.la,A.K=1,A.v=AA(Xt(t)),A.s=null,A.U=!0,Dt(A,e)}function mn(e){null!=e.v&&(h.clearTimeout(e.v),e.v=null)}function wn(e,t){var A=null;if(e.g==t){mn(e),pn(e),e.g=null;var n=2}else{if(!FA(e.i,t))return;A=t.D,EA(e.i,t),n=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==n){A=t.s?t.s.length:0,t=Date.now()-t.F;var r=e.C;n=ct(),De(n,new ft(n,A,t,r)),cn(e)}else fn(e);else if(r=t.o,3==r||0==r&&0<e.I||!(1==n&&un(e,t)||2==n&&gn(e)))switch(A&&0<A.length&&(t=e.i,t.i=t.i.concat(A)),r){case 1:Cn(e,5);break;case 4:Cn(e,10);break;case 3:Cn(e,6);break;default:Cn(e,2)}}function yn(e,t){let A=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(A*=2),A*t}function Cn(e,t){if(e.h.info("Error code "+t),2==t){var A=null;e.j&&(A=null);var n=C(e.jb,e);A||(A=new Yt("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||zt(A,"https"),AA(A)),DA(A.toString(),n)}else dt(2);e.G=0,e.j&&e.j.va(t),vn(e),on(e)}function vn(e){e.G=0,e.I=-1,e.j&&(0==IA(e.i).length&&0==e.l.length||(e.i.i.length=0,S(e.l),e.l.length=0),e.j.ua())}function Qn(e,t,A){let n=nA(A);if(""!=n.i)t&&$t(n,t+"."+n.i),Zt(n,n.m);else{const e=h.location;n=rA(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,A)}return e.aa&&M(e.aa,(function(e,t){tA(n,t,e)})),t=e.D,A=e.sa,t&&A&&tA(n,t,A),tA(n,"VER",e.ma),hn(e,n),n}function _n(e,t,A){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=A&&e.Ba&&!e.qa?new PA(new HA({ib:!0})):new PA(e.qa),t.L=e.H,t}function Fn(){}function Un(){if(j&&!(10<=Number(ie)))throw Error("Environmental error: no available transport.")}function En(e,t){Se.call(this),this.g=new nn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!D(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!D(t)&&(this.g.D=t,e=this.h,null!==e&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Tn(this)}function In(e){Qt.call(this);var t=e.__sm__;if(t){e:{for(const A in t){e=A;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function bn(){_t.call(this),this.status=1}function Tn(e){this.g=e}n=PA.prototype,n.ea=function(e,t,A,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ct.g(),this.C=this.u?wt(this.u):wt(Ct),this.g.onreadystatechange=C(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void jA(this,s)}e=A||"";const r=new Gt(this.headers);n&&Vt(n,(function(e,t){r.set(t,e)})),n=b(r.T()),A=h.FormData&&e instanceof h.FormData,!(0<=E(GA,t))||n||A||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zA(this),0<this.B&&((this.K=qA(this.g))?(this.g.timeout=this.B,this.g.ontimeout=C(this.pa,this)):this.A=Je(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){jA(this,s)}},n.pa=function(){"undefined"!=typeof l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,De(this,"timeout"),this.abort(8))},n.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,De(this,"complete"),De(this,"abort"),XA(this))},n.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),XA(this,!0)),PA.Z.M.call(this)},n.Fa=function(){this.s||(this.F||this.v||this.l?YA(this):this.cb())},n.cb=function(){YA(this)},n.ba=function(){try{return 2<$A(this)?this.g.status:-1}catch(e){return-1}},n.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},n.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),OA(t)}},n.Da=function(){return this.m},n.La=function(){return"string"===typeof this.j?this.j:String(this.j)},n=nn.prototype,n.ma=8,n.G=1,n.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},n.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new Ut(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=O(s),K(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,A=0;A<this.l.length;A++){var n=this.l[A];if(n="__data__"in n.g&&(n=n.g.__data__,"string"===typeof n)?n.length:void 0,void 0===n)break;if(t+=n,4096<t){t=A;break e}if(4096===t||A===this.l.length-1){t=A+1;break e}}t=1e3}else t=1e3;t=dn(this,r,t),A=Xt(this.F),tA(A,"RID",e),tA(A,"CVER",22),this.D&&tA(A,"X-HTTP-Session-Id",this.D),hn(this,A),this.o&&s&&tn(A,this.o,s),UA(this.i,r),this.Ra&&tA(A,"TYPE","init"),this.ja?(tA(A,"$req",t),tA(A,"SID","null"),r.$=!0,St(r,A,null)):St(r,A,t),this.G=2}}else 3==this.G&&(e?ln(this,e):0==this.l.length||QA(this.i)||ln(this))},n.Ga=function(){if(this.u=null,Bn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=gt(C(this.bb,this),e)}},n.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,dt(10),sn(this),Bn(this))},n.ab=function(){null!=this.v&&(this.v=null,sn(this),gn(this),dt(19))},n.jb=function(e){e?(this.h.info("Successfully pinged google.com"),dt(2)):(this.h.info("Failed to ping google.com"),dt(1))},n=Fn.prototype,n.xa=function(){},n.wa=function(){},n.va=function(){},n.ua=function(){},n.Oa=function(){},Un.prototype.g=function(e,t){return new En(e,t)},Q(En,Se),En.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,A=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Pe(C(e.hb,e,t))),dt(0),e.W=t,e.aa=A||{},e.N=e.X,e.F=Qn(e,null,e.W),cn(e)},En.prototype.close=function(){rn(this.g)},En.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,an(this.g,t)}else this.v?(t={},t.__data__=He(e),an(this.g,t)):an(this.g,e)},En.prototype.M=function(){this.g.j=null,delete this.j,rn(this.g),delete this.g,En.Z.M.call(this)},Q(In,Qt),Q(bn,_t),Q(Tn,Fn),Tn.prototype.xa=function(){De(this.g,"a")},Tn.prototype.wa=function(e){De(this.g,new In(e))},Tn.prototype.va=function(e){De(this.g,new bn(e))},Tn.prototype.ua=function(){De(this.g,"b")},Un.prototype.createWebChannel=Un.prototype.g,En.prototype.send=En.prototype.u,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,Bt.COMPLETE="complete",yt.EventType=vt,vt.OPEN="a",vt.CLOSE="b",vt.ERROR="c",vt.MESSAGE="d",Se.prototype.listen=Se.prototype.N,PA.prototype.listenOnce=PA.prototype.O,PA.prototype.getLastError=PA.prototype.La,PA.prototype.getLastErrorCode=PA.prototype.Da,PA.prototype.getStatus=PA.prototype.ba,PA.prototype.getResponseJson=PA.prototype.Qa,PA.prototype.getResponseText=PA.prototype.ga,PA.prototype.send=PA.prototype.ea;var Sn=u.createWebChannelTransport=function(){return new Un},Dn=u.getStatEventTarget=function(){return ct()},xn=u.ErrorCode=pt,Hn=u.EventType=Bt,kn=u.Event=ot,Ln=u.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Nn=u.FetchXmlHttpFactory=HA,Rn=u.WebChannel=yt,Mn=u.XhrIo=PA;const On="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Kn="9.8.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new o.Yd("@firebase/firestore");function Gn(){return Vn.logLevel}function qn(e){Vn.setLogLevel(e)}function Wn(e,...t){if(Vn.logLevel<=o["in"].DEBUG){const A=t.map(Yn);Vn.debug(`Firestore (${Kn}): ${e}`,...A)}}function jn(e,...t){if(Vn.logLevel<=o["in"].ERROR){const A=t.map(Yn);Vn.error(`Firestore (${Kn}): ${e}`,...A)}}function Jn(e,...t){if(Vn.logLevel<=o["in"].WARN){const A=t.map(Yn);Vn.warn(`Firestore (${Kn}): ${e}`,...A)}}function Yn(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e="Unexpected state"){const t=`FIRESTORE (${Kn}) INTERNAL ASSERTION FAILED: `+e;throw jn(t),new Error(t)}function zn(e,t){e||Xn()}function $n(e,t){e||Xn()}function Zn(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tr extends a.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pn.UNAUTHENTICATED)))}shutdown(){}}class sr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ir{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let A=this.i;const n=e=>this.i!==A?(A=this.i,t(e)):Promise.resolve();let r=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ar,e.enqueueRetryable((()=>n(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await n(this.currentUser)}))},i=e=>{Wn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>i(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(Wn("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ar)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Wn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(zn("string"==typeof t.accessToken),new nr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zn(null===e||"string"==typeof e),new Pn(e)}}class or{constructor(e,t,A){this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const n=e.auth.getAuthHeaderValueForFirstParty([]);n&&this.headers.set("Authorization",n),A&&this.headers.set("X-Goog-Iam-Authorization-Token",A)}}class ar{constructor(e,t,A){this.h=e,this.l=t,this.m=A}getToken(){return Promise.resolve(new or(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ur{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const A=e=>{null!=e.error&&Wn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const A=e.token!==this.p;return this.p=e.token,Wn("FirebaseAppCheckTokenProvider",`Received ${A?"new":"existing"} token.`),A?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>A(t)))};const n=e=>{Wn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>n(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?n(e):Wn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(zn("string"==typeof e.token),this.p=e.token,new cr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),A=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(A);else for(let n=0;n<e;n++)A[n]=Math.floor(256*Math.random());return A}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.A=-1;class dr{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let A="";for(;A.length<20;){const n=hr(40);for(let r=0;r<n.length;++r)A.length<20&&n[r]<t&&(A+=e.charAt(n[r]%e.length))}return A}}function fr(e,t){return e<t?-1:e>t?1:0}function gr(e,t,A){return e.length===t.length&&e.every(((e,n)=>A(e,t[n])))}function pr(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tr(er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tr(er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new tr(er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tr(er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Br.fromMillis(Date.now())}static fromDate(e){return Br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),A=Math.floor(1e6*(e-1e3*t));return new Br(t,A)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fr(this.nanoseconds,e.nanoseconds):fr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mr(e)}static min(){return new mr(new Br(0,0))}static max(){return new mr(new Br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(e){let t=0;for(const A in e)Object.prototype.hasOwnProperty.call(e,A)&&t++;return t}function yr(e,t){for(const A in e)Object.prototype.hasOwnProperty.call(e,A)&&t(A,e[A])}function Cr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t,A){void 0===t?t=0:t>e.length&&Xn(),void 0===A?A=e.length-t:A>e.length-t&&Xn(),this.segments=e,this.offset=t,this.len=A}get length(){return this.len}isEqual(e){return 0===vr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,A=this.limit();t<A;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const A=Math.min(e.length,t.length);for(let n=0;n<A;n++){const A=e.get(n),r=t.get(n);if(A<r)return-1;if(A>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qr extends vr{construct(e,t,A){return new Qr(e,t,A)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const A of e){if(A.indexOf("//")>=0)throw new tr(er.INVALID_ARGUMENT,`Invalid segment (${A}). Paths must not contain // in them.`);t.push(...A.split("/").filter((e=>e.length>0)))}return new Qr(t)}static emptyPath(){return new Qr([])}}const _r=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends vr{construct(e,t,A){return new Fr(e,t,A)}static isValidIdentifier(e){return _r.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const t=[];let A="",n=0;const r=()=>{if(0===A.length)throw new tr(er.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(A),A=""};let s=!1;for(;n<e.length;){const t=e[n];if("\\"===t){if(n+1===e.length)throw new tr(er.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new tr(er.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);A+=t,n+=2}else"`"===t?(s=!s,n++):"."!==t||s?(A+=t,n++):(r(),n++)}if(r(),s)throw new tr(er.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(t)}static emptyPath(){return new Fr([])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.fields=e,e.sort(Fr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(e){let t="";for(let A=0;A<e.length;++A)t+=String.fromCharCode(e[A]);return t}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let A=0;A<e.length;A++)t[A]=e.charCodeAt(A);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const br=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(e){if(zn(!!e),"string"==typeof e){let t=0;const A=br.exec(e);if(zn(!!A),A[1]){let e=A[1];e=(e+"000000000").substr(0,9),t=Number(e)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Sr(e.seconds),nanos:Sr(e.nanos)}}function Sr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Dr(e){return"string"==typeof e?Ir.fromBase64String(e):Ir.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(e){var t,A;return"server_timestamp"===(null===(A=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===A?void 0:A.stringValue)}function Hr(e){const t=e.mapValue.fields.__previous_value__;return xr(t)?Hr(t):t}function kr(e){const t=Tr(e.mapValue.fields.__local_write_time__.timestampValue);return new Br(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t,A,n,r,s,i,o){this.databaseId=e,this.appId=t,this.persistenceKey=A,this.host=n,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=i,this.useFetchStreams=o}}class Nr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nr&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(e){return null==e}function Mr(e){return 0===e&&1/e==-1/0}function Or(e){return"number"==typeof e&&Number.isInteger(e)&&!Mr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.path=e}static fromPath(e){return new Pr(Qr.fromString(e))}static fromName(e){return new Pr(Qr.fromString(e).popFirst(5))}static empty(){return new Pr(Qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pr(new Qr(e.slice()))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vr={nullValue:"NULL_VALUE"};function Gr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xr(e)?4:rs(e)?9007199254740991:10:Xn()}function qr(e,t){if(e===t)return!0;const A=Gr(e);if(A!==Gr(t))return!1;switch(A){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kr(e).isEqual(kr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const A=Tr(e.timestampValue),n=Tr(t.timestampValue);return A.seconds===n.seconds&&A.nanos===n.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Dr(e.bytesValue).isEqual(Dr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Sr(e.geoPointValue.latitude)===Sr(t.geoPointValue.latitude)&&Sr(e.geoPointValue.longitude)===Sr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Sr(e.integerValue)===Sr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const A=Sr(e.doubleValue),n=Sr(t.doubleValue);return A===n?Mr(A)===Mr(n):isNaN(A)&&isNaN(n)}return!1}(e,t);case 9:return gr(e.arrayValue.values||[],t.arrayValue.values||[],qr);case 10:return function(e,t){const A=e.mapValue.fields||{},n=t.mapValue.fields||{};if(wr(A)!==wr(n))return!1;for(const r in A)if(A.hasOwnProperty(r)&&(void 0===n[r]||!qr(A[r],n[r])))return!1;return!0}(e,t);default:return Xn()}}function Wr(e,t){return void 0!==(e.values||[]).find((e=>qr(e,t)))}function jr(e,t){if(e===t)return 0;const A=Gr(e),n=Gr(t);if(A!==n)return fr(A,n);switch(A){case 0:case 9007199254740991:return 0;case 1:return fr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const A=Sr(e.integerValue||e.doubleValue),n=Sr(t.integerValue||t.doubleValue);return A<n?-1:A>n?1:A===n?0:isNaN(A)?isNaN(n)?0:-1:1}(e,t);case 3:return Jr(e.timestampValue,t.timestampValue);case 4:return Jr(kr(e),kr(t));case 5:return fr(e.stringValue,t.stringValue);case 6:return function(e,t){const A=Dr(e),n=Dr(t);return A.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const A=e.split("/"),n=t.split("/");for(let r=0;r<A.length&&r<n.length;r++){const e=fr(A[r],n[r]);if(0!==e)return e}return fr(A.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const A=fr(Sr(e.latitude),Sr(t.latitude));return 0!==A?A:fr(Sr(e.longitude),Sr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const A=e.values||[],n=t.values||[];for(let r=0;r<A.length&&r<n.length;++r){const e=jr(A[r],n[r]);if(e)return e}return fr(A.length,n.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Kr.mapValue&&t===Kr.mapValue)return 0;if(e===Kr.mapValue)return 1;if(t===Kr.mapValue)return-1;const A=e.fields||{},n=Object.keys(A),r=t.fields||{},s=Object.keys(r);n.sort(),s.sort();for(let i=0;i<n.length&&i<s.length;++i){const e=fr(n[i],s[i]);if(0!==e)return e;const t=jr(A[n[i]],r[s[i]]);if(0!==t)return t}return fr(n.length,s.length)}(e.mapValue,t.mapValue);default:throw Xn()}}function Jr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fr(e,t);const A=Tr(e),n=Tr(t),r=fr(A.seconds,n.seconds);return 0!==r?r:fr(A.nanos,n.nanos)}function Yr(e){return Xr(e)}function Xr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Tr(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Dr(e.bytesValue).toBase64():"referenceValue"in e?(A=e.referenceValue,Pr.fromName(A).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",A=!0;for(const n of e.values||[])A?A=!1:t+=",",t+=Xr(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let A="{",n=!0;for(const r of t)n?n=!1:A+=",",A+=`${r}:${Xr(e.fields[r])}`;return A+"}"}(e.mapValue):Xn();var t,A}function zr(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function $r(e){return!!e&&"integerValue"in e}function Zr(e){return!!e&&"arrayValue"in e}function es(e){return!!e&&"nullValue"in e}function ts(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function As(e){return!!e&&"mapValue"in e}function ns(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return yr(e.mapValue.fields,((e,A)=>t.mapValue.fields[e]=ns(A))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let A=0;A<(e.arrayValue.values||[]).length;++A)t.arrayValue.values[A]=ns(e.arrayValue.values[A]);return t}return Object.assign({},e)}function rs(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ss(e){return"nullValue"in e?Vr:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?zr(Nr.empty(),Pr.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Xn()}function is(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?zr(Nr.empty(),Pr.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Kr:Xn()}function os(e,t){const A=jr(e.value,t.value);return 0!==A?A:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function as(e,t){const A=jr(e.value,t.value);return 0!==A?A:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.value=e}static empty(){return new cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let A=0;A<e.length-1;++A)if(t=(t.mapValue.fields||{})[e.get(A)],!As(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ns(t)}setAll(e){let t=Fr.emptyPath(),A={},n=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,A,n),A={},n=[],t=r.popLast()}e?A[r.lastSegment()]=ns(e):n.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,A,n)}delete(e){const t=this.field(e.popLast());As(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let A=0;A<e.length;++A){let n=t.mapValue.fields[e.get(A)];As(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(A)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,A){yr(t,((t,A)=>e[t]=A));for(const n of A)delete e[n]}clone(){return new cs(ns(this.value))}}function us(e){const t=[];return yr(e.fields,((e,A)=>{const n=new Fr([e]);if(As(A)){const e=us(A.mapValue).fields;if(0===e.length)t.push(n);else for(const A of e)t.push(n.child(A))}else t.push(n)})),new Ur(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ls{constructor(e,t,A,n,r,s){this.key=e,this.documentType=t,this.version=A,this.readTime=n,this.data=r,this.documentState=s}static newInvalidDocument(e){return new ls(e,0,mr.min(),mr.min(),cs.empty(),0)}static newFoundDocument(e,t,A){return new ls(e,1,t,mr.min(),A,0)}static newNoDocument(e,t){return new ls(e,2,t,mr.min(),cs.empty(),0)}static newUnknownDocument(e,t){return new ls(e,3,t,mr.min(),cs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hs{constructor(e,t,A,n){this.indexId=e,this.collectionGroup=t,this.fields=A,this.indexState=n}}function ds(e){return e.fields.find((e=>2===e.kind))}function fs(e){return e.fields.filter((e=>2!==e.kind))}hs.UNKNOWN_ID=-1;class gs{constructor(e,t){this.fieldPath=e,this.kind=t}}class ps{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ps(0,ws.min())}}function Bs(e,t){const A=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,r=mr.fromTimestamp(1e9===n?new Br(A+1,0):new Br(A,n));return new ws(r,Pr.empty(),t)}function ms(e){return new ws(e.readTime,e.key,-1)}class ws{constructor(e,t,A){this.readTime=e,this.documentKey=t,this.largestBatchId=A}static min(){return new ws(mr.min(),Pr.empty(),-1)}static max(){return new ws(mr.max(),Pr.empty(),-1)}}function ys(e,t){let A=e.readTime.compareTo(t.readTime);return 0!==A?A:(A=Pr.comparator(e.documentKey,t.documentKey),0!==A?A:fr(e.largestBatchId,t.largestBatchId))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t){this.comparator=e,this.root=t||Qs.EMPTY}insert(e,t){return new Cs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qs.BLACK,null,null))}remove(e){return new Cs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const A=this.comparator(e,t.key);if(0===A)return t.value;A<0?t=t.left:A>0&&(t=t.right)}return null}indexOf(e){let t=0,A=this.root;for(;!A.isEmpty();){const n=this.comparator(e,A.key);if(0===n)return t+A.left.size;n<0?A=A.left:(t+=A.left.size+1,A=A.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,A)=>(e(t,A),!1)))}toString(){const e=[];return this.inorderTraversal(((t,A)=>(e.push(`${t}:${A}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vs(this.root,e,this.comparator,!1)}getReverseIterator(){return new vs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vs(this.root,e,this.comparator,!0)}}class vs{constructor(e,t,A,n){this.isReverse=n,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?A(e.key,t):1,t&&n&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qs{constructor(e,t,A,n,r){this.key=e,this.value=t,this.color=null!=A?A:Qs.RED,this.left=null!=n?n:Qs.EMPTY,this.right=null!=r?r:Qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,A,n,r){return new Qs(null!=e?e:this.key,null!=t?t:this.value,null!=A?A:this.color,null!=n?n:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,A){let n=this;const r=A(e,n.key);return n=r<0?n.copy(null,null,null,n.left.insert(e,t,A),null):0===r?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,A)),n.fixUp()}removeMin(){if(this.left.isEmpty())return Qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let A,n=this;if(t(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return Qs.EMPTY;A=n.right.min(),n=n.copy(A.key,A.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xn();if(this.right.isRed())throw Xn();const e=this.left.check();if(e!==this.right.check())throw Xn();return e+(this.isRed()?0:1)}}Qs.EMPTY=null,Qs.RED=!0,Qs.BLACK=!1,Qs.EMPTY=new class{constructor(){this.size=0}get key(){throw Xn()}get value(){throw Xn()}get color(){throw Xn()}get left(){throw Xn()}get right(){throw Xn()}copy(e,t,A,n,r){return this}insert(e,t,A){return new Qs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _s{constructor(e){this.comparator=e,this.data=new Cs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,A)=>(e(t),!1)))}forEachInRange(e,t){const A=this.data.getIteratorFrom(e[0]);for(;A.hasNext();){const n=A.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let A;for(A=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();A.hasNext();)if(!e(A.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fs(this.data.getIterator())}getIteratorFrom(e){return new Fs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof _s))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),A=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=A.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _s(this.comparator);return t.data=e,t}}class Fs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Us(e){return e.hasNext()?e.getNext():void 0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t=null,A=[],n=[],r=null,s=null,i=null){this.path=e,this.collectionGroup=t,this.orderBy=A,this.filters=n,this.limit=r,this.startAt=s,this.endAt=i,this.P=null}}function Is(e,t=null,A=[],n=[],r=null,s=null,i=null){return new Es(e,t,A,n,r,s,i)}function bs(e){const t=Zn(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+Yr(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Rr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Yr(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Yr(e))).join(",")),t.P=e}return t.P}function Ts(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Yr(t.value)}`;var t})).join(", ")}]`),Rr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Yr(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Yr(e))).join(",")),`Target(${t})`}function Ss(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!js(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(A=e.filters[r],n=t.filters[r],A.op!==n.op||!A.field.isEqual(n.field)||!qr(A.value,n.value))return!1;var A,n;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ys(e.startAt,t.startAt)&&Ys(e.endAt,t.endAt)}function Ds(e){return Pr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function xs(e,t){return e.filters.filter((e=>e instanceof Ls&&e.field.isEqual(t)))}function Hs(e,t,A){let n=Vr,r=!0;for(const s of xs(e,t)){let e=Vr,t=!0;switch(s.op){case"<":case"<=":e=ss(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Vr}os({value:n,inclusive:r},{value:e,inclusive:t})<0&&(n=e,r=t)}if(null!==A)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=A.position[s];os({value:n,inclusive:r},{value:e,inclusive:A.inclusive})<0&&(n=e,r=A.inclusive);break}return{value:n,inclusive:r}}function ks(e,t,A){let n=Kr,r=!0;for(const s of xs(e,t)){let e=Kr,t=!0;switch(s.op){case">=":case">":e=is(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Kr}as({value:n,inclusive:r},{value:e,inclusive:t})>0&&(n=e,r=t)}if(null!==A)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=A.position[s];as({value:n,inclusive:r},{value:e,inclusive:A.inclusive})>0&&(n=e,r=A.inclusive);break}return{value:n,inclusive:r}}class Ls extends class{}{constructor(e,t,A){super(),this.field=e,this.op=t,this.value=A}static create(e,t,A){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,A):new Ns(e,t,A):"array-contains"===t?new Ps(e,A):"in"===t?new Ks(e,A):"not-in"===t?new Vs(e,A):"array-contains-any"===t?new Gs(e,A):new Ls(e,t,A)}static V(e,t,A){return"in"===t?new Rs(e,A):new Ms(e,A)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(jr(t,this.value)):null!==t&&Gr(this.value)===Gr(t)&&this.v(jr(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xn()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ns extends Ls{constructor(e,t,A){super(e,t,A),this.key=Pr.fromName(A.referenceValue)}matches(e){const t=Pr.comparator(e.key,this.key);return this.v(t)}}class Rs extends Ls{constructor(e,t){super(e,"in",t),this.keys=Os("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ms extends Ls{constructor(e,t){super(e,"not-in",t),this.keys=Os("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Os(e,t){var A;return((null===(A=t.arrayValue)||void 0===A?void 0:A.values)||[]).map((e=>Pr.fromName(e.referenceValue)))}class Ps extends Ls{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zr(t)&&Wr(t.arrayValue,this.value)}}class Ks extends Ls{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wr(this.value.arrayValue,t)}}class Vs extends Ls{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wr(this.value.arrayValue,t)}}class Gs extends Ls{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zr(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Wr(this.value.arrayValue,e)))}}class qs{constructor(e,t){this.position=e,this.inclusive=t}}class Ws{constructor(e,t="asc"){this.field=e,this.dir=t}}function js(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Js(e,t,A){let n=0;for(let r=0;r<e.position.length;r++){const s=t[r],i=e.position[r];if(n=s.field.isKeyField()?Pr.comparator(Pr.fromName(i.referenceValue),A.key):jr(i,A.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function Ys(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let A=0;A<e.position.length;A++)if(!qr(e.position[A],t.position[A]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t=null,A=[],n=[],r=null,s="F",i=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=A,this.filters=n,this.limit=r,this.limitType=s,this.startAt=i,this.endAt=o,this.D=null,this.C=null,this.startAt,this.endAt}}function zs(e,t,A,n,r,s,i,o){return new Xs(e,t,A,n,r,s,i,o)}function $s(e){return new Xs(e)}function Zs(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ei(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ti(e){for(const t of e.filters)if(t.S())return t.field;return null}function Ai(e){return null!==e.collectionGroup}function ni(e){const t=Zn(e);if(null===t.D){t.D=[];const e=ti(t),A=ei(t);if(null!==e&&null===A)e.isKeyField()||t.D.push(new Ws(e)),t.D.push(new Ws(Fr.keyField(),"asc"));else{let e=!1;for(const A of t.explicitOrderBy)t.D.push(A),A.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Ws(Fr.keyField(),e))}}}return t.D}function ri(e){const t=Zn(e);if(!t.C)if("F"===t.limitType)t.C=Is(t.path,t.collectionGroup,ni(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of ni(t)){const t="desc"===r.dir?"asc":"desc";e.push(new Ws(r.field,t))}const A=t.endAt?new qs(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new qs(t.startAt.position,t.startAt.inclusive):null;t.C=Is(t.path,t.collectionGroup,e,t.filters,t.limit,A,n)}return t.C}function si(e,t,A){return new Xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,A,e.startAt,e.endAt)}function ii(e,t){return Ss(ri(e),ri(t))&&e.limitType===t.limitType}function oi(e){return`${bs(ri(e))}|lt:${e.limitType}`}function ai(e){return`Query(target=${Ts(ri(e))}; limitType=${e.limitType})`}function ci(e,t){return t.isFoundDocument()&&function(e,t){const A=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(A):Pr.isDocumentKey(e.path)?e.path.isEqual(A):e.path.isImmediateParentOf(A)}(e,t)&&function(e,t){for(const A of e.explicitOrderBy)if(!A.field.isKeyField()&&null===t.data.field(A.field))return!1;return!0}(e,t)&&function(e,t){for(const A of e.filters)if(!A.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,A){const n=Js(e,t,A);return e.inclusive?n<=0:n<0}(e.startAt,ni(e),t))&&!(e.endAt&&!function(e,t,A){const n=Js(e,t,A);return e.inclusive?n>=0:n>0}(e.endAt,ni(e),t))}(e,t)}function ui(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function li(e){return(t,A)=>{let n=!1;for(const r of ni(e)){const e=hi(r,t,A);if(0!==e)return e;n=n||r.field.isKeyField()}return 0}}function hi(e,t,A){const n=e.field.isKeyField()?Pr.comparator(t.key,A.key):function(e,t,A){const n=t.data.field(e),r=A.data.field(e);return null!==n&&null!==r?jr(n,r):Xn()}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.field,t,A);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Xn()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mr(t)?"-0":t}}function fi(e){return{integerValue:""+e}}function gi(e,t){return Or(t)?fi(t):di(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this._=void 0}}function Bi(e,t,A){return e instanceof yi?function(e,t){const A={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(A.fields.__previous_value__=t),{mapValue:A}}(A,t):e instanceof Ci?vi(e,t):e instanceof Qi?_i(e,t):function(e,t){const A=wi(e,t),n=Ui(A)+Ui(e.k);return $r(A)&&$r(e.k)?fi(n):di(e.M,n)}(e,t)}function mi(e,t,A){return e instanceof Ci?vi(e,t):e instanceof Qi?_i(e,t):A}function wi(e,t){return e instanceof Fi?$r(A=t)||function(e){return!!e&&"doubleValue"in e}(A)?t:{integerValue:0}:null;var A}class yi extends pi{}class Ci extends pi{constructor(e){super(),this.elements=e}}function vi(e,t){const A=Ei(t);for(const n of e.elements)A.some((e=>qr(e,n)))||A.push(n);return{arrayValue:{values:A}}}class Qi extends pi{constructor(e){super(),this.elements=e}}function _i(e,t){let A=Ei(t);for(const n of e.elements)A=A.filter((e=>!qr(e,n)));return{arrayValue:{values:A}}}class Fi extends pi{constructor(e,t){super(),this.M=e,this.k=t}}function Ui(e){return Sr(e.integerValue||e.doubleValue)}function Ei(e){return Zr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t){this.field=e,this.transform=t}}function bi(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ci&&t instanceof Ci||e instanceof Qi&&t instanceof Qi?gr(e.elements,t.elements,qr):e instanceof Fi&&t instanceof Fi?qr(e.k,t.k):e instanceof yi&&t instanceof yi}(e.transform,t.transform)}class Ti{constructor(e,t){this.version=e,this.transformResults=t}}class Si{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Di(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xi{}function Hi(e,t,A){e instanceof Mi?function(e,t,A){const n=e.value.clone(),r=Ki(e.fieldTransforms,t,A.transformResults);n.setAll(r),t.convertToFoundDocument(A.version,n).setHasCommittedMutations()}(e,t,A):e instanceof Oi?function(e,t,A){if(!Di(e.precondition,t))return void t.convertToUnknownDocument(A.version);const n=Ki(e.fieldTransforms,t,A.transformResults),r=t.data;r.setAll(Pi(e)),r.setAll(n),t.convertToFoundDocument(A.version,r).setHasCommittedMutations()}(e,t,A):function(e,t,A){t.convertToNoDocument(A.version).setHasCommittedMutations()}(0,t,A)}function ki(e,t,A){e instanceof Mi?function(e,t,A){if(!Di(e.precondition,t))return;const n=e.value.clone(),r=Vi(e.fieldTransforms,A,t);n.setAll(r),t.convertToFoundDocument(Ri(t),n).setHasLocalMutations()}(e,t,A):e instanceof Oi?function(e,t,A){if(!Di(e.precondition,t))return;const n=Vi(e.fieldTransforms,A,t),r=t.data;r.setAll(Pi(e)),r.setAll(n),t.convertToFoundDocument(Ri(t),r).setHasLocalMutations()}(e,t,A):function(e,t){Di(e.precondition,t)&&t.convertToNoDocument(mr.min())}(e,t)}function Li(e,t){let A=null;for(const n of e.fieldTransforms){const e=t.data.field(n.field),r=wi(n.transform,e||null);null!=r&&(null==A&&(A=cs.empty()),A.set(n.field,r))}return A||null}function Ni(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&gr(e,t,((e,t)=>bi(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ri(e){return e.isFoundDocument()?e.version:mr.min()}class Mi extends xi{constructor(e,t,A,n=[]){super(),this.key=e,this.value=t,this.precondition=A,this.fieldTransforms=n,this.type=0}}class Oi extends xi{constructor(e,t,A,n,r=[]){super(),this.key=e,this.data=t,this.fieldMask=A,this.precondition=n,this.fieldTransforms=r,this.type=1}}function Pi(e){const t=new Map;return e.fieldMask.fields.forEach((A=>{if(!A.isEmpty()){const n=e.data.field(A);t.set(A,n)}})),t}function Ki(e,t,A){const n=new Map;zn(e.length===A.length);for(let r=0;r<A.length;r++){const s=e[r],i=s.transform,o=t.data.field(s.field);n.set(s.field,mi(i,o,A[r]))}return n}function Vi(e,t,A){const n=new Map;for(const r of e){const e=r.transform,s=A.data.field(r.field);n.set(r.field,Bi(e,s,t))}return n}class Gi extends xi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class qi extends xi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.count=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji,Ji;function Yi(e){switch(e){default:return Xn();case er.CANCELLED:case er.UNKNOWN:case er.DEADLINE_EXCEEDED:case er.RESOURCE_EXHAUSTED:case er.INTERNAL:case er.UNAVAILABLE:case er.UNAUTHENTICATED:return!1;case er.INVALID_ARGUMENT:case er.NOT_FOUND:case er.ALREADY_EXISTS:case er.PERMISSION_DENIED:case er.FAILED_PRECONDITION:case er.ABORTED:case er.OUT_OF_RANGE:case er.UNIMPLEMENTED:case er.DATA_LOSS:return!0}}function Xi(e){if(void 0===e)return jn("GRPC error has no .code"),er.UNKNOWN;switch(e){case ji.OK:return er.OK;case ji.CANCELLED:return er.CANCELLED;case ji.UNKNOWN:return er.UNKNOWN;case ji.DEADLINE_EXCEEDED:return er.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return er.RESOURCE_EXHAUSTED;case ji.INTERNAL:return er.INTERNAL;case ji.UNAVAILABLE:return er.UNAVAILABLE;case ji.UNAUTHENTICATED:return er.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return er.INVALID_ARGUMENT;case ji.NOT_FOUND:return er.NOT_FOUND;case ji.ALREADY_EXISTS:return er.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return er.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return er.FAILED_PRECONDITION;case ji.ABORTED:return er.ABORTED;case ji.OUT_OF_RANGE:return er.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return er.UNIMPLEMENTED;case ji.DATA_LOSS:return er.DATA_LOSS;default:return Xn()}}(Ji=ji||(ji={}))[Ji.OK=0]="OK",Ji[Ji.CANCELLED=1]="CANCELLED",Ji[Ji.UNKNOWN=2]="UNKNOWN",Ji[Ji.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ji[Ji.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ji[Ji.NOT_FOUND=5]="NOT_FOUND",Ji[Ji.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ji[Ji.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ji[Ji.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ji[Ji.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ji[Ji.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ji[Ji.ABORTED=10]="ABORTED",Ji[Ji.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ji[Ji.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ji[Ji.INTERNAL=13]="INTERNAL",Ji[Ji.UNAVAILABLE=14]="UNAVAILABLE",Ji[Ji.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),A=this.inner[t];if(void 0!==A)for(const[n,r]of A)if(this.equalsFn(n,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const A=this.mapKeyFn(e),n=this.inner[A];if(void 0===n)return this.inner[A]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),A=this.inner[t];if(void 0===A)return!1;for(let n=0;n<A.length;n++)if(this.equalsFn(A[n][0],e))return 1===A.length?delete this.inner[t]:A.splice(n,1),this.innerSize--,!0;return!1}forEach(e){yr(this.inner,((t,A)=>{for(const[n,r]of A)e(n,r)}))}isEmpty(){return Cr(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Cs(Pr.comparator);function Zi(){return $i}const eo=new Cs(Pr.comparator);function to(...e){let t=eo;for(const A of e)t=t.insert(A.key,A);return t}function Ao(){return new zi((e=>e.toString()),((e,t)=>e.isEqual(t)))}const no=new Cs(Pr.comparator),ro=new _s(Pr.comparator);function so(...e){let t=ro;for(const A of e)t=t.add(A);return t}const io=new _s(fr);function oo(){return io}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t,A,n,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=A,this.documentUpdates=n,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t){const A=new Map;return A.set(e,co.createSynthesizedTargetChangeForCurrentChange(e,t)),new ao(mr.min(),A,oo(),Zi(),so())}}class co{constructor(e,t,A,n,r){this.resumeToken=e,this.current=t,this.addedDocuments=A,this.modifiedDocuments=n,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t){return new co(Ir.EMPTY_BYTE_STRING,t,so(),so(),so())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,A,n){this.O=e,this.removedTargetIds=t,this.key=A,this.F=n}}class lo{constructor(e,t){this.targetId=e,this.$=t}}class ho{constructor(e,t,A=Ir.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=A,this.cause=n}}class fo{constructor(){this.B=0,this.L=Bo(),this.U=Ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=so(),t=so(),A=so();return this.L.forEach(((n,r)=>{switch(r){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:A=A.add(n);break;default:Xn()}})),new co(this.U,this.q,e,t,A)}J(){this.K=!1,this.L=Bo()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class go{constructor(e){this.nt=e,this.st=new Map,this.it=Zi(),this.rt=po(),this.ot=new _s(fr)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,(t=>{const A=this.lt(t);switch(e.state){case 0:this.ft(t)&&A.W(e.resumeToken);break;case 1:A.tt(),A.G||A.J(),A.W(e.resumeToken);break;case 2:A.tt(),A.G||this.removeTarget(t);break;case 3:this.ft(t)&&(A.et(),A.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),A.W(e.resumeToken));break;default:Xn()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(((e,A)=>{this.ft(A)&&t(A)}))}_t(e){const t=e.targetId,A=e.$.count,n=this.wt(t);if(n){const e=n.target;if(Ds(e))if(0===A){const A=new Pr(e.path);this.ct(t,A,ls.newNoDocument(A,mr.min()))}else zn(1===A);else this.gt(t)!==A&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach(((A,n)=>{const r=this.wt(n);if(r){if(A.current&&Ds(r.target)){const t=new Pr(r.target.path);null!==this.it.get(t)||this.It(n,t)||this.ct(n,t,ls.newNoDocument(t,e))}A.j&&(t.set(n,A.H()),A.J())}}));let A=so();this.rt.forEach(((e,t)=>{let n=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(n=!1,!1)})),n&&(A=A.add(e))})),this.it.forEach(((t,A)=>A.setReadTime(e)));const n=new ao(e,t,this.ot,this.it,A);return this.it=Zi(),this.rt=po(),this.ot=new _s(fr),n}at(e,t){if(!this.ft(e))return;const A=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,A),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,A){if(!this.ft(e))return;const n=this.lt(e);this.It(e,t)?n.Y(t,1):n.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),A&&(this.it=this.it.insert(t,A))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new fo,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new _s(fr),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Wn("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new fo),this.nt.getRemoteKeysForTarget(e).forEach((t=>{this.ct(e,t,null)}))}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function po(){return new Cs(Pr.comparator)}function Bo(){return new Cs(Pr.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=(()=>{const e={asc:"ASCENDING",desc:"DESCENDING"};return e})(),wo=(()=>{const e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return e})();class yo{constructor(e,t){this.databaseId=e,this.N=t}}function Co(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vo(e,t){return e.N?t.toBase64():t.toUint8Array()}function Qo(e,t){return Co(e,t.toTimestamp())}function _o(e){return zn(!!e),mr.fromTimestamp(function(e){const t=Tr(e);return new Br(t.seconds,t.nanos)}(e))}function Fo(e,t){return function(e){return new Qr(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Uo(e){const t=Qr.fromString(e);return zn($o(t)),t}function Eo(e,t){return Fo(e.databaseId,t.path)}function Io(e,t){const A=Uo(t);if(A.get(1)!==e.databaseId.projectId)throw new tr(er.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+A.get(1)+" vs "+e.databaseId.projectId);if(A.get(3)!==e.databaseId.database)throw new tr(er.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+A.get(3)+" vs "+e.databaseId.database);return new Pr(Do(A))}function bo(e,t){return Fo(e.databaseId,t)}function To(e){const t=Uo(e);return 4===t.length?Qr.emptyPath():Do(t)}function So(e){return new Qr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Do(e){return zn(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xo(e,t,A){return{name:Eo(e,t),fields:A.value.mapValue.fields}}function Ho(e,t,A){const n=Io(e,t.name),r=_o(t.updateTime),s=new cs({mapValue:{fields:t.fields}}),i=ls.newFoundDocument(n,r,s);return A&&i.setHasCommittedMutations(),A?i.setHasCommittedMutations():i}function ko(e,t){return"found"in t?function(e,t){zn(!!t.found),t.found.name,t.found.updateTime;const A=Io(e,t.found.name),n=_o(t.found.updateTime),r=new cs({mapValue:{fields:t.found.fields}});return ls.newFoundDocument(A,n,r)}(e,t):"missing"in t?function(e,t){zn(!!t.missing),zn(!!t.readTime);const A=Io(e,t.missing),n=_o(t.readTime);return ls.newNoDocument(A,n)}(e,t):Xn()}function Lo(e,t){let A;if("targetChange"in t){t.targetChange;const n=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xn()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.N?(zn(void 0===t||"string"==typeof t),Ir.fromBase64String(t||"")):(zn(void 0===t||t instanceof Uint8Array),Ir.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(e){const t=void 0===e.code?er.UNKNOWN:Xi(e.code);return new tr(t,e.message||"")}(i);A=new ho(n,r,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=Io(e,n.document.name),s=_o(n.document.updateTime),i=new cs({mapValue:{fields:n.document.fields}}),o=ls.newFoundDocument(r,s,i),a=n.targetIds||[],c=n.removedTargetIds||[];A=new uo(a,c,o.key,o)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=Io(e,n.document),s=n.readTime?_o(n.readTime):mr.min(),i=ls.newNoDocument(r,s),o=n.removedTargetIds||[];A=new uo([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=Io(e,n.document),s=n.removedTargetIds||[];A=new uo([],s,r,null)}else{if(!("filter"in t))return Xn();{t.filter;const e=t.filter;e.targetId;const n=e.count||0,r=new Wi(n),s=e.targetId;A=new lo(s,r)}}return A}function No(e,t){let A;if(t instanceof Mi)A={update:xo(e,t.key,t.value)};else if(t instanceof Gi)A={delete:Eo(e,t.key)};else if(t instanceof Oi)A={update:xo(e,t.key,t.data),updateMask:zo(t.fieldMask)};else{if(!(t instanceof qi))return Xn();A={verify:Eo(e,t.key)}}return t.fieldTransforms.length>0&&(A.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const A=t.transform;if(A instanceof yi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof Ci)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof Qi)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof Fi)return{fieldPath:t.field.canonicalString(),increment:A.k};throw Xn()}(0,e)))),t.precondition.isNone||(A.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xn()}(e,t.precondition)),A}function Ro(e,t){const A=t.currentDocument?function(e){return void 0!==e.updateTime?Si.updateTime(_o(e.updateTime)):void 0!==e.exists?Si.exists(e.exists):Si.none()}(t.currentDocument):Si.none(),n=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let A=null;if("setToServerValue"in t)zn("REQUEST_TIME"===t.setToServerValue),A=new yi;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];A=new Ci(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];A=new Qi(e)}else"increment"in t?A=new Fi(e,t.increment):Xn();const n=Fr.fromServerFormat(t.fieldPath);return new Ii(n,A)}(e,t))):[];if(t.update){t.update.name;const r=Io(e,t.update.name),s=new cs({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ur(t.map((e=>Fr.fromServerFormat(e))))}(t.updateMask);return new Oi(r,s,e,A,n)}return new Mi(r,s,A,n)}if(t.delete){const n=Io(e,t.delete);return new Gi(n,A)}if(t.verify){const n=Io(e,t.verify);return new qi(n,A)}return Xn()}function Mo(e,t){return e&&e.length>0?(zn(void 0!==t),e.map((e=>function(e,t){let A=e.updateTime?_o(e.updateTime):_o(t);return A.isEqual(mr.min())&&(A=_o(t)),new Ti(A,e.transformResults||[])}(e,t)))):[]}function Oo(e,t){return{documents:[bo(e,t.path)]}}function Po(e,t){const A={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(A.parent=bo(e,n),A.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(A.parent=bo(e,n.popLast()),A.structuredQuery.from=[{collectionId:n.lastSegment()}]);const r=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(ts(e.value))return{unaryFilter:{field:jo(e.field),op:"IS_NAN"}};if(es(e.value))return{unaryFilter:{field:jo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ts(e.value))return{unaryFilter:{field:jo(e.field),op:"IS_NOT_NAN"}};if(es(e.value))return{unaryFilter:{field:jo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(e.field),op:Wo(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);r&&(A.structuredQuery.where=r);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:jo(e.field),direction:qo(e.dir)}}(e)))}(t.orderBy);s&&(A.structuredQuery.orderBy=s);const i=function(e,t){return e.N||Rr(t)?t:{value:t}}(e,t.limit);var o;return null!==i&&(A.structuredQuery.limit=i),t.startAt&&(A.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(A.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),A}function Ko(e){let t=To(e.parent);const A=e.structuredQuery,n=A.from?A.from.length:0;let r=null;if(n>0){zn(1===n);const e=A.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];A.where&&(s=Go(A.where));let i=[];A.orderBy&&(i=A.orderBy.map((e=>function(e){return new Ws(Jo(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let o=null;A.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Rr(t)?null:t}(A.limit));let a=null;A.startAt&&(a=function(e){const t=!!e.before,A=e.values||[];return new qs(A,t)}(A.startAt));let c=null;return A.endAt&&(c=function(e){const t=!e.before,A=e.values||[];return new qs(A,t)}(A.endAt)),zs(t,r,i,s,o,"F",a,c)}function Vo(e,t){const A=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xn()}}(0,t.purpose);return null==A?null:{"goog-listen-tags":A}}function Go(e){return e?void 0!==e.unaryFilter?[Xo(e)]:void 0!==e.fieldFilter?[Yo(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Go(e))).reduce(((e,t)=>e.concat(t))):Xn():[]}function qo(e){return mo[e]}function Wo(e){return wo[e]}function jo(e){return{fieldPath:e.canonicalString()}}function Jo(e){return Fr.fromServerFormat(e.fieldPath)}function Yo(e){return Ls.create(Jo(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xn()}}(e.fieldFilter.op),e.fieldFilter.value)}function Xo(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jo(e.unaryFilter.field);return Ls.create(t,"==",{doubleValue:NaN});case"IS_NULL":const A=Jo(e.unaryFilter.field);return Ls.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=Jo(e.unaryFilter.field);return Ls.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Jo(e.unaryFilter.field);return Ls.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Xn()}}function zo(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function $o(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(e){let t="";for(let A=0;A<e.length;A++)t.length>0&&(t=ta(t)),t=ea(e.get(A),t);return ta(t)}function ea(e,t){let A=t;const n=e.length;for(let r=0;r<n;r++){const t=e.charAt(r);switch(t){case"\0":A+="";break;case"":A+="";break;default:A+=t}}return A}function ta(e){return e+""}function Aa(e){const t=e.length;if(zn(t>=2),2===t)return zn(""===e.charAt(0)&&""===e.charAt(1)),Qr.emptyPath();const A=t-2,n=[];let r="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>A)&&Xn(),e.charAt(t+1)){case"":const A=e.substring(s,t);let i;0===r.length?i=A:(r+=A,i=r,r=""),n.push(i);break;case"":r+=e.substring(s,t),r+="\0";break;case"":r+=e.substring(s,t+1);break;default:Xn()}s=t+2}return new Qr(n)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(e,t){return[e,Zo(t)]}function sa(e,t,A){return[e,Zo(t),A]}const ia={},oa=["prefixPath","collectionGroup","readTime","documentId"],aa=["prefixPath","collectionGroup","documentId"],ca=["collectionGroup","readTime","prefixPath","documentId"],ua=["canonicalId","targetId"],la=["targetId","path"],ha=["path","targetId"],da=["collectionId","parent"],fa=["indexId","uid"],ga=["uid","sequenceNumber"],pa=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ba=["indexId","uid","orderedDocumentKey"],ma=["userId","collectionPath","documentId"],wa=["userId","collectionPath","largestBatchId"],ya=["userId","collectionGroup","largestBatchId"],Ca=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],va=[...Ca,"documentOverlays"],Qa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_a=[...Qa,"indexConfiguration","indexState","indexEntries"],Fa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ea(((A,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(A,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(A,n)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ea?t:Ea.resolve(t)}catch(e){return Ea.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ea.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ea.reject(t)}static resolve(e){return new Ea(((t,A)=>{t(e)}))}static reject(e){return new Ea(((t,A)=>{A(e)}))}static waitFor(e){return new Ea(((t,A)=>{let n=0,r=0,s=!1;e.forEach((e=>{++n,e.next((()=>{++r,s&&r===n&&t()}),(e=>A(e)))})),s=!0,r===n&&t()}))}static or(e){let t=Ea.resolve(!1);for(const A of e)t=t.next((e=>e?Ea.resolve(e):A()));return t}static forEach(e,t){const A=[];return e.forEach(((e,n)=>{A.push(t.call(this,e,n))})),this.waitFor(A)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ar,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Sa(e,t.error)):this.At.resolve()},this.transaction.onerror=t=>{const A=La(t.target.error);this.At.reject(new Sa(e,A))}}static open(e,t,A,n){try{return new Ia(t,e.transaction(n,A))}catch(e){throw new Sa(t,e)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Wn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xa(t)}}class ba{constructor(e,t,A){this.name=e,this.version=t,this.Pt=A,12.2===ba.Vt((0,a.z$)())&&jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Wn("SimpleDb","Removing database:",e),Ha(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,a.hl)())return!1;if(ba.St())return!0;const e=(0,a.z$)(),t=ba.Vt(e),A=0<t&&t<10,n=ba.Dt(e),r=0<n&&n<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||A||r)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",BASE_URL:"/"})||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),A=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(A)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),A=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(A)}async Nt(e){return this.db||(Wn("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,A)=>{const n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{const A=e.target.result;t(A)},n.onblocked=()=>{A(new Sa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{const n=t.target.error;"VersionError"===n.name?A(new tr(er.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?A(new tr(er.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):A(new Sa(e,n))},n.onupgradeneeded=e=>{Wn("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.Pt.kt(t,n.transaction,e.oldVersion,this.version).next((()=>{Wn("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Mt&&(this.db.onversionchange=e=>this.Mt(e)),this.db}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,A,n){const r="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Nt(e);const t=Ia.open(this.db,e,r?"readonly":"readwrite",A),s=n(t).next((e=>(t.bt(),e))).catch((e=>(t.abort(e),Ea.reject(e)))).toPromise();return s.catch((()=>{})),await t.Rt,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(Wn("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ta{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ha(this.Ft.delete())}}class Sa extends tr{constructor(e,t){super(er.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Da(e){return"IndexedDbTransactionError"===e.name}class xa{constructor(e){this.store=e}put(e,t){let A;return void 0!==t?(Wn("SimpleDb","PUT",this.store.name,e,t),A=this.store.put(t,e)):(Wn("SimpleDb","PUT",this.store.name,"<auto-key>",e),A=this.store.put(e)),Ha(A)}add(e){return Wn("SimpleDb","ADD",this.store.name,e,e),Ha(this.store.add(e))}get(e){return Ha(this.store.get(e)).next((t=>(void 0===t&&(t=null),Wn("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Wn("SimpleDb","DELETE",this.store.name,e),Ha(this.store.delete(e))}count(){return Wn("SimpleDb","COUNT",this.store.name),Ha(this.store.count())}qt(e,t){const A=this.options(e,t);if(A.index||"function"!=typeof this.store.getAll){const e=this.cursor(A),t=[];return this.Kt(e,((e,A)=>{t.push(A)})).next((()=>t))}{const e=this.store.getAll(A.range);return new Ea(((t,A)=>{e.onerror=e=>{A(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}Gt(e,t){const A=this.store.getAll(e,null===t?void 0:t);return new Ea(((e,t)=>{A.onerror=e=>{t(e.target.error)},A.onsuccess=t=>{e(t.target.result)}}))}Qt(e,t){Wn("SimpleDb","DELETE ALL",this.store.name);const A=this.options(e,t);A.jt=!1;const n=this.cursor(A);return this.Kt(n,((e,t,A)=>A.delete()))}Wt(e,t){let A;t?A=e:(A={},t=e);const n=this.cursor(A);return this.Kt(n,t)}zt(e){const t=this.cursor({});return new Ea(((A,n)=>{t.onerror=e=>{const t=La(e.target.error);n(t)},t.onsuccess=t=>{const n=t.target.result;n?e(n.primaryKey,n.value).next((e=>{e?n.continue():A()})):A()}}))}Kt(e,t){const A=[];return new Ea(((n,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{const r=e.target.result;if(!r)return void n();const s=new Ta(r),i=t(r.primaryKey,r.value,s);if(i instanceof Ea){const e=i.catch((e=>(s.done(),Ea.reject(e))));A.push(e)}s.isDone?n():null===s.Lt?r.continue():r.continue(s.Lt)}})).next((()=>Ea.waitFor(A)))}options(e,t){let A;return void 0!==e&&("string"==typeof e?A=e:t=e),{index:A,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const A=this.store.index(e.index);return e.jt?A.openKeyCursor(e.range,t):A.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ha(e){return new Ea(((t,A)=>{e.onsuccess=e=>{const A=e.target.result;t(A)},e.onerror=e=>{const t=La(e.target.error);A(t)}}))}let ka=!1;function La(e){const t=ba.Vt((0,a.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new tr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ka||(ka=!0,setTimeout((()=>{throw e}),0)),e}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Ua{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ra(e,t){const A=Zn(e);return ba.xt(A.Ht,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,t,A,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=A,this.mutations=n}applyToRemoteDocument(e,t){const A=t.mutationResults;for(let n=0;n<this.mutations.length;n++){const t=this.mutations[n];t.key.isEqual(e.key)&&Hi(t,e,A[n])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ki(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ki(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const A=e.get(t.key),n=A;this.applyToLocalView(n),A.isValidDocument()||n.convertToNoDocument(mr.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),so())}isEqual(e){return this.batchId===e.batchId&&gr(this.mutations,e.mutations,((e,t)=>Ni(e,t)))&&gr(this.baseMutations,e.baseMutations,((e,t)=>Ni(e,t)))}}class Oa{constructor(e,t,A,n){this.batch=e,this.commitVersion=t,this.mutationResults=A,this.docVersions=n}static from(e,t,A){zn(e.mutations.length===A.length);let n=no;const r=e.mutations;for(let s=0;s<r.length;s++)n=n.insert(r[s].key,A[s].version);return new Oa(e,t,A,n)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,A,n,r=mr.min(),s=mr.min(),i=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=A,this.sequenceNumber=n,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=i}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.Jt=e}}function Ga(e,t){let A;if(t.document)A=Ho(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Pr.fromSegments(t.noDocument.path),n=Ja(t.noDocument.readTime);A=ls.newNoDocument(e,n),t.hasCommittedMutations&&A.setHasCommittedMutations()}else{if(!t.unknownDocument)return Xn();{const e=Pr.fromSegments(t.unknownDocument.path),n=Ja(t.unknownDocument.version);A=ls.newUnknownDocument(e,n)}}return t.readTime&&A.setReadTime(function(e){const t=new Br(e[0],e[1]);return mr.fromTimestamp(t)}(t.readTime)),A}function qa(e,t){const A=t.key,n={prefixPath:A.getCollectionPath().popLast().toArray(),collectionGroup:A.collectionGroup,documentId:A.path.lastSegment(),readTime:Wa(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=function(e,t){return{name:Eo(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Co(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())n.noDocument={path:A.path.toArray(),readTime:ja(t.version)};else{if(!t.isUnknownDocument())return Xn();n.unknownDocument={path:A.path.toArray(),version:ja(t.version)}}return n}function Wa(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ja(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ja(e){const t=new Br(e.seconds,e.nanoseconds);return mr.fromTimestamp(t)}function Ya(e,t){const A=(t.baseMutations||[]).map((t=>Ro(e.Jt,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const A=t.mutations[s+1];e.updateTransforms=A.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const n=t.mutations.map((t=>Ro(e.Jt,t))),r=Br.fromMillis(t.localWriteTimeMs);return new Ma(t.batchId,r,A,n)}function Xa(e){const t=Ja(e.readTime),A=void 0!==e.lastLimboFreeSnapshotVersion?Ja(e.lastLimboFreeSnapshotVersion):mr.min();let n;var r;return void 0!==e.query.documents?(zn(1===(r=e.query).documents.length),n=ri($s(To(r.documents[0])))):n=function(e){return ri(Ko(e))}(e.query),new Ka(n,e.targetId,0,e.lastListenSequenceNumber,t,A,Ir.fromBase64String(e.resumeToken))}function za(e,t){const A=ja(t.snapshotVersion),n=ja(t.lastLimboFreeSnapshotVersion);let r;r=Ds(t.target)?Oo(e.Jt,t.target):Po(e.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:bs(t.target),readTime:A,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function $a(e){const t=Ko({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?si(t,t.limit,"L"):t}function Za(e,t){return new Pa(t.largestBatchId,Ro(e.Jt,t.overlayMutation))}function ec(e,t){const A=t.path.lastSegment();return[e,Zo(t.path.popLast()),A]}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{getBundleMetadata(e,t){return Ac(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Ja(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Ac(e).put({bundleId:(A=t).id,createTime:ja(_o(A.createTime)),version:A.version});var A}getNamedQuery(e,t){return nc(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:$a(t.bundledQuery),readTime:Ja(t.readTime)};var t}))}saveNamedQuery(e,t){return nc(e).put(function(e){return{name:e.name,readTime:ja(_o(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ac(e){return Ra(e,"bundles")}function nc(e){return Ra(e,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){const A=t.uid||"";return new rc(e,A)}getOverlay(e,t){return sc(e).get(ec(this.userId,t)).next((e=>e?Za(this.M,e):null))}saveOverlays(e,t,A){const n=[];return A.forEach(((A,r)=>{const s=new Pa(t,r);n.push(this.Xt(e,s))})),Ea.waitFor(n)}removeOverlaysForBatchId(e,t,A){const n=new Set;t.forEach((e=>n.add(Zo(e.getCollectionPath()))));const r=[];return n.forEach((t=>{const n=IDBKeyRange.bound([this.userId,t,A],[this.userId,t,A+1],!1,!0);r.push(sc(e).Qt("collectionPathOverlayIndex",n))})),Ea.waitFor(r)}getOverlaysForCollection(e,t,A){const n=Ao(),r=Zo(t),s=IDBKeyRange.bound([this.userId,r,A],[this.userId,r,Number.POSITIVE_INFINITY],!0);return sc(e).qt("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Za(this.M,t);n.set(e.getKey(),e)}return n}))}getOverlaysForCollectionGroup(e,t,A,n){const r=Ao();let s;const i=IDBKeyRange.bound([this.userId,t,A],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sc(e).Wt({index:"collectionGroupOverlayIndex",range:i},((e,t,A)=>{const i=Za(this.M,t);r.size()<n||i.largestBatchId===s?(r.set(i.getKey(),i),s=i.largestBatchId):A.done()})).next((()=>r))}Xt(e,t){return sc(e).put(function(e,t,A){const[n,r,s]=ec(t,A.mutation.key);return{userId:t,collectionPath:r,documentId:s,collectionGroup:A.mutation.key.getCollectionGroup(),largestBatchId:A.largestBatchId,overlayMutation:No(e.Jt,A.mutation)}}(this.M,this.userId,t))}}function sc(e){return Ra(e,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Sr(e.integerValue));else if("doubleValue"in e){const A=Sr(e.doubleValue);isNaN(A)?this.ne(t,13):(this.ne(t,15),Mr(A)?t.se(0):t.se(A))}else if("timestampValue"in e){const A=e.timestampValue;this.ne(t,20),"string"==typeof A?t.ie(A):(t.ie(`${A.seconds||""}`),t.se(A.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Dr(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const A=e.geoPointValue;this.ne(t,45),t.se(A.latitude||0),t.se(A.longitude||0)}else"mapValue"in e?rs(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xn()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const A=e.fields||{};this.ne(t,55);for(const n of Object.keys(A))this.re(n,t),this.te(A[n],t)}he(e,t){const A=e.values||[];this.ne(t,50);for(const n of A)this.te(n,t)}ae(e,t){this.ne(t,37),Pr.fromName(e).path.forEach((e=>{this.ne(t,60),this.le(e,t)}))}ne(e,t){e.se(t)}oe(e){e.se(2)}}function oc(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ac(e){const t=64-function(e){let t=0;for(let A=0;A<8;++A){const n=oc(255&e[A]);if(t+=n,8!==n)break}return t}(e);return Math.ceil(t/8)}ic.fe=new ic;class cc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let A=t.next();for(;!A.done;)this._e(A.value),A=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let A=t.next();for(;!A.done;)this.ge(A.value),A=t.next();this.ye()}pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this._e(e);else if(e<2048)this._e(960|e>>>6),this._e(128|63&e);else if(t<"\ud800"||"\udbff"<t)this._e(480|e>>>12),this._e(128|63&e>>>6),this._e(128|63&e);else{const e=t.codePointAt(0);this._e(240|e>>>18),this._e(128|63&e>>>12),this._e(128|63&e>>>6),this._e(128|63&e)}}this.we()}Ie(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.ge(e);else if(e<2048)this.ge(960|e>>>6),this.ge(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.ge(480|e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e);else{const e=t.codePointAt(0);this.ge(240|e>>>18),this.ge(128|63&e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e)}}this.ye()}Te(e){const t=this.Ee(e),A=ac(t);this.Ae(1+A),this.buffer[this.position++]=255&A;for(let n=t.length-A;n<t.length;++n)this.buffer[this.position++]=255&t[n]}Re(e){const t=this.Ee(e),A=ac(t);this.Ae(1+A),this.buffer[this.position++]=~(255&A);for(let n=t.length-A;n<t.length;++n)this.buffer[this.position++]=~(255&t[n])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),A=0!=(128&t[0]);t[0]^=A?255:128;for(let n=1;n<t.length;++n)t[n]^=A?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let A=2*this.buffer.length;A<t&&(A=t);const n=new Uint8Array(A);n.set(this.buffer),this.buffer=n}}class uc{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class lc{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class hc{constructor(){this.De=new cc,this.Ce=new uc(this.De),this.xe=new lc(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t,A,n){this.indexId=e,this.documentKey=t,this.arrayValue=A,this.directionalValue=n}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,A=new Uint8Array(t);return A.set(this.directionalValue,0),t!==e?A.set([0],this.directionalValue.length):++A[A.length-1],new dc(this.indexId,this.documentKey,this.arrayValue,A)}}function fc(e,t){let A=e.indexId-t.indexId;return 0!==A?A:(A=gc(e.arrayValue,t.arrayValue),0!==A?A:(A=gc(e.directionalValue,t.directionalValue),0!==A?A:Pr.comparator(e.documentKey,t.documentKey)))}function gc(e,t){for(let A=0;A<e.length&&A<t.length;++A){const n=e[A]-t[A];if(0!==n)return n}return e.length-t.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const e=t;e.S()?this.Fe=e:this.Oe.push(e)}}$e(e){const t=ds(e);if(void 0!==t&&!this.Be(t))return!1;const A=fs(e);let n=0,r=0;for(;n<A.length&&this.Be(A[n]);++n);if(n===A.length)return!0;if(void 0!==this.Fe){const e=A[n];if(!this.Le(this.Fe,e)||!this.Ue(this.Me[r++],e))return!1;++n}for(;n<A.length;++n){const e=A[n];if(r>=this.Me.length||!this.Ue(this.Me[r++],e))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const A="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===A}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this.qe=new mc}addToCollectionParentIndex(e,t){return this.qe.add(t),Ea.resolve()}getCollectionParents(e,t){return Ea.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Ea.resolve()}deleteFieldIndex(e,t){return Ea.resolve()}getDocumentsMatchingTarget(e,t){return Ea.resolve(null)}getIndexType(e,t){return Ea.resolve(0)}getFieldIndexes(e,t){return Ea.resolve([])}getNextCollectionGroupToUpdate(e){return Ea.resolve(null)}getMinOffset(e,t){return Ea.resolve(ws.min())}updateCollectionGroup(e,t,A){return Ea.resolve()}updateIndexEntries(e,t){return Ea.resolve()}}class mc{constructor(){this.index={}}add(e){const t=e.lastSegment(),A=e.popLast(),n=this.index[t]||new _s(Qr.comparator),r=!n.has(A);return this.index[t]=n.add(A),r}has(e){const t=e.lastSegment(),A=e.popLast(),n=this.index[t];return n&&n.has(A)}getEntries(e){return(this.index[e]||new _s(Qr.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new Uint8Array(0);class yc{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new mc,this.Ge=new zi((e=>bs(e)),((e,t)=>Ss(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const A=t.lastSegment(),n=t.popLast();e.addOnCommittedListener((()=>{this.Ke.add(t)}));const r={collectionId:A,parent:Zo(n)};return Cc(e).put(r)}return Ea.resolve()}getCollectionParents(e,t){const A=[],n=IDBKeyRange.bound([t,""],[pr(t),""],!1,!0);return Cc(e).qt(n).next((e=>{for(const n of e){if(n.collectionId!==t)break;A.push(Aa(n.parent))}return A}))}addFieldIndex(e,t){const A=Qc(e),n=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);return delete n.indexId,A.add(n).next()}deleteFieldIndex(e,t){const A=Qc(e),n=_c(e),r=vc(e);return A.delete(t.indexId).next((()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const A=vc(e);let n=!0;const r=new Map;return Ea.forEach(this.Qe(t),(t=>this.je(e,t).next((e=>{n&&(n=!!e),r.set(t,e)})))).next((()=>{if(n){let e=so();const n=[];return Ea.forEach(r,((r,s)=>{var i;Wn("IndexedDbIndexManager",`Using index ${i=r,`id=${i.indexId}|cg=${i.collectionGroup}|f=${i.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`} to execute ${bs(t)}`);const o=function(e,t){const A=ds(t);if(void 0===A)return null;for(const n of xs(e,A.fieldPath))switch(n.op){case"array-contains-any":return n.value.arrayValue.values||[];case"array-contains":return[n.value]}return null}(s,r),a=function(e,t){const A=new Map;for(const n of fs(t))for(const t of xs(e,n.fieldPath))switch(t.op){case"==":case"in":A.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return A.set(n.fieldPath.canonicalString(),t.value),Array.from(A.values())}return null}(s,r),c=function(e,t){const A=[];let n=!0;for(const r of fs(t)){const t=0===r.kind?Hs(e,r.fieldPath,e.startAt):ks(e,r.fieldPath,e.startAt);A.push(t.value),n&&(n=t.inclusive)}return new qs(A,n)}(s,r),u=function(e,t){const A=[];let n=!0;for(const r of fs(t)){const t=0===r.kind?ks(e,r.fieldPath,e.endAt):Hs(e,r.fieldPath,e.endAt);A.push(t.value),n&&(n=t.inclusive)}return new qs(A,n)}(s,r),l=this.We(r,s,c),h=this.We(r,s,u),d=this.ze(r,s,a),f=this.He(r.indexId,o,l,c.inclusive,h,u.inclusive,d);return Ea.forEach(f,(r=>A.Gt(r,t.limit).next((t=>{t.forEach((t=>{const A=Pr.fromSegments(t.documentKey);e.has(A)||(e=e.add(A),n.push(A))}))}))))})).next((()=>n))}return Ea.resolve(null)}))}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,A,n,r,s,i){const o=(null!=t?t.length:1)*Math.max(A.length,r.length),a=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.Je(t[u/a]):wc,l=this.Ye(e,o,A[u%a],n),h=this.Xe(e,o,r[u%a],s),d=i.map((t=>this.Ye(e,o,t,!0)));c.push(...this.createRange(l,h,d))}return c}Ye(e,t,A,n){const r=new dc(e,Pr.empty(),t,A);return n?r:r.ke()}Xe(e,t,A,n){const r=new dc(e,Pr.empty(),t,A);return n?r.ke():r}je(e,t){const A=new pc(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next((e=>{let t=null;for(const n of e)A.$e(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t}))}getIndexType(e,t){let A=2;return Ea.forEach(this.Qe(t),(t=>this.je(e,t).next((e=>{e?0!==A&&e.fields.length<function(e){let t=new _s(Fr.comparator),A=!1;for(const n of e.filters){const e=n;e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?A=!0:t=t.add(e.field))}for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(A?1:0)}(t)&&(A=1):A=0})))).next((()=>A))}Ze(e,t){const A=new hc;for(const n of fs(e)){const e=t.data.field(n.fieldPath);if(null==e)return null;const r=A.Ne(n.kind);ic.fe.Zt(e,r)}return A.Se()}Je(e){const t=new hc;return ic.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const A=new hc;return ic.fe.Zt(zr(this.databaseId,t),A.Ne(function(e){const t=fs(e);return 0===t.length?0:t[t.length-1].kind}(e))),A.Se()}ze(e,t,A){if(null===A)return[];let n=[];n.push(new hc);let r=0;for(const s of fs(e)){const e=A[r++];for(const A of n)if(this.en(t,s.fieldPath)&&Zr(e))n=this.nn(n,s,e);else{const t=A.Ne(s.kind);ic.fe.Zt(e,t)}}return this.sn(n)}We(e,t,A){return this.ze(e,t,A.position)}sn(e){const t=[];for(let A=0;A<e.length;++A)t[A]=e[A].Se();return t}nn(e,t,A){const n=[...e],r=[];for(const s of A.arrayValue.values||[])for(const e of n){const A=new hc;A.seed(e.Se()),ic.fe.Zt(s,A.Ne(t.kind)),r.push(A)}return r}en(e,t){return!!e.filters.find((e=>e instanceof Ls&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const A=Qc(e),n=_c(e);return(t?A.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):A.qt()).next((e=>{const t=[];return Ea.forEach(e,(e=>n.get([e.indexId,this.uid]).next((A=>{t.push(function(e,t){const A=t?new ps(t.sequenceNumber,new ws(Ja(t.readTime),new Pr(Aa(t.documentKey)),t.largestBatchId)):ps.empty(),n=e.fields.map((([e,t])=>new gs(Fr.fromServerFormat(e),t)));return new hs(e.indexId,e.collectionGroup,n,A)}(e,A))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const A=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==A?A:fr(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,A){const n=Qc(e),r=_c(e);return this.rn(e).next((e=>n.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Ea.forEach(t,(t=>r.put(function(e,t,A,n){return{indexId:e,uid:t.uid||"",sequenceNumber:A,readTime:ja(n.readTime),documentKey:Zo(n.documentKey.path),largestBatchId:n.largestBatchId}}(t.indexId,this.user,e,A))))))))}updateIndexEntries(e,t){const A=new Map;return Ea.forEach(t,((t,n)=>{const r=A.get(t.collectionGroup);return(r?Ea.resolve(r):this.getFieldIndexes(e,t.collectionGroup)).next((r=>(A.set(t.collectionGroup,r),Ea.forEach(r,(A=>this.on(e,t,A).next((t=>{const r=this.un(n,A);return t.isEqual(r)?Ea.resolve():this.an(e,n,A,t,r)})))))))}))}cn(e,t,A,n){return vc(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.tn(A,t.key),documentKey:t.key.path.toArray()})}hn(e,t,A,n){return vc(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.tn(A,t.key),t.key.path.toArray()])}on(e,t,A){const n=vc(e);let r=new _s(fc);return n.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([A.indexId,this.uid,this.tn(A,t)])},((e,n)=>{r=r.add(new dc(A.indexId,t,n.arrayValue,n.directionalValue))})).next((()=>r))}un(e,t){let A=new _s(fc);const n=this.Ze(t,e);if(null==n)return A;const r=ds(t);if(null!=r){const s=e.data.field(r.fieldPath);if(Zr(s))for(const r of s.arrayValue.values||[])A=A.add(new dc(t.indexId,e.key,this.Je(r),n))}else A=A.add(new dc(t.indexId,e.key,wc,n));return A}an(e,t,A,n,r){Wn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,A,n,r){const s=e.getIterator(),i=t.getIterator();let o=Us(s),a=Us(i);for(;o||a;){let e=!1,t=!1;if(o&&a){const n=A(o,a);n<0?t=!0:n>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(n(a),a=Us(i)):t?(r(o),o=Us(s)):(o=Us(s),a=Us(i))}}(n,r,fc,(n=>{s.push(this.cn(e,t,A,n))}),(n=>{s.push(this.hn(e,t,A,n))})),Ea.waitFor(s)}rn(e){let t=1;return _c(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,A,n)=>{n.done(),t=A.sequenceNumber+1})).next((()=>t))}createRange(e,t,A){A=A.sort(((e,t)=>fc(e,t))).filter(((e,t,A)=>!t||0!==fc(e,A[t-1])));const n=[];n.push(e);for(const s of A){const A=fc(s,e),r=fc(s,t);if(0===A)n[0]=e.ke();else if(A>0&&r<0)n.push(s),n.push(s.ke());else if(r>0)break}n.push(t);const r=[];for(let s=0;s<n.length;s+=2)r.push(IDBKeyRange.bound([n[s].indexId,this.uid,n[s].arrayValue,n[s].directionalValue,wc,[]],[n[s+1].indexId,this.uid,n[s+1].arrayValue,n[s+1].directionalValue,wc,[]]));return r}getMinOffset(e,t){let A;return Ea.forEach(this.Qe(t),(t=>this.je(e,t).next((e=>{e?(!A||ys(e.indexState.offset,A)<0)&&(A=e.indexState.offset):A=ws.min()})))).next((()=>A))}}function Cc(e){return Ra(e,"collectionParents")}function vc(e){return Ra(e,"indexEntries")}function Qc(e){return Ra(e,"indexConfiguration")}function _c(e){return Ra(e,"indexState")}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Uc{constructor(e,t,A){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=A}static withCacheSize(e){return new Uc(e,Uc.DEFAULT_COLLECTION_PERCENTILE,Uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(e,t,A){const n=e.store("mutations"),r=e.store("documentMutations"),s=[],i=IDBKeyRange.only(A.batchId);let o=0;const a=n.Wt({range:i},((e,t,A)=>(o++,A.delete())));s.push(a.next((()=>{zn(1===o)})));const c=[];for(const u of A.mutations){const e=sa(t,u.key.path,A.batchId);s.push(r.delete(e)),c.push(u.key)}return Ea.waitFor(s).next((()=>c))}function Ic(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Xn();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uc.DEFAULT_COLLECTION_PERCENTILE=10,Uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uc.DEFAULT=new Uc(41943040,Uc.DEFAULT_COLLECTION_PERCENTILE,Uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uc.DISABLED=new Uc(-1,0,0);class bc{constructor(e,t,A,n){this.userId=e,this.M=t,this.indexManager=A,this.referenceDelegate=n,this.ln={}}static Yt(e,t,A,n){zn(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new bc(r,t,A,n)}checkEmpty(e){let t=!0;const A=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sc(e).Wt({index:"userMutationsIndex",range:A},((e,A,n)=>{t=!1,n.done()})).next((()=>t))}addMutationBatch(e,t,A,n){const r=Dc(e),s=Sc(e);return s.add({}).next((i=>{zn("number"==typeof i);const o=new Ma(i,t,A,n),a=function(e,t,A){const n=A.baseMutations.map((t=>No(e.Jt,t))),r=A.mutations.map((t=>No(e.Jt,t)));return{userId:t,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:n,mutations:r}}(this.M,this.userId,o),c=[];let u=new _s(((e,t)=>fr(e.canonicalString(),t.canonicalString())));for(const e of n){const t=sa(this.userId,e.key.path,i);u=u.add(e.key.path.popLast()),c.push(s.put(a)),c.push(r.put(t,ia))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.ln[i]=o.keys()})),Ea.waitFor(c).next((()=>o))}))}lookupMutationBatch(e,t){return Sc(e).get(t).next((e=>e?(zn(e.userId===this.userId),Ya(this.M,e)):null))}fn(e,t){return this.ln[t]?Ea.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const A=e.keys();return this.ln[t]=A,A}return null}))}getNextMutationBatchAfterBatchId(e,t){const A=t+1,n=IDBKeyRange.lowerBound([this.userId,A]);let r=null;return Sc(e).Wt({index:"userMutationsIndex",range:n},((e,t,n)=>{t.userId===this.userId&&(zn(t.batchId>=A),r=Ya(this.M,t)),n.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let A=-1;return Sc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},((e,t,n)=>{A=t.batchId,n.done()})).next((()=>A))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sc(e).qt("userMutationsIndex",t).next((e=>e.map((e=>Ya(this.M,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const A=ra(this.userId,t.path),n=IDBKeyRange.lowerBound(A),r=[];return Dc(e).Wt({range:n},((A,n,s)=>{const[i,o,a]=A,c=Aa(o);if(i===this.userId&&t.path.isEqual(c))return Sc(e).get(a).next((e=>{if(!e)throw Xn();zn(e.userId===this.userId),r.push(Ya(this.M,e))}));s.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(e,t){let A=new _s(fr);const n=[];return t.forEach((t=>{const r=ra(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=Dc(e).Wt({range:s},((e,n,r)=>{const[s,i,o]=e,a=Aa(i);s===this.userId&&t.path.isEqual(a)?A=A.add(o):r.done()}));n.push(i)})),Ea.waitFor(n).next((()=>this.dn(e,A)))}getAllMutationBatchesAffectingQuery(e,t){const A=t.path,n=A.length+1,r=ra(this.userId,A),s=IDBKeyRange.lowerBound(r);let i=new _s(fr);return Dc(e).Wt({range:s},((e,t,r)=>{const[s,o,a]=e,c=Aa(o);s===this.userId&&A.isPrefixOf(c)?c.length===n&&(i=i.add(a)):r.done()})).next((()=>this.dn(e,i)))}dn(e,t){const A=[],n=[];return t.forEach((t=>{n.push(Sc(e).get(t).next((e=>{if(null===e)throw Xn();zn(e.userId===this.userId),A.push(Ya(this.M,e))})))})),Ea.waitFor(n).next((()=>A))}removeMutationBatch(e,t){return Ec(e.Ht,this.userId,t).next((A=>(e.addOnCommittedListener((()=>{this._n(t.batchId)})),Ea.forEach(A,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Ea.resolve();const A=IDBKeyRange.lowerBound([this.userId]),n=[];return Dc(e).Wt({range:A},((e,t,A)=>{if(e[0]===this.userId){const t=Aa(e[1]);n.push(t)}else A.done()})).next((()=>{zn(0===n.length)}))}))}containsKey(e,t){return Tc(e,this.userId,t)}wn(e){return xc(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Tc(e,t,A){const n=ra(t,A.path),r=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return Dc(e).Wt({range:s,jt:!0},((e,A,n)=>{const[s,o,a]=e;s===t&&o===r&&(i=!0),n.done()})).next((()=>i))}function Sc(e){return Ra(e,"mutations")}function Dc(e){return Ra(e,"documentMutations")}function xc(e){return Ra(e,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Hc(0)}static yn(){return new Hc(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next((t=>{const A=new Hc(t.highestTargetId);return t.highestTargetId=A.next(),this.In(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.pn(e).next((e=>mr.fromTimestamp(new Br(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.pn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,A){return this.pn(e).next((n=>(n.highestListenSequenceNumber=t,A&&(n.lastRemoteSnapshotVersion=A.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.In(e,n))))}addTargetData(e,t){return this.Tn(e,t).next((()=>this.pn(e).next((A=>(A.targetCount+=1,this.En(t,A),this.In(e,A))))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Lc(e).delete(t.targetId))).next((()=>this.pn(e))).next((t=>(zn(t.targetCount>0),t.targetCount-=1,this.In(e,t))))}removeTargets(e,t,A){let n=0;const r=[];return Lc(e).Wt(((s,i)=>{const o=Xa(i);o.sequenceNumber<=t&&null===A.get(o.targetId)&&(n++,r.push(this.removeTargetData(e,o)))})).next((()=>Ea.waitFor(r))).next((()=>n))}forEachTarget(e,t){return Lc(e).Wt(((e,A)=>{const n=Xa(A);t(n)}))}pn(e){return Nc(e).get("targetGlobalKey").next((e=>(zn(null!==e),e)))}In(e,t){return Nc(e).put("targetGlobalKey",t)}Tn(e,t){return Lc(e).put(za(this.M,t))}En(e,t){let A=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,A=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,A=!0),A}getTargetCount(e){return this.pn(e).next((e=>e.targetCount))}getTargetData(e,t){const A=bs(t),n=IDBKeyRange.bound([A,Number.NEGATIVE_INFINITY],[A,Number.POSITIVE_INFINITY]);let r=null;return Lc(e).Wt({range:n,index:"queryTargetsIndex"},((e,A,n)=>{const s=Xa(A);Ss(t,s.target)&&(r=s,n.done())})).next((()=>r))}addMatchingKeys(e,t,A){const n=[],r=Rc(e);return t.forEach((t=>{const s=Zo(t.path);n.push(r.put({targetId:A,path:s})),n.push(this.referenceDelegate.addReference(e,A,t))})),Ea.waitFor(n)}removeMatchingKeys(e,t,A){const n=Rc(e);return Ea.forEach(t,(t=>{const r=Zo(t.path);return Ea.waitFor([n.delete([A,r]),this.referenceDelegate.removeReference(e,A,t)])}))}removeMatchingKeysForTargetId(e,t){const A=Rc(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return A.delete(n)}getMatchingKeysForTargetId(e,t){const A=IDBKeyRange.bound([t],[t+1],!1,!0),n=Rc(e);let r=so();return n.Wt({range:A,jt:!0},((e,t,A)=>{const n=Aa(e[1]),s=new Pr(n);r=r.add(s)})).next((()=>r))}containsKey(e,t){const A=Zo(t.path),n=IDBKeyRange.bound([A],[pr(A)],!1,!0);let r=0;return Rc(e).Wt({index:"documentTargetsIndex",jt:!0,range:n},(([e,t],A,n)=>{0!==e&&(r++,n.done())})).next((()=>r>0))}Et(e,t){return Lc(e).get(t).next((e=>e?Xa(e):null))}}function Lc(e){return Ra(e,"targets")}function Nc(e){return Ra(e,"targetGlobal")}function Rc(e){return Ra(e,"targetDocuments")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(e){if(e.code!==er.FAILED_PRECONDITION||e.message!==Fa)throw e;Wn("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc([e,t],[A,n]){const r=fr(e,A);return 0===r?fr(t,n):r}class Pc{constructor(e){this.An=e,this.buffer=new _s(Oc),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Oc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kc{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){const t=this.Vn?3e5:6e4;Wn("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.vn=null,this.Vn=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Da(e)?Wn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Mc(e)}await this.Sn(e)}))}}class Vc{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ea.resolve(lr.A);const A=new Pc(t);return this.Dn.forEachTarget(e,(e=>A.Pn(e.sequenceNumber))).next((()=>this.Dn.xn(e,(e=>A.Pn(e))))).next((()=>A.maxValue))}removeTargets(e,t,A){return this.Dn.removeTargets(e,t,A)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Wn("LruGarbageCollector","Garbage collection skipped; disabled"),Ea.resolve(Fc)):this.getCacheSize(e).next((A=>A<this.params.cacheSizeCollectionThreshold?(Wn("LruGarbageCollector",`Garbage collection skipped; Cache size ${A} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fc):this.Nn(e,t)))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let A,n,r,s,i,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Wn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,s=Date.now(),this.nthSequenceNumber(e,n)))).next((n=>(A=n,i=Date.now(),this.removeTargets(e,A,t)))).next((t=>(r=t,a=Date.now(),this.removeOrphanedDocuments(e,A)))).next((e=>(c=Date.now(),Gn()<=o["in"].DEBUG&&Wn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${n} in `+(i-s)+"ms\n"+`\tRemoved ${r} targets in `+(a-i)+"ms\n"+`\tRemoved ${e} documents in `+(c-a)+"ms\n"+`Total Duration: ${c-u}ms`),Ea.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:r,documentsRemoved:e}))))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Vc(e,t)}(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}kn(e){let t=0;return this.xn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,((e,A)=>t(A)))}addReference(e,t,A){return qc(e,A)}removeReference(e,t,A){return qc(e,A)}removeTargets(e,t,A){return this.db.getTargetCache().removeTargets(e,t,A)}markPotentiallyOrphaned(e,t){return qc(e,t)}On(e,t){return function(e,t){let A=!1;return xc(e).zt((n=>Tc(e,n,t).next((e=>(e&&(A=!0),Ea.resolve(!e)))))).next((()=>A))}(e,t)}removeOrphanedDocuments(e,t){const A=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[];let r=0;return this.Mn(e,((s,i)=>{if(i<=t){const t=this.On(e,s).next((t=>{if(!t)return r++,A.getEntry(e,s).next((()=>(A.removeEntry(s,mr.min()),Rc(e).delete([0,Zo(s.path)]))))}));n.push(t)}})).next((()=>Ea.waitFor(n))).next((()=>A.apply(e))).next((()=>r))}removeTarget(e,t){const A=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,A)}updateLimboDocument(e,t){return qc(e,t)}Mn(e,t){const A=Rc(e);let n,r=lr.A;return A.Wt({index:"documentTargetsIndex"},(([e,A],{path:s,sequenceNumber:i})=>{0===e?(r!==lr.A&&t(new Pr(Aa(n)),r),r=i,n=s):r=lr.A})).next((()=>{r!==lr.A&&t(new Pr(Aa(n)),r)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qc(e,t){return Rc(e).put(function(e,t){return{targetId:0,path:Zo(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this.changes=new zi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ls.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const A=this.changes.get(t);return void 0!==A?Ea.resolve(A):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,A){return Xc(e).put(A)}removeEntry(e,t,A){return Xc(e).delete(function(e,t){const A=e.path.toArray();return[A.slice(0,A.length-2),A[A.length-2],Wa(t),A[A.length-1]]}(t,A))}updateMetadata(e,t){return this.getMetadata(e).next((A=>(A.byteSize+=t,this.Fn(e,A))))}getEntry(e,t){let A=ls.newInvalidDocument(t);return Xc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},((e,n)=>{A=this.$n(t,n)})).next((()=>A))}Bn(e,t){let A={size:0,document:ls.newInvalidDocument(t)};return Xc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},((e,n)=>{A={document:this.$n(t,n),size:Ic(n)}})).next((()=>A))}getEntries(e,t){let A=Zi();return this.Ln(e,t,((e,t)=>{const n=this.$n(e,t);A=A.insert(e,n)})).next((()=>A))}Un(e,t){let A=Zi(),n=new Cs(Pr.comparator);return this.Ln(e,t,((e,t)=>{const r=this.$n(e,t);A=A.insert(e,r),n=n.insert(e,Ic(t))})).next((()=>({documents:A,qn:n})))}Ln(e,t,A){if(t.isEmpty())return Ea.resolve();let n=new _s(Zc);t.forEach((e=>n=n.add(e)));const r=IDBKeyRange.bound(zc(n.first()),zc(n.last())),s=n.getIterator();let i=s.getNext();return Xc(e).Wt({index:"documentKeyIndex",range:r},((e,t,n)=>{const r=Pr.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;i&&Zc(i,r)<0;)A(i,null),i=s.getNext();i&&i.isEqual(r)&&(A(i,t),i=s.hasNext()?s.getNext():null),i?n.Ut(zc(i)):n.done()})).next((()=>{for(;i;)A(i,null),i=s.hasNext()?s.getNext():null}))}getAllFromCollection(e,t,A){const n=[t.popLast().toArray(),t.lastSegment(),Wa(A.readTime),A.documentKey.path.isEmpty()?"":A.documentKey.path.lastSegment()],r=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xc(e).qt(IDBKeyRange.bound(n,r,!0)).next((e=>{let t=Zi();for(const A of e){const e=this.$n(Pr.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);t=t.insert(e.key,e)}return t}))}getAllFromCollectionGroup(e,t,A,n){let r=Zi();const s=$c(t,A),i=$c(t,ws.max());return Xc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,i,!0)},((e,t,A)=>{const s=this.$n(Pr.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);r=r.insert(s.key,s),r.size===n&&A.done()})).next((()=>r))}newChangeBuffer(e){return new Jc(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Yc(e).get("remoteDocumentGlobalKey").next((e=>(zn(!!e),e)))}Fn(e,t){return Yc(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const e=Ga(this.M,t);if(!e.isNoDocument()||!e.version.isEqual(mr.min()))return e}return ls.newInvalidDocument(e)}}class Jc extends Wc{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new zi((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let A=0,n=new _s(((e,t)=>fr(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((r,s)=>{const i=this.Gn.get(r);if(t.push(this.Kn.removeEntry(e,r,i.readTime)),s.isValidDocument()){const o=qa(this.Kn.M,s);n=n.add(r.path.popLast());const a=Ic(o);A+=a-i.size,t.push(this.Kn.addEntry(e,r,o))}else if(A-=i.size,this.trackRemovals){const A=qa(this.Kn.M,s.convertToNoDocument(mr.min()));t.push(this.Kn.addEntry(e,r,A))}})),n.forEach((A=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,A))})),t.push(this.Kn.updateMetadata(e,A)),Ea.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next((e=>(this.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Kn.Un(e,t).next((({documents:e,qn:t})=>(t.forEach(((t,A)=>{this.Gn.set(t,{size:A,readTime:e.get(t).readTime})})),e)))}}function Yc(e){return Ra(e,"remoteDocumentGlobal")}function Xc(e){return Ra(e,"remoteDocumentsV14")}function zc(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $c(e,t){const A=t.documentKey.path.toArray();return[e,Wa(t.readTime),A.slice(0,A.length-2),A.length>0?A[A.length-1]:""]}function Zc(e,t){const A=e.path.toArray(),n=t.path.toArray();let r=0;for(let s=0;s<A.length-2&&s<n.length-2;++s)if(r=fr(A[s],n[s]),r)return r;return r=fr(A.length,n.length),r||(r=fr(A[A.length-2],n[n.length-2]),r||fr(A[A.length-1],n[n.length-1]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.M=e}kt(e,t,A,n){const r=new Ia("createOrUpgrade",t);A<1&&n>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",na,{unique:!0}),e.createObjectStore("documentMutations")}(e),tu(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Ea.resolve();return A<3&&n>=3&&(0!==A&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tu(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),A={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mr.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",A)}(r)))),A<4&&n>=4&&(0!==A&&(s=s.next((()=>function(e,t){return t.store("mutations").qt().next((A=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",na,{unique:!0});const n=t.store("mutations"),r=A.map((e=>n.put(e)));return Ea.waitFor(r)}))}(e,r)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),A<5&&n>=5&&(s=s.next((()=>this.Qn(r)))),A<6&&n>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.jn(r))))),A<7&&n>=7&&(s=s.next((()=>this.Wn(r)))),A<8&&n>=8&&(s=s.next((()=>this.zn(e,r)))),A<9&&n>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),A<10&&n>=10&&(s=s.next((()=>this.Hn(r)))),A<11&&n>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),A<12&&n>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ma});t.createIndex("collectionPathOverlayIndex",wa,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ya,{unique:!1})}(e)}))),A<13&&n>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:oa});t.createIndex("documentKeyIndex",aa),t.createIndex("collectionGroupIndex",ca)}(e))).next((()=>this.Jn(e,r))).next((()=>e.deleteObjectStore("remoteDocuments")))),A<14&&n>=14&&(s=s.next((()=>{!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:fa}).createIndex("sequenceNumberIndex",ga,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:pa}).createIndex("documentKeyIndex",Ba,{unique:!1})}(e)}))),s}jn(e){let t=0;return e.store("remoteDocuments").Wt(((e,A)=>{t+=Ic(A)})).next((()=>{const A={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",A)}))}Qn(e){const t=e.store("mutationQueues"),A=e.store("mutations");return t.qt().next((t=>Ea.forEach(t,(t=>{const n=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return A.qt("userMutationsIndex",n).next((A=>Ea.forEach(A,(A=>{zn(A.userId===t.userId);const n=Ya(this.M,A);return Ec(e,t.userId,n).next((()=>{}))}))))}))))}Wn(e){const t=e.store("targetDocuments"),A=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const n=[];return A.Wt(((A,r)=>{const s=new Qr(A),i=function(e){return[0,Zo(e)]}(s);n.push(t.get(i).next((A=>A?Ea.resolve():(A=>t.put({targetId:0,path:Zo(A),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Ea.waitFor(n)))}))}zn(e,t){e.createObjectStore("collectionParents",{keyPath:da});const A=t.store("collectionParents"),n=new mc,r=e=>{if(n.add(e)){const t=e.lastSegment(),n=e.popLast();return A.put({collectionId:t,parent:Zo(n)})}};return t.store("remoteDocuments").Wt({jt:!0},((e,t)=>{const A=new Qr(e);return r(A.popLast())})).next((()=>t.store("documentMutations").Wt({jt:!0},(([e,t,A],n)=>{const s=Aa(t);return r(s.popLast())}))))}Hn(e){const t=e.store("targets");return t.Wt(((e,A)=>{const n=Xa(A),r=za(this.M,n);return t.put(r)}))}Jn(e,t){const A=t.store("remoteDocuments"),n=[];return A.Wt(((e,A)=>{const r=t.store("remoteDocumentsV14"),s=(i=A,i.document?new Pr(Qr.fromString(i.document.name).popFirst(5)):i.noDocument?Pr.fromSegments(i.noDocument.path):i.unknownDocument?Pr.fromSegments(i.unknownDocument.path):Xn()).path.toArray();var i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:A.readTime||[0,0],unknownDocument:A.unknownDocument,noDocument:A.noDocument,document:A.document,hasCommittedMutations:!!A.hasCommittedMutations};n.push(r.put(o))})).next((()=>Ea.waitFor(n)))}}function tu(e){e.createObjectStore("targetDocuments",{keyPath:la}).createIndex("documentTargetsIndex",ha,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ua,{unique:!0}),e.createObjectStore("targetGlobal")}const Au="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nu{constructor(e,t,A,n,r,s,i,o,a,c,u=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=A,this.Yn=r,this.window=s,this.document=i,this.Xn=a,this.Zn=c,this.ts=u,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=e=>Promise.resolve(),!nu.vt())throw new tr(er.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gc(this,n),this.hs=t+"main",this.M=new Va(o),this.ls=new ba(this.hs,this.ts,new eu(this.M)),this.fs=new kc(this.referenceDelegate,this.M),this.ds=function(e){return new jc(e)}(this.M),this._s=new tc,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===c&&jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tr(er.FAILED_PRECONDITION,Au);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.fs.getHighestSequenceNumber(e)))})).then((e=>{this.es=new lr(e,this.Xn)})).then((()=>{this.ns=!0})).catch((e=>(this.ls&&this.ls.close(),Promise.reject(e))))}Ts(e){return this.cs=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((async()=>{this.started&&await this.gs()})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>su(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Es(e).next((e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable((()=>this.cs(!1))))}))})).next((()=>this.As(e))).next((t=>this.isPrimary&&!t?this.Rs(e).next((()=>!1)):!!t&&this.bs(e).next((()=>!0)))))).catch((e=>{if(Da(e))return Wn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Wn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable((()=>this.cs(e))),this.isPrimary=e}))}Es(e){return ru(e).get("owner").next((e=>Ea.resolve(this.Ps(e))))}Vs(e){return su(e).delete(this.clientId)}async vs(){if(this.isPrimary&&!this.Ss(this.us,18e5)){this.us=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ra(e,"clientMetadata");return t.qt().next((e=>{const A=this.Ds(e,18e5),n=e.filter((e=>-1===A.indexOf(e)));return Ea.forEach(n,(e=>t.delete(e.clientId))).next((()=>n))}))})).catch((()=>[]));if(this.ws)for(const t of e)this.ws.removeItem(this.Cs(t.clientId))}}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.gs().then((()=>this.vs())).then((()=>this.Is()))))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Ea.resolve(!0):ru(e).get("owner").next((t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new tr(er.FAILED_PRECONDITION,Au);return!1}}return!(!this.networkEnabled||!this.inForeground)||su(e).qt().next((e=>void 0===this.Ds(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,A=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||A&&n)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Wn("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),await this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Na(e,lr.A);return this.Rs(t).next((()=>this.Vs(t)))})),this.ls.close(),this.Os()}Ds(e,t){return e.filter((e=>this.Ss(e.updateTimeMs,t)&&!this.xs(e.clientId)))}Fs(){return this.runTransaction("getActiveClients","readonly",(e=>su(e).qt().next((e=>this.Ds(e,18e5).map((e=>e.clientId))))))}get started(){return this.ns}getMutationQueue(e,t){return bc.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new yc(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return rc.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,A){Wn("IndexedDbPersistence","Starting transaction:",e);const n="readonly"===t?"readonly":"readwrite",r=14===(s=this.ts)?_a:13===s?Qa:12===s?va:11===s?Ca:void Xn();var s;let i;return this.ls.runTransaction(e,n,r,(n=>(i=new Na(n,this.es?this.es.next():lr.A),"readwrite-primary"===t?this.Es(i).next((e=>!!e||this.As(i))).next((t=>{if(!t)throw jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable((()=>this.cs(!1))),new tr(er.FAILED_PRECONDITION,Fa);return A(i)})).next((e=>this.bs(i).next((()=>e)))):this.$s(i).next((()=>A(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}$s(e){return ru(e).get("owner").next((e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new tr(er.FAILED_PRECONDITION,Au)}))}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ru(e).put("owner",t)}static vt(){return ba.vt()}Rs(e){const t=ru(e);return t.get("owner").next((e=>this.Ps(e)?(Wn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ea.resolve()))}Ss(e,t){const A=Date.now();return!(e<A-t)&&(!(e>A)||(jn(`Detected an update time that is in the future: ${e} > ${A}`),!1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.gs())))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,a.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const A=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Wn("IndexedDbPersistence",`Client '${e}' ${A?"is":"is not"} zombied in LocalStorage`),A}catch(e){return jn("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(Q){jn("Failed to set zombie client id.",Q)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(Q){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ru(e){return Ra(e,"owner")}function su(e){return Ra(e,"clientMetadata")}function iu(e,t){let A=e.projectId;return e.isDefaultDatabase||(A+="."+e.database),"firestore/"+t+"/"+A+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ou{constructor(e,t,A){this.ds=e,this.Bs=t,this.indexManager=A}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((A=>this.Us(e,t,A)))}Us(e,t,A){return this.ds.getEntry(e,t).next((e=>{for(const t of A)t.applyToLocalView(e);return e}))}qs(e,t){e.forEach(((e,A)=>{for(const n of t)n.applyToLocalView(A)}))}Ks(e,t){return this.ds.getEntries(e,t).next((t=>this.Gs(e,t).next((()=>t))))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.qs(t,e)))}Qs(e,t,A){return function(e){return Pr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Ai(t)?this.Ws(e,t,A):this.zs(e,t,A)}js(e,t){return this.Ls(e,new Pr(t)).next((e=>{let t=to();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Ws(e,t,A){const n=t.collectionGroup;let r=to();return this.indexManager.getCollectionParents(e,n).next((s=>Ea.forEach(s,(s=>{const i=function(e,t){return new Xs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(n));return this.zs(e,i,A).next((e=>{e.forEach(((e,t)=>{r=r.insert(e,t)}))}))})).next((()=>r))))}zs(e,t,A){let n;return this.ds.getAllFromCollection(e,t.path,A).next((A=>(n=A,this.Bs.getAllMutationBatchesAffectingQuery(e,t)))).next((e=>{for(const t of e)for(const e of t.mutations){const A=e.key;let r=n.get(A);null==r&&(r=ls.newInvalidDocument(A),n=n.insert(A,r)),ki(e,r,t.localWriteTime),r.isFoundDocument()||(n=n.remove(A))}})).next((()=>(n.forEach(((e,A)=>{ci(t,A)||(n=n.remove(e))})),n)))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t,A,n){this.targetId=e,this.fromCache=t,this.Hs=A,this.Js=n}static Ys(e,t){let A=so(),n=so();for(const r of t.docChanges)switch(r.type){case 0:A=A.add(r.doc.key);break;case 1:n=n.add(r.doc.key)}return new au(e,t.fromCache,A,n)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,A,n){return this.ti(e,t).next((r=>r||this.ei(e,t,n,A))).next((A=>A||this.ni(e,t)))}ti(e,t){return Ea.resolve(null)}ei(e,t,A,n){return Zs(t)||n.isEqual(mr.min())?this.ni(e,t):this.Zs.Ks(e,A).next((r=>{const s=this.si(t,r);return this.ii(t,s,A,n)?this.ni(e,t):(Gn()<=o["in"].DEBUG&&Wn("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ai(t)),this.ri(e,s,t,Bs(n,-1)))}))}si(e,t){let A=new _s(li(e));return t.forEach(((t,n)=>{ci(e,n)&&(A=A.add(n))})),A}ii(e,t,A,n){if(null===e.limit)return!1;if(A.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(n)>0)}ni(e,t){return Gn()<=o["in"].DEBUG&&Wn("QueryEngine","Using full collection scan to execute query:",ai(t)),this.Zs.Qs(e,t,ws.min())}ri(e,t,A,n){return this.Zs.Qs(e,A,n).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t,A,n){this.persistence=e,this.oi=t,this.M=n,this.ui=new Cs(fr),this.ai=new zi((e=>bs(e)),Ss),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(A)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new ou(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ui)))}}function lu(e,t,A,n){return new uu(e,t,A,n)}async function hu(e,t){const A=Zn(e);return await A.persistence.runTransaction("Handle user change","readonly",(e=>{let n;return A.Bs.getAllMutationBatches(e).next((r=>(n=r,A.li(t),A.Bs.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let i=so();for(const e of n){r.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return A.fi.Ks(e,i).next((e=>({di:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function du(e,t){const A=Zn(e);return A.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const n=t.batch.keys(),r=A.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,A,n){const r=A.batch,s=r.keys();let i=Ea.resolve();return s.forEach((e=>{i=i.next((()=>n.getEntry(t,e))).next((t=>{const s=A.docVersions.get(e);zn(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,A),t.isValidDocument()&&(t.setReadTime(A.commitVersion),n.addEntry(t)))}))})),i.next((()=>e.Bs.removeMutationBatch(t,r)))}(A,e,t,r).next((()=>r.apply(e))).next((()=>A.Bs.performConsistencyCheck(e))).next((()=>A.fi.Ks(e,n)))}))}function fu(e){const t=Zn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.fs.getLastRemoteSnapshotVersion(e)))}function gu(e,t){const A=Zn(e),n=t.snapshotVersion;let r=A.ui;return A.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=A.hi.newChangeBuffer({trackRemovals:!0});r=A.ui;const i=[];t.targetChanges.forEach(((s,o)=>{const a=r.get(o);if(!a)return;i.push(A.fs.removeMatchingKeys(e,s.removedDocuments,o).next((()=>A.fs.addMatchingKeys(e,s.addedDocuments,o))));let c=a.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(o)?c=c.withResumeToken(Ir.EMPTY_BYTE_STRING,mr.min()).withLastLimboFreeSnapshotVersion(mr.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,n)),r=r.insert(o,c),function(e,t,A){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)}(a,c,s)&&i.push(A.fs.updateTargetData(e,c))}));let o=Zi();if(t.documentUpdates.forEach((n=>{t.resolvedLimboDocuments.has(n)&&i.push(A.persistence.referenceDelegate.updateLimboDocument(e,n))})),i.push(pu(e,s,t.documentUpdates).next((e=>{o=e}))),!n.isEqual(mr.min())){const t=A.fs.getLastRemoteSnapshotVersion(e).next((t=>A.fs.setTargetsMetadata(e,e.currentSequenceNumber,n)));i.push(t)}return Ea.waitFor(i).next((()=>s.apply(e))).next((()=>A.fi.Gs(e,o))).next((()=>o))})).then((e=>(A.ui=r,e)))}function pu(e,t,A){let n=so();return A.forEach((e=>n=n.add(e))),t.getEntries(e,n).next((e=>{let n=Zi();return A.forEach(((A,r)=>{const s=e.get(A);r.isNoDocument()&&r.version.isEqual(mr.min())?(t.removeEntry(A,r.readTime),n=n.insert(A,r)):!s.isValidDocument()||r.version.compareTo(s.version)>0||0===r.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(r),n=n.insert(A,r)):Wn("LocalStore","Ignoring outdated watch update for ",A,". Current version:",s.version," Watch version:",r.version)})),n}))}function Bu(e,t){const A=Zn(e);return A.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),A.Bs.getNextMutationBatchAfterBatchId(e,t))))}function mu(e,t){const A=Zn(e);return A.persistence.runTransaction("Allocate target","readwrite",(e=>{let n;return A.fs.getTargetData(e,t).next((r=>r?(n=r,Ea.resolve(n)):A.fs.allocateTargetId(e).next((r=>(n=new Ka(t,r,0,e.currentSequenceNumber),A.fs.addTargetData(e,n).next((()=>n)))))))})).then((e=>{const n=A.ui.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(A.ui=A.ui.insert(e.targetId,e),A.ai.set(t,e.targetId)),e}))}async function wu(e,t,A){const n=Zn(e),r=n.ui.get(t),s=A?"readwrite":"readwrite-primary";try{A||await n.persistence.runTransaction("Release target",s,(e=>n.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!Da(e))throw e;Wn("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}n.ui=n.ui.remove(t),n.ai.delete(r.target)}function yu(e,t,A){const n=Zn(e);let r=mr.min(),s=so();return n.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,A){const n=Zn(e),r=n.ai.get(A);return void 0!==r?Ea.resolve(n.ui.get(r)):n.fs.getTargetData(t,A)}(n,e,ri(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,n.fs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>n.oi.Qs(e,t,A?r:mr.min(),A?s:so()))).next((e=>(Qu(n,ui(t),e),{documents:e,_i:s})))))}function Cu(e,t){const A=Zn(e),n=Zn(A.fs),r=A.ui.get(t);return r?Promise.resolve(r.target):A.persistence.runTransaction("Get target data","readonly",(e=>n.Et(e,t).next((e=>e?e.target:null))))}function vu(e,t){const A=Zn(e),n=A.ci.get(t)||mr.min();return A.persistence.runTransaction("Get new document changes","readonly",(e=>A.hi.getAllFromCollectionGroup(e,t,Bs(n,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Qu(A,t,e),e)))}function Qu(e,t,A){let n=mr.min();A.forEach(((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)})),e.ci.set(t,n)}async function _u(e,t,A,n){const r=Zn(e);let s=so(),i=Zi();for(const c of A){const e=t.wi(c.metadata.name);c.document&&(s=s.add(e));const A=t.mi(c);A.setReadTime(t.gi(c.metadata.readTime)),i=i.insert(e,A)}const o=r.hi.newChangeBuffer({trackRemovals:!0}),a=await mu(r,function(e){return ri($s(Qr.fromString(`__bundle__/docs/${e}`)))}(n));return r.persistence.runTransaction("Apply bundle documents","readwrite",(e=>pu(e,o,i).next((t=>(o.apply(e),t))).next((t=>r.fs.removeMatchingKeysForTargetId(e,a.targetId).next((()=>r.fs.addMatchingKeys(e,s,a.targetId))).next((()=>r.fi.Gs(e,t))).next((()=>t))))))}async function Fu(e,t,A=so()){const n=await mu(e,ri($a(t.bundledQuery))),r=Zn(e);return r.persistence.runTransaction("Save named query","readwrite",(e=>{const s=_o(t.readTime);if(n.snapshotVersion.compareTo(s)>=0)return r._s.saveNamedQuery(e,t);const i=n.withResumeToken(Ir.EMPTY_BYTE_STRING,s);return r.ui=r.ui.insert(i.targetId,i),r.fs.updateTargetData(e,i).next((()=>r.fs.removeMatchingKeysForTargetId(e,n.targetId))).next((()=>r.fs.addMatchingKeys(e,A,n.targetId))).next((()=>r._s.saveNamedQuery(e,t)))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return Ea.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var A;return this.yi.set(t.id,{id:(A=t).id,version:A.version,createTime:_o(A.createTime)}),Ea.resolve()}getNamedQuery(e,t){return Ea.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:$a(e.bundledQuery),readTime:_o(e.readTime)}}(t)),Ea.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this.overlays=new Cs(Pr.comparator),this.Ii=new Map}getOverlay(e,t){return Ea.resolve(this.overlays.get(t))}saveOverlays(e,t,A){return A.forEach(((A,n)=>{this.Xt(e,t,n)})),Ea.resolve()}removeOverlaysForBatchId(e,t,A){const n=this.Ii.get(A);return void 0!==n&&(n.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ii.delete(A)),Ea.resolve()}getOverlaysForCollection(e,t,A){const n=Ao(),r=t.length+1,s=new Pr(t.child("")),i=this.overlays.getIteratorFrom(s);for(;i.hasNext();){const e=i.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>A&&n.set(e.getKey(),e)}return Ea.resolve(n)}getOverlaysForCollectionGroup(e,t,A,n){let r=new Cs(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>A){let t=r.get(e.largestBatchId);null===t&&(t=Ao(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Ao(),o=r.getIterator();for(;o.hasNext();)if(o.getNext().value.forEach(((e,t)=>i.set(e,t))),i.size()>=n)break;return Ea.resolve(i)}Xt(e,t,A){if(null===A)return;const n=this.overlays.get(A.key);if(null!==n){const e=this.Ii.get(n.largestBatchId).delete(A.key);this.Ii.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(A.key,new Pa(t,A));let r=this.Ii.get(t);void 0===r&&(r=so(),this.Ii.set(t,r)),this.Ii.set(t,r.add(A.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.Ti=new _s(bu.Ei),this.Ai=new _s(bu.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const A=new bu(e,t);this.Ti=this.Ti.add(A),this.Ai=this.Ai.add(A)}bi(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Pi(new bu(e,t))}Vi(e,t){e.forEach((e=>this.removeReference(e,t)))}vi(e){const t=new Pr(new Qr([])),A=new bu(t,e),n=new bu(t,e+1),r=[];return this.Ai.forEachInRange([A,n],(e=>{this.Pi(e),r.push(e.key)})),r}Si(){this.Ti.forEach((e=>this.Pi(e)))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Pr(new Qr([])),A=new bu(t,e),n=new bu(t,e+1);let r=so();return this.Ai.forEachInRange([A,n],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new bu(e,0),A=this.Ti.firstAfterOrEqual(t);return null!==A&&e.isEqual(A.key)}}class bu{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Pr.comparator(e.key,t.key)||fr(e.Ci,t.Ci)}static Ri(e,t){return fr(e.Ci,t.Ci)||Pr.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new _s(bu.Ei)}checkEmpty(e){return Ea.resolve(0===this.Bs.length)}addMutationBatch(e,t,A,n){const r=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];const s=new Ma(r,t,A,n);this.Bs.push(s);for(const i of n)this.Ni=this.Ni.add(new bu(i.key,r)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return Ea.resolve(s)}lookupMutationBatch(e,t){return Ea.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const A=t+1,n=this.Mi(A),r=n<0?0:n;return Ea.resolve(this.Bs.length>r?this.Bs[r]:null)}getHighestUnacknowledgedBatchId(){return Ea.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return Ea.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const A=new bu(t,0),n=new bu(t,Number.POSITIVE_INFINITY),r=[];return this.Ni.forEachInRange([A,n],(e=>{const t=this.ki(e.Ci);r.push(t)})),Ea.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let A=new _s(fr);return t.forEach((e=>{const t=new bu(e,0),n=new bu(e,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([t,n],(e=>{A=A.add(e.Ci)}))})),Ea.resolve(this.Oi(A))}getAllMutationBatchesAffectingQuery(e,t){const A=t.path,n=A.length+1;let r=A;Pr.isDocumentKey(r)||(r=r.child(""));const s=new bu(new Pr(r),0);let i=new _s(fr);return this.Ni.forEachWhile((e=>{const t=e.key.path;return!!A.isPrefixOf(t)&&(t.length===n&&(i=i.add(e.Ci)),!0)}),s),Ea.resolve(this.Oi(i))}Oi(e){const t=[];return e.forEach((e=>{const A=this.ki(e);null!==A&&t.push(A)})),t}removeMutationBatch(e,t){zn(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let A=this.Ni;return Ea.forEach(t.mutations,(n=>{const r=new bu(n.key,t.batchId);return A=A.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)})).next((()=>{this.Ni=A}))}_n(e){}containsKey(e,t){const A=new bu(t,0),n=this.Ni.firstAfterOrEqual(A);return Ea.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.Bs.length,Ea.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e){this.$i=e,this.docs=new Cs(Pr.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const A=t.key,n=this.docs.get(A),r=n?n.size:0,s=this.$i(t);return this.docs=this.docs.insert(A,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,A.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const A=this.docs.get(t);return Ea.resolve(A?A.document.mutableCopy():ls.newInvalidDocument(t))}getEntries(e,t){let A=Zi();return t.forEach((e=>{const t=this.docs.get(e);A=A.insert(e,t?t.document.mutableCopy():ls.newInvalidDocument(e))})),Ea.resolve(A)}getAllFromCollection(e,t,A){let n=Zi();const r=new Pr(t.child("")),s=this.docs.getIteratorFrom(r);for(;s.hasNext();){const{key:e,value:{document:r}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||ys(ms(r),A)<=0||(n=n.insert(r.key,r.mutableCopy()))}return Ea.resolve(n)}getAllFromCollectionGroup(e,t,A,n){Xn()}Bi(e,t){return Ea.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Du(this)}getSize(e){return Ea.resolve(this.size)}}class Du extends Wc{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach(((A,n)=>{n.isValidDocument()?t.push(this.Kn.addEntry(e,n)):this.Kn.removeEntry(A)})),Ea.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.persistence=e,this.Li=new zi((e=>bs(e)),Ss),this.lastRemoteSnapshotVersion=mr.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Iu,this.targetCount=0,this.Ki=Hc.gn()}forEachTarget(e,t){return this.Li.forEach(((e,A)=>t(A))),Ea.resolve()}getLastRemoteSnapshotVersion(e){return Ea.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ea.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),Ea.resolve(this.highestTargetId)}setTargetsMetadata(e,t,A){return A&&(this.lastRemoteSnapshotVersion=A),t>this.Ui&&(this.Ui=t),Ea.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Hc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,Ea.resolve()}updateTargetData(e,t){return this.Tn(t),Ea.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Ea.resolve()}removeTargets(e,t,A){let n=0;const r=[];return this.Li.forEach(((s,i)=>{i.sequenceNumber<=t&&null===A.get(i.targetId)&&(this.Li.delete(s),r.push(this.removeMatchingKeysForTargetId(e,i.targetId)),n++)})),Ea.waitFor(r).next((()=>n))}getTargetCount(e){return Ea.resolve(this.targetCount)}getTargetData(e,t){const A=this.Li.get(t)||null;return Ea.resolve(A)}addMatchingKeys(e,t,A){return this.qi.bi(t,A),Ea.resolve()}removeMatchingKeys(e,t,A){this.qi.Vi(t,A);const n=this.persistence.referenceDelegate,r=[];return n&&t.forEach((t=>{r.push(n.markPotentiallyOrphaned(e,t))})),Ea.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),Ea.resolve()}getMatchingKeysForTargetId(e,t){const A=this.qi.Di(t);return Ea.resolve(A)}containsKey(e,t){return Ea.resolve(this.qi.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t){this.Gi={},this.overlays={},this.es=new lr(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new xu(this),this.indexManager=new Bc,this.ds=function(e){return new Su(e)}((e=>this.referenceDelegate.Qi(e))),this.M=new Va(t),this._s=new Uu(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Eu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let A=this.Gi[e.toKey()];return A||(A=new Tu(t,this.referenceDelegate),this.Gi[e.toKey()]=A),A}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,A){Wn("MemoryPersistence","Starting transaction:",e);const n=new ku(this.es.next());return this.referenceDelegate.ji(),A(n).next((e=>this.referenceDelegate.Wi(n).next((()=>e)))).toPromise().then((e=>(n.raiseOnCommittedEvent(),e)))}zi(e,t){return Ea.or(Object.values(this.Gi).map((A=>()=>A.containsKey(e,t))))}}class ku extends Ua{constructor(e){super(),this.currentSequenceNumber=e}}class Lu{constructor(e){this.persistence=e,this.Hi=new Iu,this.Ji=null}static Yi(e){return new Lu(e)}get Xi(){if(this.Ji)return this.Ji;throw Xn()}addReference(e,t,A){return this.Hi.addReference(A,t),this.Xi.delete(A.toString()),Ea.resolve()}removeReference(e,t,A){return this.Hi.removeReference(A,t),this.Xi.add(A.toString()),Ea.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),Ea.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach((e=>this.Xi.add(e.toString())));const A=this.persistence.getTargetCache();return A.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xi.add(e.toString())))})).next((()=>A.removeTargetData(e,t)))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ea.forEach(this.Xi,(A=>{const n=Pr.fromPath(A);return this.Zi(e,n).next((e=>{e||t.removeEntry(n,mr.min())}))})).next((()=>(this.Ji=null,t.apply(e))))}updateLimboDocument(e,t){return this.Zi(e,t).next((e=>{e?this.Xi.delete(t.toString()):this.Xi.add(t.toString())}))}Qi(e){return 0}Zi(e,t){return Ea.or([()=>Ea.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(e,t){return`firestore_clients_${e}_${t}`}function Ru(e,t,A){let n=`firestore_mutations_${e}_${A}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}function Mu(e,t){return`firestore_targets_${e}_${t}`}class Ou{constructor(e,t,A,n){this.user=e,this.batchId=t,this.state=A,this.error=n}static tr(e,t,A){const n=JSON.parse(A);let r,s="object"==typeof n&&-1!==["pending","acknowledged","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new tr(n.error.code,n.error.message))),s?new Ou(e,t,n.state,r):(jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${A}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pu{constructor(e,t,A){this.targetId=e,this.state=t,this.error=A}static tr(e,t){const A=JSON.parse(t);let n,r="object"==typeof A&&-1!==["not-current","current","rejected"].indexOf(A.state)&&(void 0===A.error||"object"==typeof A.error);return r&&A.error&&(r="string"==typeof A.error.message&&"string"==typeof A.error.code,r&&(n=new tr(A.error.code,A.error.message))),r?new Pu(e,A.state,n):(jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ku{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const A=JSON.parse(t);let n="object"==typeof A&&A.activeTargetIds instanceof Array,r=oo();for(let s=0;n&&s<A.activeTargetIds.length;++s)n=Or(A.activeTargetIds[s]),r=r.add(A.activeTargetIds[s]);return n?new Ku(e,r):(jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vu{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vu(t.clientId,t.onlineState):(jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gu{constructor(){this.activeTargetIds=oo()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qu{constructor(e,t,A,n,r){this.window=e,this.Yn=t,this.persistenceKey=A,this.ir=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Cs(fr),this.started=!1,this.cr=[];const s=A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.hr=Nu(this.persistenceKey,this.ir),this.lr=function(e){return`firestore_sequence_number_${e}`}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.ar=this.ar.insert(this.ir,new Gu),this.dr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.mr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.gr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Fs();for(const A of e){if(A===this.ir)continue;const e=this.getItem(Nu(this.persistenceKey,A));if(e){const t=Ku.tr(A,e);t&&(this.ar=this.ar.insert(t.clientId,t))}}this.yr();const t=this.storage.getItem(this.mr);if(t){const e=this.pr(t);e&&this.Ir(e)}for(const A of this.cr)this.ur(A);this.cr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach(((A,n)=>{n.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,A){this.Er(e,t,A),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const A=this.storage.getItem(Mu(this.persistenceKey,e));if(A){const n=Pu.tr(e,A);n&&(t=n.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mu(this.persistenceKey,e))}updateQueryState(e,t,A){this.br(e,t,A)}handleUserChange(e,t,A){t.forEach((e=>{this.Ar(e)})),this.currentUser=e,A.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Wn("SharedClientState","READ",e,t),t}setItem(e,t){Wn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Wn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){const t=e;if(t.storageArea===this.storage){if(Wn("SharedClientState","EVENT",t.key,t.newValue),t.key===this.hr)return void jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.dr.test(t.key)){if(null==t.newValue){const e=this.vr(t.key);return this.Sr(e,null)}{const e=this.Dr(t.key,t.newValue);if(e)return this.Sr(e.clientId,e)}}else if(this._r.test(t.key)){if(null!==t.newValue){const e=this.Cr(t.key,t.newValue);if(e)return this.Nr(e)}}else if(this.wr.test(t.key)){if(null!==t.newValue){const e=this.kr(t.key,t.newValue);if(e)return this.Mr(e)}}else if(t.key===this.mr){if(null!==t.newValue){const e=this.pr(t.newValue);if(e)return this.Ir(e)}}else if(t.key===this.lr){const e=function(e){let t=lr.A;if(null!=e)try{const A=JSON.parse(e);zn("number"==typeof A),t=A}catch(e){jn("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==lr.A&&this.sequenceNumberHandler(e)}else if(t.key===this.gr){const e=this.Or(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Fr(e))))}}else this.cr.push(t)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,A){const n=new Ou(this.currentUser,e,t,A),r=Ru(this.persistenceKey,this.currentUser,e);this.setItem(r,n.er())}Ar(e){const t=Ru(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){const t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}br(e,t,A){const n=Mu(this.persistenceKey,e),r=new Pu(e,t,A);this.setItem(n,r.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const A=this.vr(e);return Ku.tr(A,t)}Cr(e,t){const A=this._r.exec(e),n=Number(A[1]),r=void 0!==A[2]?A[2]:null;return Ou.tr(new Pn(r),n,t)}kr(e,t){const A=this.wr.exec(e),n=Number(A[1]);return Pu.tr(n,t)}pr(e){return Vu.tr(e)}Or(e){return JSON.parse(e)}async Nr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.$r(e.batchId,e.state,e.error);Wn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const A=t?this.ar.insert(e,t):this.ar.remove(e),n=this.Tr(this.ar),r=this.Tr(A),s=[],i=[];return r.forEach((e=>{n.has(e)||s.push(e)})),n.forEach((e=>{r.has(e)||i.push(e)})),this.syncEngine.Lr(s,i).then((()=>{this.ar=A}))}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=oo();return e.forEach(((e,A)=>{t=t.unionWith(A.activeTargetIds)})),t}}class Wu{constructor(){this.Ur=new Gu,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,A){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,A){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Gu,Promise.resolve()}handleUserChange(e,t,A){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{Kr(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Wn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Wn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.uo=t+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,A,n,r){const s=this.ho(e,t);Wn("RestConnection","Sending: ",s,A);const i={};return this.lo(i,n,r),this.fo(e,s,i,A).then((e=>(Wn("RestConnection","Received: ",e),e)),(t=>{throw Jn("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",A),t}))}_o(e,t,A,n,r){return this.co(e,t,A,n,r)}lo(e,t,A){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,A)=>e[A]=t)),A&&A.headers.forEach(((t,A)=>e[A]=t))}ho(e,t){const A=Yu[e];return`${this.uo}/v1/${t}:${A}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,A,n){return new Promise(((r,s)=>{const i=new Mn;i.listenOnce(Hn.COMPLETE,(()=>{try{switch(i.getLastErrorCode()){case xn.NO_ERROR:const t=i.getResponseJson();Wn("Connection","XHR received:",JSON.stringify(t)),r(t);break;case xn.TIMEOUT:Wn("Connection",'RPC "'+e+'" timed out'),s(new tr(er.DEADLINE_EXCEEDED,"Request time out"));break;case xn.HTTP_ERROR:const A=i.getStatus();if(Wn("Connection",'RPC "'+e+'" failed with status:',A,"response text:",i.getResponseText()),A>0){const e=i.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(er).indexOf(t)>=0?t:er.UNKNOWN}(e.status);s(new tr(t,e.message))}else s(new tr(er.UNKNOWN,"Server responded with status "+i.getStatus()))}else s(new tr(er.UNAVAILABLE,"Connection failed."));break;default:Xn()}}finally{Wn("Connection",'RPC "'+e+'" completed.')}}));const o=JSON.stringify(n);i.send(t,"POST",o,A,15)}))}wo(e,t,A){const n=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Sn(),s=Dn(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(i.xmlHttpFactory=new Nn({})),this.lo(i.initMessageHeaders,t,A),(0,a.uI)()||(0,a.b$)()||(0,a.d)()||(0,a.w1)()||(0,a.Mn)()||(0,a.ru)()||(i.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");Wn("Connection","Creating WebChannel: "+o,i);const c=r.createWebChannel(o,i);let u=!1,l=!1;const h=new Xu({Jr:e=>{l?Wn("Connection","Not sending because WebChannel is closed:",e):(u||(Wn("Connection","Opening WebChannel transport."),c.open(),u=!0),Wn("Connection","WebChannel sending:",e),c.send(e))},Yr:()=>c.close()}),d=(e,t,A)=>{e.listen(t,(e=>{try{A(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(c,Rn.EventType.OPEN,(()=>{l||Wn("Connection","WebChannel transport opened.")})),d(c,Rn.EventType.CLOSE,(()=>{l||(l=!0,Wn("Connection","WebChannel transport closed"),h.ro())})),d(c,Rn.EventType.ERROR,(e=>{l||(l=!0,Jn("Connection","WebChannel transport errored:",e),h.ro(new tr(er.UNAVAILABLE,"The operation could not be completed")))})),d(c,Rn.EventType.MESSAGE,(e=>{var t;if(!l){const A=e.data[0];zn(!!A);const n=A,r=n.error||(null===(t=n[0])||void 0===t?void 0:t.error);if(r){Wn("Connection","WebChannel received error:",r);const e=r.status;let t=function(e){const t=ji[e];if(void 0!==t)return Xi(t)}(e),A=r.message;void 0===t&&(t=er.INTERNAL,A="Unknown error status: "+e+" with message "+r.message),l=!0,h.ro(new tr(t,A)),c.close()}else Wn("Connection","WebChannel received:",A),h.oo(A)}})),d(s,kn.STAT_EVENT,(e=>{e.stat===Ln.PROXY?Wn("Connection","Detected buffering proxy"):e.stat===Ln.NOPROXY&&Wn("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.io()}),0),h}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(){return"undefined"!=typeof window?window:null}function Zu(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(e){return new yo(e,!0)}class tl{constructor(e,t,A=1e3,n=1.5,r=6e4){this.Yn=e,this.timerId=t,this.mo=A,this.yo=n,this.po=r,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),A=Math.max(0,Date.now()-this.Eo),n=Math.max(0,t-A);n>0&&Wn("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${A} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,n,(()=>(this.Eo=Date.now(),e()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t,A,n,r,s,i,o){this.Yn=e,this.Vo=A,this.vo=n,this.So=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=i,this.listener=o,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new tl(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.ko()&&await this.close(0)}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(()=>this.Bo())))}Lo(e){this.Uo(),this.stream.send(e)}async Bo(){if(this.Mo())return this.close(0)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}async close(e,t){this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==e?this.No.reset():t&&t.code===er.RESOURCE_EXHAUSTED?(jn(t.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):t&&t.code===er.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=e,await this.listener.eo(t)}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,A])=>{this.Do===t&&this.Qo(e,A)}),(t=>{e((()=>{const e=new tr(er.UNKNOWN,"Fetching auth token failed: "+t.message);return this.jo(e)}))}))}Qo(e,t){const A=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((()=>{A((()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,(()=>(this.Mo()&&(this.state=3),Promise.resolve()))),this.listener.Xr())))})),this.stream.eo((e=>{A((()=>this.jo(e)))})),this.stream.onMessage((e=>{A((()=>this.onMessage(e)))}))}Oo(){this.state=5,this.No.Ro((async()=>{this.state=0,this.start()}))}jo(e){return Wn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget((()=>this.Do===e?t():(Wn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nl extends Al{constructor(e,t,A,n,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,A,n,s),this.M=r}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=Lo(this.M,e),A=function(e){if(!("targetChange"in e))return mr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?mr.min():t.readTime?_o(t.readTime):mr.min()}(e);return this.listener.zo(t,A)}Ho(e){const t={};t.database=So(this.M),t.addTarget=function(e,t){let A;const n=t.target;return A=Ds(n)?{documents:Oo(e,n)}:{query:Po(e,n)},A.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?A.resumeToken=vo(e,t.resumeToken):t.snapshotVersion.compareTo(mr.min())>0&&(A.readTime=Co(e,t.snapshotVersion.toTimestamp())),A}(this.M,e);const A=Vo(this.M,e);A&&(t.labels=A),this.Lo(t)}Jo(e){const t={};t.database=So(this.M),t.removeTarget=e,this.Lo(t)}}class rl extends Al{constructor(e,t,A,n,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,A,n,s),this.M=r,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(zn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=Mo(e.writeResults,e.commitTime),A=_o(e.commitTime);return this.listener.tu(A,t)}return zn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=So(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>No(this.M,e)))};this.Lo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends class{}{constructor(e,t,A,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=A,this.M=n,this.su=!1}iu(){if(this.su)throw new tr(er.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,A){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([n,r])=>this.So.co(e,t,A,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===er.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tr(er.UNKNOWN,e.toString())}))}_o(e,t,A){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([n,r])=>this.So._o(e,t,A,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===er.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tr(er.UNKNOWN,e.toString())}))}terminate(){this.su=!0}}class il{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve()))))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(jn(t),this.uu=!1):Wn("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t,A,n,r){this.localStore=e,this.datastore=t,this.asyncQueue=A,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=r,this.gu.Kr((e=>{A.enqueueAndForget((async()=>{pl(this)&&(Wn("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Zn(e);t.wu.add(4),await cl(t),t.yu.set("Unknown"),t.wu.delete(4),await al(t)}(this))}))})),this.yu=new il(A,n)}}async function al(e){if(pl(e))for(const t of e.mu)await t(!0)}async function cl(e){for(const t of e.mu)await t(!1)}function ul(e,t){const A=Zn(e);A._u.has(t.targetId)||(A._u.set(t.targetId,t),gl(A)?fl(A):Hl(A).Mo()&&hl(A,t))}function ll(e,t){const A=Zn(e),n=Hl(A);A._u.delete(t),n.Mo()&&dl(A,t),0===A._u.size&&(n.Mo()?n.$o():pl(A)&&A.yu.set("Unknown"))}function hl(e,t){e.pu.Z(t.targetId),Hl(e).Ho(t)}function dl(e,t){e.pu.Z(t),Hl(e).Jo(t)}function fl(e){e.pu=new go({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e._u.get(t)||null}),Hl(e).start(),e.yu.au()}function gl(e){return pl(e)&&!Hl(e).ko()&&e._u.size>0}function pl(e){return 0===Zn(e).wu.size}function Bl(e){e.pu=void 0}async function ml(e){e._u.forEach(((t,A)=>{hl(e,t)}))}async function wl(e,t){Bl(e),gl(e)?(e.yu.lu(t),fl(e)):e.yu.set("Unknown")}async function yl(e,t,A){if(e.yu.set("Online"),t instanceof ho&&2===t.state&&t.cause)try{await async function(e,t){const A=t.cause;for(const n of t.targetIds)e._u.has(n)&&(await e.remoteSyncer.rejectListen(n,A),e._u.delete(n),e.pu.removeTarget(n))}(e,t)}catch(A){Wn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),A),await Cl(e,A)}else if(t instanceof uo?e.pu.ut(t):t instanceof lo?e.pu._t(t):e.pu.ht(t),!A.isEqual(mr.min()))try{const t=await fu(e.localStore);A.compareTo(t)>=0&&await function(e,t){const A=e.pu.yt(t);return A.targetChanges.forEach(((A,n)=>{if(A.resumeToken.approximateByteSize()>0){const r=e._u.get(n);r&&e._u.set(n,r.withResumeToken(A.resumeToken,t))}})),A.targetMismatches.forEach((t=>{const A=e._u.get(t);if(!A)return;e._u.set(t,A.withResumeToken(Ir.EMPTY_BYTE_STRING,A.snapshotVersion)),dl(e,t);const n=new Ka(A.target,t,1,A.sequenceNumber);hl(e,n)})),e.remoteSyncer.applyRemoteEvent(A)}(e,A)}catch(t){Wn("RemoteStore","Failed to raise snapshot:",t),await Cl(e,t)}}async function Cl(e,t,A){if(!Da(t))throw t;e.wu.add(1),await cl(e),e.yu.set("Offline"),A||(A=()=>fu(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Wn("RemoteStore","Retrying IndexedDB access"),await A(),e.wu.delete(1),await al(e)}))}function vl(e,t){return t().catch((A=>Cl(e,A,t)))}async function Ql(e){const t=Zn(e),A=kl(t);let n=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;_l(t);)try{const e=await Bu(t.localStore,n);if(null===e){0===t.du.length&&A.$o();break}n=e.batchId,Fl(t,e)}catch(e){await Cl(t,e)}Ul(t)&&El(t)}function _l(e){return pl(e)&&e.du.length<10}function Fl(e,t){e.du.push(t);const A=kl(e);A.Mo()&&A.Xo&&A.Zo(t.mutations)}function Ul(e){return pl(e)&&!kl(e).ko()&&e.du.length>0}function El(e){kl(e).start()}async function Il(e){kl(e).nu()}async function bl(e){const t=kl(e);for(const A of e.du)t.Zo(A.mutations)}async function Tl(e,t,A){const n=e.du.shift(),r=Oa.from(n,t,A);await vl(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Ql(e)}async function Sl(e,t){t&&kl(e).Xo&&await async function(e,t){if(A=t.code,Yi(A)&&A!==er.ABORTED){const A=e.du.shift();kl(e).Fo(),await vl(e,(()=>e.remoteSyncer.rejectFailedWrite(A.batchId,t))),await Ql(e)}var A}(e,t),Ul(e)&&El(e)}async function Dl(e,t){const A=Zn(e);A.asyncQueue.verifyOperationInProgress(),Wn("RemoteStore","RemoteStore received new credentials");const n=pl(A);A.wu.add(3),await cl(A),n&&A.yu.set("Unknown"),await A.remoteSyncer.handleCredentialChange(t),A.wu.delete(3),await al(A)}async function xl(e,t){const A=Zn(e);t?(A.wu.delete(2),await al(A)):t||(A.wu.add(2),await cl(A),A.yu.set("Unknown"))}function Hl(e){return e.Iu||(e.Iu=function(e,t,A){const n=Zn(e);return n.iu(),new nl(t,n.So,n.authCredentials,n.appCheckCredentials,n.M,A)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{Xr:ml.bind(null,e),eo:wl.bind(null,e),zo:yl.bind(null,e)}),e.mu.push((async t=>{t?(e.Iu.Fo(),gl(e)?fl(e):e.yu.set("Unknown")):(await e.Iu.stop(),Bl(e))}))),e.Iu}function kl(e){return e.Tu||(e.Tu=function(e,t,A){const n=Zn(e);return n.iu(),new rl(t,n.So,n.authCredentials,n.appCheckCredentials,n.M,A)}(e.datastore,e.asyncQueue,{Xr:Il.bind(null,e),eo:Sl.bind(null,e),eu:bl.bind(null,e),tu:Tl.bind(null,e)}),e.mu.push((async t=>{t?(e.Tu.Fo(),await Ql(e)):(await e.Tu.stop(),e.du.length>0&&(Wn("RemoteStore",`Stopping write stream with ${e.du.length} pending writes`),e.du=[]))}))),e.Tu
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ll{constructor(e,t,A,n,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=A,this.op=n,this.removalCallback=r,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,A,n,r){const s=Date.now()+A,i=new Ll(e,t,s,n,r);return i.start(A),i}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tr(er.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nl(e,t){if(jn("AsyncQueue",`${t}: ${e}`),Da(e))return new tr(er.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.comparator=e?(t,A)=>e(t,A)||Pr.comparator(t.key,A.key):(e,t)=>Pr.comparator(e.key,t.key),this.keyedMap=to(),this.sortedSet=new Cs(this.comparator)}static emptySet(e){return new Rl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,A)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),A=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=A.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const A=new Rl;return A.comparator=this.comparator,A.keyedMap=e,A.sortedSet=t,A}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.Eu=new Cs(Pr.comparator)}track(e){const t=e.doc.key,A=this.Eu.get(t);A?0!==e.type&&3===A.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==A.type?this.Eu=this.Eu.insert(t,{type:A.type,doc:e.doc}):2===e.type&&2===A.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===A.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===A.type?this.Eu=this.Eu.remove(t):1===e.type&&2===A.type?this.Eu=this.Eu.insert(t,{type:1,doc:A.doc}):0===e.type&&1===A.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Xn():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal(((t,A)=>{e.push(A)})),e}}class Ol{constructor(e,t,A,n,r,s,i,o){this.query=e,this.docs=t,this.oldDocs=A,this.docChanges=n,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=i,this.excludesMetadataChanges=o}static fromInitialDocuments(e,t,A,n){const r=[];return t.forEach((e=>{r.push({type:0,doc:e})})),new Ol(e,t,Rl.emptySet(t),r,A,n,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ii(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,A=e.docChanges;if(t.length!==A.length)return!1;for(let n=0;n<t.length;n++)if(t[n].type!==A[n].type||!t[n].doc.isEqual(A[n].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.Ru=void 0,this.listeners=[]}}class Kl{constructor(){this.queries=new zi((e=>oi(e)),ii),this.onlineState="Unknown",this.bu=new Set}}async function Vl(e,t){const A=Zn(e),n=t.query;let r=!1,s=A.queries.get(n);if(s||(r=!0,s=new Pl),r)try{s.Ru=await A.onListen(n)}catch(e){const A=Nl(e,`Initialization of query '${ai(t.query)}' failed`);return void t.onError(A)}A.queries.set(n,s),s.listeners.push(t),t.Pu(A.onlineState),s.Ru&&t.Vu(s.Ru)&&jl(A)}async function Gl(e,t){const A=Zn(e),n=t.query;let r=!1;const s=A.queries.get(n);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),r=0===s.listeners.length)}if(r)return A.queries.delete(n),A.onUnlisten(n)}function ql(e,t){const A=Zn(e);let n=!1;for(const r of t){const e=r.query,t=A.queries.get(e);if(t){for(const e of t.listeners)e.Vu(r)&&(n=!0);t.Ru=r}}n&&jl(A)}function Wl(e,t,A){const n=Zn(e),r=n.queries.get(t);if(r)for(const s of r.listeners)s.onError(A);n.queries.delete(t)}function jl(e){e.bu.forEach((e=>{e.next()}))}class Jl{constructor(e,t,A){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=A||{}}Vu(e){if(!this.options.includeMetadataChanges){const t=[];for(const A of e.docChanges)3!==A.type&&t.push(A);e=new Ol(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){if(!e.fromCache)return!0;const A="Offline"!==t;return(!this.options.ku||!A)&&(!e.docs.isEmpty()||"Offline"===t)}Cu(e){if(e.docChanges.length>0)return!0;const t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.M=e}wi(e){return Io(this.M,e)}mi(e){return e.metadata.exists?Ho(this.M,e.document,!1):ls.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return _o(e)}}class zl{constructor(e,t,A){this.Ou=e,this.localStore=t,this.M=A,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$l(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const A=Qr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(A.get(A.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,A=new Xl(this.M);for(const n of e)if(n.metadata.queries){const e=A.wi(n.metadata.name);for(const A of n.metadata.queries){const n=(t.get(A)||so()).add(e);t.set(A,n)}}return t}async complete(){const e=await _u(this.localStore,new Xl(this.M),this.documents,this.Ou.id),t=this.$u(this.documents);for(const A of this.queries)await Fu(this.localStore,A,t.get(A.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:e}}}function $l(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.key=e}}class eh{constructor(e){this.key=e}}class th{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=so(),this.mutatedKeys=so(),this.Gu=li(e),this.Qu=new Rl(this.Gu)}get ju(){return this.Uu}Wu(e,t){const A=t?t.zu:new Ml,n=t?t.Qu:this.Qu;let r=t?t.mutatedKeys:this.mutatedKeys,s=n,i=!1;const o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,a="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal(((e,t)=>{const c=n.get(e),u=ci(this.query,t)?t:null,l=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let d=!1;c&&u?c.data.isEqual(u.data)?l!==h&&(A.track({type:3,doc:u}),d=!0):this.Hu(c,u)||(A.track({type:2,doc:u}),d=!0,(o&&this.Gu(u,o)>0||a&&this.Gu(u,a)<0)&&(i=!0)):!c&&u?(A.track({type:0,doc:u}),d=!0):c&&!u&&(A.track({type:1,doc:c}),d=!0,(o||a)&&(i=!0)),d&&(u?(s=s.add(u),r=h?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),A.track({type:1,doc:e})}return{Qu:s,zu:A,ii:i,mutatedKeys:r}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,A){const n=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const r=e.zu.Au();r.sort(((e,t)=>function(e,t){const A=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xn()}};return A(e)-A(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.Gu(e.doc,t.doc))),this.Ju(A);const s=t?this.Yu():[],i=0===this.Ku.size&&this.current?1:0,o=i!==this.qu;return this.qu=i,0!==r.length||o?{snapshot:new Ol(this.query,e.Qu,n,r,e.mutatedKeys,0===i,o,!1),Xu:s}:{Xu:s}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ml,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach((e=>this.Uu=this.Uu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Uu=this.Uu.delete(e))),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=so(),this.Qu.forEach((e=>{this.Zu(e.key)&&(this.Ku=this.Ku.add(e.key))}));const t=[];return e.forEach((e=>{this.Ku.has(e)||t.push(new eh(e))})),this.Ku.forEach((A=>{e.has(A)||t.push(new Zl(A))})),t}ta(e){this.Uu=e._i,this.Ku=so();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Ol.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Ah{constructor(e,t,A){this.query=e,this.targetId=t,this.view=A}}class nh{constructor(e){this.key=e,this.na=!1}}class rh{constructor(e,t,A,n,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=A,this.sharedClientState=n,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.sa={},this.ia=new zi((e=>oi(e)),ii),this.ra=new Map,this.oa=new Set,this.ua=new Cs(Pr.comparator),this.aa=new Map,this.ca=new Iu,this.ha={},this.la=new Map,this.fa=Hc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}async function sh(e,t){const A=Hh(e);let n,r;const s=A.ia.get(t);if(s)n=s.targetId,A.sharedClientState.addLocalQueryTarget(n),r=s.view.ea();else{const e=await mu(A.localStore,ri(t));A.isPrimaryClient&&ul(A.remoteStore,e);const s=A.sharedClientState.addLocalQueryTarget(e.targetId);n=e.targetId,r=await ih(A,t,n,"current"===s)}return r}async function ih(e,t,A,n){e._a=(t,A,n)=>async function(e,t,A,n){let r=t.view.Wu(A);r.ii&&(r=await yu(e.localStore,t.query,!1).then((({documents:e})=>t.view.Wu(e,r))));const s=n&&n.targetChanges.get(t.targetId),i=t.view.applyChanges(r,e.isPrimaryClient,s);return wh(e,t.targetId,i.Xu),i.snapshot}(e,t,A,n);const r=await yu(e.localStore,t,!0),s=new th(t,r._i),i=s.Wu(r.documents),o=co.createSynthesizedTargetChangeForCurrentChange(A,n&&"Offline"!==e.onlineState),a=s.applyChanges(i,e.isPrimaryClient,o);wh(e,A,a.Xu);const c=new Ah(t,A,s);return e.ia.set(t,c),e.ra.has(A)?e.ra.get(A).push(t):e.ra.set(A,[t]),a.snapshot}async function oh(e,t){const A=Zn(e),n=A.ia.get(t),r=A.ra.get(n.targetId);if(r.length>1)return A.ra.set(n.targetId,r.filter((e=>!ii(e,t)))),void A.ia.delete(t);A.isPrimaryClient?(A.sharedClientState.removeLocalQueryTarget(n.targetId),A.sharedClientState.isActiveQueryTarget(n.targetId)||await wu(A.localStore,n.targetId,!1).then((()=>{A.sharedClientState.clearQueryState(n.targetId),ll(A.remoteStore,n.targetId),Bh(A,n.targetId)})).catch(Mc)):(Bh(A,n.targetId),await wu(A.localStore,n.targetId,!0))}async function ah(e,t,A){const n=kh(e);try{const e=await function(e,t){const A=Zn(e),n=Br.now(),r=t.reduce(((e,t)=>e.add(t.key)),so());let s;return A.persistence.runTransaction("Locally write mutations","readwrite",(e=>A.fi.Ks(e,r).next((r=>{s=r;const i=[];for(const e of t){const t=Li(e,s.get(e.key));null!=t&&i.push(new Oi(e.key,t,us(t.value.mapValue),Si.exists(!0)))}return A.Bs.addMutationBatch(e,n,i,t)})))).then((e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s})))}(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),function(e,t,A){let n=e.ha[e.currentUser.toKey()];n||(n=new Cs(fr)),n=n.insert(t,A),e.ha[e.currentUser.toKey()]=n}(n,e.batchId,A),await vh(n,e.changes),await Ql(n.remoteStore)}catch(e){const t=Nl(e,"Failed to persist write");A.reject(t)}}async function ch(e,t){const A=Zn(e);try{const e=await gu(A.localStore,t);t.targetChanges.forEach(((e,t)=>{const n=A.aa.get(t);n&&(zn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?zn(n.na):e.removedDocuments.size>0&&(zn(n.na),n.na=!1))})),await vh(A,e,t)}catch(e){await Mc(e)}}function uh(e,t,A){const n=Zn(e);if(n.isPrimaryClient&&0===A||!n.isPrimaryClient&&1===A){const e=[];n.ia.forEach(((A,n)=>{const r=n.view.Pu(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const A=Zn(e);A.onlineState=t;let n=!1;A.queries.forEach(((e,A)=>{for(const r of A.listeners)r.Pu(t)&&(n=!0)})),n&&jl(A)}(n.eventManager,t),e.length&&n.sa.zo(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function lh(e,t,A){const n=Zn(e);n.sharedClientState.updateQueryState(t,"rejected",A);const r=n.aa.get(t),s=r&&r.key;if(s){let e=new Cs(Pr.comparator);e=e.insert(s,ls.newNoDocument(s,mr.min()));const A=so().add(s),r=new ao(mr.min(),new Map,new _s(fr),e,A);await ch(n,r),n.ua=n.ua.remove(s),n.aa.delete(t),Ch(n)}else await wu(n.localStore,t,!1).then((()=>Bh(n,t,A))).catch(Mc)}async function hh(e,t){const A=Zn(e),n=t.batch.batchId;try{const e=await du(A.localStore,t);ph(A,n,null),gh(A,n),A.sharedClientState.updateMutationState(n,"acknowledged"),await vh(A,e)}catch(e){await Mc(e)}}async function dh(e,t,A){const n=Zn(e);try{const e=await function(e,t){const A=Zn(e);return A.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let n;return A.Bs.lookupMutationBatch(e,t).next((t=>(zn(null!==t),n=t.keys(),A.Bs.removeMutationBatch(e,t)))).next((()=>A.Bs.performConsistencyCheck(e))).next((()=>A.fi.Ks(e,n)))}))}(n.localStore,t);ph(n,t,A),gh(n,t),n.sharedClientState.updateMutationState(t,"rejected",A),await vh(n,e)}catch(A){await Mc(A)}}async function fh(e,t){const A=Zn(e);pl(A.remoteStore)||Wn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Zn(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.Bs.getHighestUnacknowledgedBatchId(e)))}(A.localStore);if(-1===e)return void t.resolve();const n=A.la.get(e)||[];n.push(t),A.la.set(e,n)}catch(e){const A=Nl(e,"Initialization of waitForPendingWrites() operation failed");t.reject(A)}}function gh(e,t){(e.la.get(t)||[]).forEach((e=>{e.resolve()})),e.la.delete(t)}function ph(e,t,A){const n=Zn(e);let r=n.ha[n.currentUser.toKey()];if(r){const e=r.get(t);e&&(A?e.reject(A):e.resolve(),r=r.remove(t)),n.ha[n.currentUser.toKey()]=r}}function Bh(e,t,A=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.ra.get(t))e.ia.delete(n),A&&e.sa.wa(n,A);e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((t=>{e.ca.containsKey(t)||mh(e,t)}))}function mh(e,t){e.oa.delete(t.path.canonicalString());const A=e.ua.get(t);null!==A&&(ll(e.remoteStore,A),e.ua=e.ua.remove(t),e.aa.delete(A),Ch(e))}function wh(e,t,A){for(const n of A)n instanceof Zl?(e.ca.addReference(n.key,t),yh(e,n)):n instanceof eh?(Wn("SyncEngine","Document no longer in limbo: "+n.key),e.ca.removeReference(n.key,t),e.ca.containsKey(n.key)||mh(e,n.key)):Xn()}function yh(e,t){const A=t.key,n=A.path.canonicalString();e.ua.get(A)||e.oa.has(n)||(Wn("SyncEngine","New document in limbo: "+A),e.oa.add(n),Ch(e))}function Ch(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){const t=e.oa.values().next().value;e.oa.delete(t);const A=new Pr(Qr.fromString(t)),n=e.fa.next();e.aa.set(n,new nh(A)),e.ua=e.ua.insert(A,n),ul(e.remoteStore,new Ka(ri($s(A.path)),n,2,lr.A))}}async function vh(e,t,A){const n=Zn(e),r=[],s=[],i=[];n.ia.isEmpty()||(n.ia.forEach(((e,o)=>{i.push(n._a(o,t,A).then((e=>{if(e){n.isPrimaryClient&&n.sharedClientState.updateQueryState(o.targetId,e.fromCache?"not-current":"current"),r.push(e);const t=au.Ys(o.targetId,e);s.push(t)}})))})),await Promise.all(i),n.sa.zo(r),await async function(e,t){const A=Zn(e);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ea.forEach(t,(t=>Ea.forEach(t.Hs,(n=>A.persistence.referenceDelegate.addReference(e,t.targetId,n))).next((()=>Ea.forEach(t.Js,(n=>A.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))))))}catch(e){if(!Da(e))throw e;Wn("LocalStore","Failed to update sequence numbers: "+e)}for(const n of t){const e=n.targetId;if(!n.fromCache){const t=A.ui.get(e),n=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(n);A.ui=A.ui.insert(e,r)}}}(n.localStore,s))}async function Qh(e,t){const A=Zn(e);if(!A.currentUser.isEqual(t)){Wn("SyncEngine","User change. New user:",t.toKey());const e=await hu(A.localStore,t);A.currentUser=t,function(e,t){e.la.forEach((e=>{e.forEach((e=>{e.reject(new tr(er.CANCELLED,t))}))})),e.la.clear()}(A,"'waitForPendingWrites' promise is rejected due to a user change."),A.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await vh(A,e.di)}}function _h(e,t){const A=Zn(e),n=A.aa.get(t);if(n&&n.na)return so().add(n.key);{let e=so();const n=A.ra.get(t);if(!n)return e;for(const t of n){const n=A.ia.get(t);e=e.unionWith(n.view.ju)}return e}}async function Fh(e,t){const A=Zn(e),n=await yu(A.localStore,t.query,!0),r=t.view.ta(n);return A.isPrimaryClient&&wh(A,t.targetId,r.Xu),r}async function Uh(e,t){const A=Zn(e);return vu(A.localStore,t).then((e=>vh(A,e)))}async function Eh(e,t,A,n){const r=Zn(e),s=await function(e,t){const A=Zn(e),n=Zn(A.Bs);return A.persistence.runTransaction("Lookup mutation documents","readonly",(e=>n.fn(e,t).next((t=>t?A.fi.Ks(e,t):Ea.resolve(null)))))}(r.localStore,t);null!==s?("pending"===A?await Ql(r.remoteStore):"acknowledged"===A||"rejected"===A?(ph(r,t,n||null),gh(r,t),function(e,t){Zn(Zn(e).Bs)._n(t)}(r.localStore,t)):Xn(),await vh(r,s)):Wn("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Ih(e,t){const A=Zn(e);if(Hh(A),kh(A),!0===t&&!0!==A.da){const e=A.sharedClientState.getAllActiveQueryTargets(),t=await bh(A,e.toArray());A.da=!0,await xl(A.remoteStore,!0);for(const n of t)ul(A.remoteStore,n)}else if(!1===t&&!1!==A.da){const e=[];let t=Promise.resolve();A.ra.forEach(((n,r)=>{A.sharedClientState.isLocalQueryTarget(r)?e.push(r):t=t.then((()=>(Bh(A,r),wu(A.localStore,r,!0)))),ll(A.remoteStore,r)})),await t,await bh(A,e),function(e){const t=Zn(e);t.aa.forEach(((e,A)=>{ll(t.remoteStore,A)})),t.ca.Si(),t.aa=new Map,t.ua=new Cs(Pr.comparator)}(A),A.da=!1,await xl(A.remoteStore,!1)}}async function bh(e,t,A){const n=Zn(e),r=[],s=[];for(const i of t){let e;const t=n.ra.get(i);if(t&&0!==t.length){e=await mu(n.localStore,ri(t[0]));for(const e of t){const t=n.ia.get(e),A=await Fh(n,t);A.snapshot&&s.push(A.snapshot)}}else{const t=await Cu(n.localStore,i);e=await mu(n.localStore,t),await ih(n,Th(t),i,!1)}r.push(e)}return n.sa.zo(s),r}function Th(e){return zs(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Sh(e){const t=Zn(e);return Zn(Zn(t.localStore).persistence).Fs()}async function Dh(e,t,A,n){const r=Zn(e);if(r.da)return void Wn("SyncEngine","Ignoring unexpected query state notification.");const s=r.ra.get(t);if(s&&s.length>0)switch(A){case"current":case"not-current":{const e=await vu(r.localStore,ui(s[0])),n=ao.createSynthesizedRemoteEventForCurrentChange(t,"current"===A);await vh(r,e,n);break}case"rejected":await wu(r.localStore,t,!0),Bh(r,t,n);break;default:Xn()}}async function xh(e,t,A){const n=Hh(e);if(n.da){for(const e of t){if(n.ra.has(e)){Wn("SyncEngine","Adding an already active target "+e);continue}const t=await Cu(n.localStore,e),A=await mu(n.localStore,t);await ih(n,Th(t),A.targetId,!1),ul(n.remoteStore,A)}for(const e of A)n.ra.has(e)&&await wu(n.localStore,e,!1).then((()=>{ll(n.remoteStore,e),Bh(n,e)})).catch(Mc)}}function Hh(e){const t=Zn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ch.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_h.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lh.bind(null,t),t.sa.zo=ql.bind(null,t.eventManager),t.sa.wa=Wl.bind(null,t.eventManager),t}function kh(e){const t=Zn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dh.bind(null,t),t}function Lh(e,t,A){const n=Zn(e);(async function(e,t,A){try{const n=await t.getMetadata();if(await function(e,t){const A=Zn(e),n=_o(t.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",(e=>A._s.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(n)>=0))}(e.localStore,n))return await t.close(),A._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(n)),Promise.resolve(new Set);A._updateProgress($l(n));const r=new zl(n,e.localStore,t.M);let s=await t.ma();for(;s;){const e=await r.Fu(s);e&&A._updateProgress(e),s=await t.ma()}const i=await r.complete();return await vh(e,i.Lu,void 0),await function(e,t){const A=Zn(e);return A.persistence.runTransaction("Save bundle","readwrite",(e=>A._s.saveBundleMetadata(e,t)))}(e.localStore,n),A._completeWith(i.progress),Promise.resolve(i.Bu)}catch(e){return Jn("SyncEngine",`Loading bundle failed with ${e}`),A._failWith(e),Promise.resolve(new Set)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(n,t,A).then((e=>{n.sharedClientState.notifyBundleLoaded(e)}))}class Nh{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=el(e.databaseInfo.databaseId),this.sharedClientState=this.ga(e),this.persistence=this.ya(e),await this.persistence.start(),this.gcScheduler=this.pa(e),this.localStore=this.Ia(e)}pa(e){return null}Ia(e){return lu(this.persistence,new cu,e.initialUser,this.M)}ya(e){return new Hu(Lu.Yi,this.M)}ga(e){return new Wu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Rh extends Nh{constructor(e,t,A){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=A,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ta.initialize(this,e),await kh(this.Ta.syncEngine),await Ql(this.Ta.remoteStore),await this.persistence.Ts((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Ia(e){return lu(this.persistence,new cu,e.initialUser,this.M)}pa(e){const t=this.persistence.referenceDelegate.garbageCollector;return new Kc(t,e.asyncQueue)}ya(e){const t=iu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),A=void 0!==this.cacheSizeBytes?Uc.withCacheSize(this.cacheSizeBytes):Uc.DEFAULT;return new nu(this.synchronizeTabs,t,e.clientId,A,e.asyncQueue,$u(),Zu(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Wu}}class Mh extends Rh{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ta.syncEngine;this.sharedClientState instanceof qu&&(this.sharedClientState.syncEngine={$r:Eh.bind(null,t),Br:Dh.bind(null,t),Lr:xh.bind(null,t),Fs:Sh.bind(null,t),Fr:Uh.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ts((async e=>{await Ih(this.Ta.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())}))}ga(e){const t=$u();if(!qu.vt(t))throw new tr(er.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const A=iu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qu(t,e.asyncQueue,A,e.clientId,e.initialUser)}}class Oh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>uh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qh.bind(null,this.syncEngine),await xl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Kl}createDatastore(e){const t=el(e.databaseInfo.databaseId),A=(n=e.databaseInfo,new zu(n));var n;return function(e,t,A,n){return new sl(e,t,A,n)}(e.authCredentials,e.appCheckCredentials,A,t)}createRemoteStore(e){return t=this.localStore,A=this.datastore,n=e.asyncQueue,r=e=>uh(this.syncEngine,e,0),s=Ju.vt()?new Ju:new ju,new ol(t,A,n,r,s);var t,A,n,r,s}createSyncEngine(e,t){return function(e,t,A,n,r,s,i){const o=new rh(e,t,A,n,r,s);return i&&(o.da=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Zn(e);Wn("RemoteStore","RemoteStore shutting down."),t.wu.add(5),await cl(t),t.gu.shutdown(),t.yu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(e,t=10240){let A=0;return{async read(){if(A<e.byteLength){const n={value:e.slice(A,A+t),done:!1};return A+=t,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Ar,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((e=>{e&&e.Mu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Ra.cancel()}async getMetadata(){return this.metadata.promise}async ma(){return await this.getMetadata(),this.Pa()}async Pa(){const e=await this.Va();if(null===e)return null;const t=this.ba.decode(e),A=Number(t);isNaN(A)&&this.va(`length string (${t}) is not valid number`);const n=await this.Sa(A);return new Yl(JSON.parse(n),e.length+A)}Da(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Va(){for(;this.Da()<0;)if(await this.Ca())break;if(0===this.buffer.length)return null;const e=this.Da();e<0&&this.va("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Sa(e){for(;this.buffer.length<e;)await this.Ca()&&this.va("Reached the end of bundle when more is expected.");const t=this.ba.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ca(){const e=await this.Ra.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new tr(er.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const A=Zn(e),n=So(A.M)+"/documents",r={documents:t.map((e=>Eo(A.M,e)))},s=await A._o("BatchGetDocuments",n,r),i=new Map;s.forEach((e=>{const t=ko(A.M,e);i.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=i.get(e.toString());zn(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const A=Pr.fromPath(t);this.mutations.push(new qi(A,this.precondition(A)))})),await async function(e,t){const A=Zn(e),n=So(A.M)+"/documents",r={writes:t.map((e=>No(A.M,e)))};await A.co("Commit",n,r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xn();t=mr.min()}const A=this.readVersions.get(e.key.toString());if(A){if(!t.isEqual(A))throw new tr(er.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Si.updateTime(t):Si.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mr.min()))throw new tr(er.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Si.updateTime(t)}return Si.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,A,n,r){this.asyncQueue=e,this.datastore=t,this.options=A,this.updateFunction=n,this.deferred=r,this.xa=A.maxAttempts,this.No=new tl(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){this.No.Ro((async()=>{const e=new Gh(this.datastore),t=this.ka(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ma(e)}))))})).catch((e=>{this.Ma(e)}))}))}ka(e){try{const t=this.updateFunction(e);return!Rr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Na(),Promise.resolve())))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Yi(t)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t,A,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=A,this.databaseInfo=n,this.user=Pn.UNAUTHENTICATED,this.clientId=dr.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(A,(async e=>{Wn("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(A,(e=>(Wn("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tr(er.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const A=Nl(t,"Failed to shutdown persistence");e.reject(A)}})),e.promise}}async function jh(e,t){e.asyncQueue.verifyOperationInProgress(),Wn("FirestoreClient","Initializing OfflineComponentProvider");const A=await e.getConfiguration();await t.initialize(A);let n=A.initialUser;e.setCredentialChangeListener((async e=>{n.isEqual(e)||(await hu(t.localStore,e),n=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function Jh(e,t){e.asyncQueue.verifyOperationInProgress();const A=await Yh(e);Wn("FirestoreClient","Initializing OnlineComponentProvider");const n=await e.getConfiguration();await t.initialize(A,n),e.setCredentialChangeListener((e=>Dl(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,A)=>Dl(t.remoteStore,A))),e.onlineComponents=t}async function Yh(e){return e.offlineComponents||(Wn("FirestoreClient","Using default OfflineComponentProvider"),await jh(e,new Nh)),e.offlineComponents}async function Xh(e){return e.onlineComponents||(Wn("FirestoreClient","Using default OnlineComponentProvider"),await Jh(e,new Oh)),e.onlineComponents}function zh(e){return Yh(e).then((e=>e.persistence))}function $h(e){return Yh(e).then((e=>e.localStore))}function Zh(e){return Xh(e).then((e=>e.remoteStore))}function ed(e){return Xh(e).then((e=>e.syncEngine))}async function td(e){const t=await Xh(e),A=t.eventManager;return A.onListen=sh.bind(null,t.syncEngine),A.onUnlisten=oh.bind(null,t.syncEngine),A}function Ad(e){return e.asyncQueue.enqueue((async()=>{const t=await zh(e),A=await Zh(e);return t.setNetworkEnabled(!0),function(e){const t=Zn(e);return t.wu.delete(0),al(t)}(A)}))}function nd(e){return e.asyncQueue.enqueue((async()=>{const t=await zh(e),A=await Zh(e);return t.setNetworkEnabled(!1),async function(e){const t=Zn(e);t.wu.add(0),await cl(t),t.yu.set("Offline")}(A)}))}function rd(e,t){const A=new Ar;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,A){try{const n=await function(e,t){const A=Zn(e);return A.persistence.runTransaction("read document","readonly",(e=>A.fi.Ls(e,t)))}(e,t);n.isFoundDocument()?A.resolve(n):n.isNoDocument()?A.resolve(null):A.reject(new tr(er.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const n=Nl(e,`Failed to get document '${t} from cache`);A.reject(n)}}(await $h(e),t,A))),A.promise}function sd(e,t,A={}){const n=new Ar;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,A,n,r){const s=new Kh({next:s=>{t.enqueueAndForget((()=>Gl(e,i)));const o=s.docs.has(A);!o&&s.fromCache?r.reject(new tr(er.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&s.fromCache&&n&&"server"===n.source?r.reject(new tr(er.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),i=new Jl($s(A.path),s,{includeMetadataChanges:!0,ku:!0});return Vl(e,i)}(await td(e),e.asyncQueue,t,A,n))),n.promise}function id(e,t){const A=new Ar;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,A){try{const n=await yu(e,t,!0),r=new th(t,n._i),s=r.Wu(n.documents),i=r.applyChanges(s,!1);A.resolve(i.snapshot)}catch(e){const n=Nl(e,`Failed to execute query '${t} against cache`);A.reject(n)}}(await $h(e),t,A))),A.promise}function od(e,t,A={}){const n=new Ar;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,A,n,r){const s=new Kh({next:A=>{t.enqueueAndForget((()=>Gl(e,i))),A.fromCache&&"server"===n.source?r.reject(new tr(er.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(A)},error:e=>r.reject(e)}),i=new Jl(A,s,{includeMetadataChanges:!0,ku:!0});return Vl(e,i)}(await td(e),e.asyncQueue,t,A,n))),n.promise}function ad(e,t){const A=new Kh(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Zn(e).bu.add(t),t.next()}(await td(e),A))),()=>{A.Aa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Zn(e).bu.delete(t)}(await td(e),A)))}}function cd(e,t,A){const n=new Ar;return e.asyncQueue.enqueueAndForget((async()=>{const r=await function(e){return Xh(e).then((e=>e.datastore))}(e);new qh(e.asyncQueue,r,A,t,n).run()})),n.promise}function ud(e,t,A,n){const r=function(e,t){let A;return A="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new Vh(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ph(e,t);if(e instanceof ArrayBuffer)return Ph(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(A),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(A,el(t));e.asyncQueue.enqueueAndForget((async()=>{Lh(await ed(e),r,n)}))}function ld(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const A=Zn(e);return A.persistence.runTransaction("Get named query","readonly",(e=>A._s.getNamedQuery(e,t)))}(await $h(e),t)))}const hd=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(e,t,A){if(!A)throw new tr(er.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function fd(e,t,A,n){if(!0===t&&!0===n)throw new tr(er.INVALID_ARGUMENT,`${e} and ${A} cannot be used together.`)}function gd(e){if(!Pr.isDocumentKey(e))throw new tr(er.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function pd(e){if(Pr.isDocumentKey(e))throw new tr(er.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Bd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Xn()}function md(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tr(er.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const A=Bd(e);throw new tr(er.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${A}`)}}return e}function wd(e,t){if(t<=0)throw new tr(er.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new tr(er.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tr(er.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t,A){this._authCredentials=t,this._appCheckCredentials=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yd({}),this._settingsFrozen=!1,e instanceof Nr?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new tr(er.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nr(e.options.projectId)}(e))}get app(){if(!this._app)throw new tr(er.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tr(er.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new rr;switch(e.type){case"gapi":const t=e.client;return zn(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ar(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new tr(er.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hd.get(e);t&&(Wn("ComponentProvider","Removing Datastore"),hd.delete(e),t.terminate())}(this),Promise.resolve()}}function vd(e,t,A,n={}){var r;const s=(e=md(e,Cd))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Jn("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${A}`,ssl:!1})),n.mockUserToken){let t,A;if("string"==typeof n.mockUserToken)t=n.mockUserToken,A=Pn.MOCK_USER;else{t=(0,a.Sg)(n.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new tr(er.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Pn(s)}e._authCredentials=new sr(new nr(t,A))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,A){this.converter=t,this._key=A,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qd(this.firestore,e,this._key)}}class _d{constructor(e,t,A){this.converter=t,this._query=A,this.type="query",this.firestore=e}withConverter(e){return new _d(this.firestore,e,this._query)}}class Fd extends _d{constructor(e,t,A){super(e,t,$s(A)),this._path=A,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qd(this.firestore,null,new Pr(e))}withConverter(e){return new Fd(this.firestore,e,this._path)}}function Ud(e,t,...A){if(e=(0,a.m9)(e),dd("collection","path",t),e instanceof Cd){const n=Qr.fromString(t,...A);return pd(n),new Fd(e,null,n)}{if(!(e instanceof Qd||e instanceof Fd))throw new tr(er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qr.fromString(t,...A));return pd(n),new Fd(e.firestore,null,n)}}function Ed(e,t){if(e=md(e,Cd),dd("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new tr(er.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _d(e,null,function(e){return new Xs(Qr.emptyPath(),e)}(t))}function Id(e,t,...A){if(e=(0,a.m9)(e),1===arguments.length&&(t=dr.R()),dd("doc","path",t),e instanceof Cd){const n=Qr.fromString(t,...A);return gd(n),new Qd(e,null,new Pr(n))}{if(!(e instanceof Qd||e instanceof Fd))throw new tr(er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qr.fromString(t,...A));return gd(n),new Qd(e.firestore,e instanceof Fd?e.converter:null,new Pr(n))}}function bd(e,t){return e=(0,a.m9)(e),t=(0,a.m9)(t),(e instanceof Qd||e instanceof Fd)&&(t instanceof Qd||t instanceof Fd)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Td(e,t){return e=(0,a.m9)(e),t=(0,a.m9)(t),e instanceof _d&&t instanceof _d&&e.firestore===t.firestore&&ii(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Sd{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new tl(this,"async_queue_retry"),this.Qa=()=>{const e=Zu();e&&Wn("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const e=Zu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Zu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise((()=>{}));const t=new Ar;return this.Wa((()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.$a.push(e),this.za())))}async za(){if(0!==this.$a.length){try{await this.$a[0](),this.$a.shift(),this.No.reset()}catch(Q){if(!Da(Q))throw Q;Wn("AsyncQueue","Operation failed with retryable error: "+Q)}this.$a.length>0&&this.No.Ro((()=>this.za()))}}Wa(e){const t=this.Fa.then((()=>(this.qa=!0,e().catch((e=>{this.Ua=e,this.qa=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);throw jn("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.qa=!1,e))))));return this.Fa=t,t}enqueueAfterDelay(e,t,A){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const n=Ll.createAndSchedule(this,e,t,A,(e=>this.Ha(e)));return this.La.push(n),n}ja(){this.Ua&&Xn()}verifyOperationInProgress(){}async Ja(){let e;do{e=this.Fa,await e}while(e!==this.Fa)}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then((()=>{this.La.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()}))}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Dd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const A=e;for(const n of t)if(n in A&&"function"==typeof A[n])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class xd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,A){this._progressObserver={next:e,error:t,complete:A}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=-1;class kd extends Cd{constructor(e,t,A){super(e,t,A),this.type="firestore",this._queue=new Sd,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Nd(this),this._firestoreClient.terminate()}}function Ld(e){return e._firestoreClient||Nd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Nd(e){var t;const A=e._freezeSettings(),n=function(e,t,A,n){return new Lr(e,t,A,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,n.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,A);e._firestoreClient=new Wh(e._authCredentials,e._appCheckCredentials,e._queue,n)}function Rd(e,t){jd(e=md(e,kd));const A=Ld(e),n=e._freezeSettings(),r=new Oh;return Od(A,r,new Rh(r,n.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Md(e){jd(e=md(e,kd));const t=Ld(e),A=e._freezeSettings(),n=new Oh;return Od(t,n,new Mh(n,A.cacheSizeBytes))}function Od(e,t,A){const n=new Ar;return e.asyncQueue.enqueue((async()=>{try{await jh(e,A),await Jh(e,t),n.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===er.FAILED_PRECONDITION||e.code===er.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),n.reject(e)}})).then((()=>n.promise))}function Pd(e){if(e._initialized&&!e._terminated)throw new tr(er.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ar;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!ba.vt())return Promise.resolve();const t=e+"main";await ba.delete(t)}(iu(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function Kd(e){return function(e){const t=new Ar;return e.asyncQueue.enqueueAndForget((async()=>fh(await ed(e),t))),t.promise}(Ld(e=md(e,kd)))}function Vd(e){return Ad(Ld(e=md(e,kd)))}function Gd(e){return nd(Ld(e=md(e,kd)))}function qd(e,t){const A=Ld(e=md(e,kd)),n=new xd;return ud(A,e._databaseId,t,n),n}function Wd(e,t){return ld(Ld(e=md(e,kd)),t).then((t=>t?new _d(e,null,t.query):null))}function jd(e){if(e._initialized||e._terminated)throw new tr(er.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new tr(er.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Yd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yd(Ir.fromBase64String(e))}catch(e){throw new tr(er.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Yd(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tr(er.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tr(er.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fr(this._lat,e._lat)||fr(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=/^__.*__$/;class Zd{constructor(e,t,A){this.data=e,this.fieldMask=t,this.fieldTransforms=A}toMutation(e,t){return null!==this.fieldMask?new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mi(e,this.data,t,this.fieldTransforms)}}class ef{constructor(e,t,A){this.data=e,this.fieldMask=t,this.fieldTransforms=A}toMutation(e,t){return new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xn()}}class Af{constructor(e,t,A,n,r,s){this.settings=e,this.databaseId=t,this.M=A,this.ignoreUndefinedProperties=n,void 0===r&&this.tc(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const A=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.nc({path:A,ic:!1});return n.rc(e),n}oc(e){var t;const A=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.nc({path:A,ic:!1});return n.tc(),n}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Qf(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(tf(this.ec)&&$d.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class nf{constructor(e,t,A){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=A||el(e)}lc(e,t,A,n=!1){return new Af({ec:e,methodName:t,hc:A,path:Fr.emptyPath(),ic:!1,cc:n},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function rf(e){const t=e._freezeSettings(),A=el(e._databaseId);return new nf(e._databaseId,!!t.ignoreUndefinedProperties,A)}function sf(e,t,A,n,r,s={}){const i=e.lc(s.merge||s.mergeFields?2:0,t,A,r);wf("Data must be an object, but it was:",i,n);const o=Bf(n,i);let a,c;if(s.merge)a=new Ur(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const e=[];for(const n of s.mergeFields){const r=yf(t,n,A);if(!i.contains(r))throw new tr(er.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);_f(e,r)||e.push(r)}a=new Ur(e),c=i.fieldTransforms.filter((e=>a.covers(e.field)))}else a=null,c=i.fieldTransforms;return new Zd(new cs(o),a,c)}class of extends Xd{_toFieldTransform(e){if(2!==e.ec)throw 1===e.ec?e.ac(`${this._methodName}() can only appear at the top level of your update data`):e.ac(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof of}}function af(e,t,A){return new Af({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:A},t.databaseId,t.M,t.ignoreUndefinedProperties)}class cf extends Xd{_toFieldTransform(e){return new Ii(e.path,new yi)}isEqual(e){return e instanceof cf}}class uf extends Xd{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=af(this,e,!0),A=this.fc.map((e=>pf(e,t))),n=new Ci(A);return new Ii(e.path,n)}isEqual(e){return this===e}}class lf extends Xd{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=af(this,e,!0),A=this.fc.map((e=>pf(e,t))),n=new Qi(A);return new Ii(e.path,n)}isEqual(e){return this===e}}class hf extends Xd{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Fi(e.M,gi(e.M,this.dc));return new Ii(e.path,t)}isEqual(e){return this===e}}function df(e,t,A,n){const r=e.lc(1,t,A);wf("Data must be an object, but it was:",r,n);const s=[],i=cs.empty();yr(n,((e,n)=>{const o=vf(t,e,A);n=(0,a.m9)(n);const c=r.oc(o);if(n instanceof of)s.push(o);else{const e=pf(n,c);null!=e&&(s.push(o),i.set(o,e))}}));const o=new Ur(s);return new ef(i,o,r.fieldTransforms)}function ff(e,t,A,n,r,s){const i=e.lc(1,t,A),o=[yf(t,n,A)],c=[r];if(s.length%2!=0)throw new tr(er.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let a=0;a<s.length;a+=2)o.push(yf(t,s[a])),c.push(s[a+1]);const u=[],l=cs.empty();for(let d=o.length-1;d>=0;--d)if(!_f(u,o[d])){const e=o[d];let t=c[d];t=(0,a.m9)(t);const A=i.oc(e);if(t instanceof of)u.push(e);else{const n=pf(t,A);null!=n&&(u.push(e),l.set(e,n))}}const h=new Ur(u);return new ef(l,h,i.fieldTransforms)}function gf(e,t,A,n=!1){return pf(A,e.lc(n?4:3,t))}function pf(e,t){if(mf(e=(0,a.m9)(e)))return wf("Unsupported field value:",t,e),Bf(e,t);if(e instanceof Xd)return function(e,t){if(!tf(t.ec))throw t.ac(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ac(`${e._methodName}() is not currently supported inside arrays`);const A=e._toFieldTransform(t);A&&t.fieldTransforms.push(A)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){const A=[];let n=0;for(const r of e){let e=pf(r,t.uc(n));null==e&&(e={nullValue:"NULL_VALUE"}),A.push(e),n++}return{arrayValue:{values:A}}}(e,t)}return function(e,t){if(null===(e=(0,a.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return gi(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const A=Br.fromDate(e);return{timestampValue:Co(t.M,A)}}if(e instanceof Br){const A=new Br(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Co(t.M,A)}}if(e instanceof zd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Yd)return{bytesValue:vo(t.M,e._byteString)};if(e instanceof Qd){const A=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(A))throw t.ac(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:Fo(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac(`Unsupported field value: ${Bd(e)}`)}(e,t)}function Bf(e,t){const A={};return Cr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yr(e,((e,n)=>{const r=pf(n,t.sc(e));null!=r&&(A[e]=r)})),{mapValue:{fields:A}}}function mf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Br||e instanceof zd||e instanceof Yd||e instanceof Qd||e instanceof Xd)}function wf(e,t,A){if(!mf(A)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(A)){const n=Bd(A);throw"an object"===n?t.ac(e+" a custom object"):t.ac(e+" "+n)}}function yf(e,t,A){if((t=(0,a.m9)(t))instanceof Jd)return t._internalPath;if("string"==typeof t)return vf(e,t);throw Qf("Field path arguments must be of type string or ",e,!1,void 0,A)}const Cf=new RegExp("[~\\*/\\[\\]]");function vf(e,t,A){if(t.search(Cf)>=0)throw Qf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,A);try{return new Jd(...t.split("."))._internalPath}catch(n){throw Qf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,A)}}function Qf(e,t,A,n,r){const s=n&&!n.isEmpty(),i=void 0!==r;let o=`Function ${t}() called with invalid data`;A&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${n}`),i&&(a+=` in document ${r}`),a+=")"),new tr(er.INVALID_ARGUMENT,o+e+a)}function _f(e,t){return e.some((e=>e.isEqual(t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,A,n,r){this._firestore=e,this._userDataWriter=t,this._key=A,this._document=n,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Qd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uf extends Ff{data(){return super.data()}}function Ef(e,t){return"string"==typeof t?vf(e,t):t instanceof Jd?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bf extends Ff{constructor(e,t,A,n,r,s){super(e,t,A,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const A=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==A)return this._userDataWriter.convertValue(A,t.serverTimestamps)}}}class Tf extends bf{data(e={}){return super.data(e)}}class Sf{constructor(e,t,A,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new If(n.hasPendingWrites,n.fromCache),this.query=A}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((A=>{e.call(t,new Tf(this._firestore,this._userDataWriter,A.key,A,new If(this._snapshot.mutatedKeys.has(A.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tr(er.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((A=>({type:"added",doc:new Tf(e._firestore,e._userDataWriter,A.doc.key,A.doc,new If(e._snapshot.mutatedKeys.has(A.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let A=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const n=new Tf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new If(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=A.indexOf(t.doc.key),A=A.delete(t.doc.key)),1!==t.type&&(A=A.add(t.doc),s=A.indexOf(t.doc.key)),{type:Df(t.type),doc:n,oldIndex:r,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Df(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xn()}}function xf(e,t){return e instanceof bf&&t instanceof bf?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Sf&&t instanceof Sf&&e._firestore===t._firestore&&Td(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new tr(er.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kf{}function Lf(e,...t){for(const A of t)e=A._apply(e);return e}class Nf extends kf{constructor(e,t,A){super(),this._c=e,this.wc=t,this.mc=A,this.type="where"}_apply(e){const t=rf(e.firestore),A=function(e,t,A,n,r,s,i){let o;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new tr(er.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){$f(i,s);const t=[];for(const A of i)t.push(zf(n,e,A));o={arrayValue:{values:t}}}else o=zf(n,e,i)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||$f(i,s),o=gf(A,t,i,"in"===s||"not-in"===s);const a=Ls.create(r,s,o);return function(e,t){if(t.S()){const A=ti(e);if(null!==A&&!A.isEqual(t.field))throw new tr(er.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${A.toString()}' and '${t.field.toString()}'`);const n=ei(e);null!==n&&Zf(e,t.field,n)}const A=function(e,t){for(const A of e.filters)if(t.indexOf(A.op)>=0)return A.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==A)throw A===t.op?new tr(er.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new tr(er.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${A.toString()}' filters.`)}(e,a),a}(e._query,"where",t,e.firestore._databaseId,this._c,this.wc,this.mc);return new _d(e.firestore,e.converter,function(e,t){const A=e.filters.concat([t]);return new Xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),A,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,A))}}function Rf(e,t,A){const n=t,r=Ef("where",e);return new Nf(r,n,A)}class Mf extends kf{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(e,t,A){if(null!==e.startAt)throw new tr(er.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new tr(er.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const n=new Ws(t,A);return function(e,t){if(null===ei(e)){const A=ti(e);null!==A&&Zf(e,A,t.field)}}(e,n),n}(e._query,this._c,this.gc);return new _d(e.firestore,e.converter,function(e,t){const A=e.explicitOrderBy.concat([t]);return new Xs(e.path,e.collectionGroup,A,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Of(e,t="asc"){const A=t,n=Ef("orderBy",e);return new Mf(n,A)}class Pf extends kf{constructor(e,t,A){super(),this.type=e,this.yc=t,this.Ic=A}_apply(e){return new _d(e.firestore,e.converter,si(e._query,this.yc,this.Ic))}}function Kf(e){return wd("limit",e),new Pf("limit",e,"F")}function Vf(e){return wd("limitToLast",e),new Pf("limitToLast",e,"L")}class Gf extends kf{constructor(e,t,A){super(),this.type=e,this.Tc=t,this.Ec=A}_apply(e){const t=Xf(e,this.type,this.Tc,this.Ec);return new _d(e.firestore,e.converter,function(e,t){return new Xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function qf(...e){return new Gf("startAt",e,!0)}function Wf(...e){return new Gf("startAfter",e,!1)}class jf extends kf{constructor(e,t,A){super(),this.type=e,this.Tc=t,this.Ec=A}_apply(e){const t=Xf(e,this.type,this.Tc,this.Ec);return new _d(e.firestore,e.converter,function(e,t){return new Xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Jf(...e){return new jf("endBefore",e,!1)}function Yf(...e){return new jf("endAt",e,!0)}function Xf(e,t,A,n){if(A[0]=(0,a.m9)(A[0]),A[0]instanceof Ff)return function(e,t,A,n,r){if(!n)throw new tr(er.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${A}().`);const s=[];for(const i of ni(e))if(i.field.isKeyField())s.push(zr(t,n.key));else{const e=n.data.field(i.field);if(xr(e))throw new tr(er.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+i.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=i.field.canonicalString();throw new tr(er.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new qs(s,r)}(e._query,e.firestore._databaseId,t,A[0]._document,n);{const r=rf(e.firestore);return function(e,t,A,n,r,s){const i=e.explicitOrderBy;if(r.length>i.length)throw new tr(er.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const o=[];for(let a=0;a<r.length;a++){const s=r[a];if(i[a].field.isKeyField()){if("string"!=typeof s)throw new tr(er.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof s}`);if(!Ai(e)&&-1!==s.indexOf("/"))throw new tr(er.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${s}' contains a slash.`);const A=e.path.child(Qr.fromString(s));if(!Pr.isDocumentKey(A))throw new tr(er.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const r=new Pr(A);o.push(zr(t,r))}else{const e=gf(A,n,s);o.push(e)}}return new qs(o,s)}(e._query,e.firestore._databaseId,r,t,A,n)}}function zf(e,t,A){if("string"==typeof(A=(0,a.m9)(A))){if(""===A)throw new tr(er.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ai(t)&&-1!==A.indexOf("/"))throw new tr(er.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${A}' contains a '/' character.`);const n=t.path.child(Qr.fromString(A));if(!Pr.isDocumentKey(n))throw new tr(er.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return zr(e,new Pr(n))}if(A instanceof Qd)return zr(e,A._key);throw new tr(er.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bd(A)}.`)}function $f(e,t){if(!Array.isArray(e)||0===e.length)throw new tr(er.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new tr(er.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Zf(e,t,A){if(!A.isEqual(t))throw new tr(er.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${A.toString()}' instead.`)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{convertValue(e,t="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xn()}}convertObject(e,t){const A={};return yr(e.fields,((e,n)=>{A[e]=this.convertValue(n,t)})),A}convertGeoPoint(e){return new zd(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const A=Hr(e);return null==A?null:this.convertValue(A,t);case"estimate":return this.convertTimestamp(kr(e));default:return null}}convertTimestamp(e){const t=Tr(e);return new Br(t.seconds,t.nanos)}convertDocumentKey(e,t){const A=Qr.fromString(e);zn($o(A));const n=new Nr(A.get(1),A.get(3)),r=new Pr(A.popFirst(5));return n.isEqual(t)||jn(`Document ${r} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(e,t,A){let n;return n=e?A&&(A.merge||A.mergeFields)?e.toFirestore(t,A):e.toFirestore(t):t,n}class ng extends tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qd(this.firestore,null,t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rf(e)}set(e,t,A){this._verifyNotCommitted();const n=sg(e,this._firestore),r=Ag(n.converter,t,A),s=sf(this._dataReader,"WriteBatch.set",n._key,r,null!==n.converter,A);return this._mutations.push(s.toMutation(n._key,Si.none())),this}update(e,t,A,...n){this._verifyNotCommitted();const r=sg(e,this._firestore);let s;return s="string"==typeof(t=(0,a.m9)(t))||t instanceof Jd?ff(this._dataReader,"WriteBatch.update",r._key,t,A,n):df(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Si.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sg(e,this._firestore);return this._mutations=this._mutations.concat(new Gi(t._key,Si.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tr(er.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sg(e,t){if((e=(0,a.m9)(e)).firestore!==t)throw new tr(er.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(e){e=md(e,Qd);const t=md(e.firestore,kd);return sd(Ld(t),e._key).then((A=>yg(t,e,A)))}class og extends tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qd(this.firestore,null,t)}}function ag(e){e=md(e,Qd);const t=md(e.firestore,kd),A=Ld(t),n=new og(t);return rd(A,e._key).then((A=>new bf(t,n,e._key,A,new If(null!==A&&A.hasLocalMutations,!0),e.converter)))}function cg(e){e=md(e,Qd);const t=md(e.firestore,kd);return sd(Ld(t),e._key,{source:"server"}).then((A=>yg(t,e,A)))}function ug(e){e=md(e,_d);const t=md(e.firestore,kd),A=Ld(t),n=new og(t);return Hf(e._query),od(A,e._query).then((A=>new Sf(t,n,e,A)))}function lg(e){e=md(e,_d);const t=md(e.firestore,kd),A=Ld(t),n=new og(t);return id(A,e._query).then((A=>new Sf(t,n,e,A)))}function hg(e){e=md(e,_d);const t=md(e.firestore,kd),A=Ld(t),n=new og(t);return od(A,e._query,{source:"server"}).then((A=>new Sf(t,n,e,A)))}function dg(e,t,A){e=md(e,Qd);const n=md(e.firestore,kd),r=Ag(e.converter,t,A);return wg(n,[sf(rf(n),"setDoc",e._key,r,null!==e.converter,A).toMutation(e._key,Si.none())])}function fg(e,t,A,...n){e=md(e,Qd);const r=md(e.firestore,kd),s=rf(r);let i;return i="string"==typeof(t=(0,a.m9)(t))||t instanceof Jd?ff(s,"updateDoc",e._key,t,A,n):df(s,"updateDoc",e._key,t),wg(r,[i.toMutation(e._key,Si.exists(!0))])}function gg(e){return wg(md(e.firestore,kd),[new Gi(e._key,Si.none())])}function pg(e,t){const A=md(e.firestore,kd),n=Id(e),r=Ag(e.converter,t);return wg(A,[sf(rf(e.firestore),"addDoc",n._key,r,null!==e.converter,{}).toMutation(n._key,Si.exists(!1))]).then((()=>n))}function Bg(e,...t){var A,n,r;e=(0,a.m9)(e);let s={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Dd(t[i])||(s=t[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges};if(Dd(t[i])){const e=t[i];t[i]=null===(A=e.next)||void 0===A?void 0:A.bind(e),t[i+1]=null===(n=e.error)||void 0===n?void 0:n.bind(e),t[i+2]=null===(r=e.complete)||void 0===r?void 0:r.bind(e)}let c,u,l;if(e instanceof Qd)u=md(e.firestore,kd),l=$s(e._key.path),c={next:A=>{t[i]&&t[i](yg(u,e,A))},error:t[i+1],complete:t[i+2]};else{const A=md(e,_d);u=md(A.firestore,kd),l=A._query;const n=new og(u);c={next:e=>{t[i]&&t[i](new Sf(u,n,A,e))},error:t[i+1],complete:t[i+2]},Hf(e._query)}return function(e,t,A,n){const r=new Kh(n),s=new Jl(t,r,A);return e.asyncQueue.enqueueAndForget((async()=>Vl(await td(e),s))),()=>{r.Aa(),e.asyncQueue.enqueueAndForget((async()=>Gl(await td(e),s)))}}(Ld(u),l,o,c)}function mg(e,t){return ad(Ld(e=md(e,kd)),Dd(t)?t:{next:t})}function wg(e,t){return function(e,t){const A=new Ar;return e.asyncQueue.enqueueAndForget((async()=>ah(await ed(e),t,A))),A.promise}(Ld(e),t)}function yg(e,t,A){const n=A.docs.get(t._key),r=new og(e);return new bf(e,r,t._key,n,new If(A.hasPendingWrites,A.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rf(e)}get(e){const t=sg(e,this._firestore),A=new ng(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Xn();const n=e[0];if(n.isFoundDocument())return new Ff(this._firestore,A,n.key,n,t.converter);if(n.isNoDocument())return new Ff(this._firestore,A,t._key,null,t.converter);throw Xn()}))}set(e,t,A){const n=sg(e,this._firestore),r=Ag(n.converter,t,A),s=sf(this._dataReader,"Transaction.set",n._key,r,null!==n.converter,A);return this._transaction.set(n._key,s),this}update(e,t,A,...n){const r=sg(e,this._firestore);let s;return s="string"==typeof(t=(0,a.m9)(t))||t instanceof Jd?ff(this._dataReader,"Transaction.update",r._key,t,A,n):df(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,s),this}delete(e){const t=sg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sg(e,this._firestore),A=new og(this._firestore);return super.get(e).then((e=>new bf(this._firestore,A,t._key,e._document,new If(!1,!1),t.converter)))}}function vg(e,t,A){e=md(e,kd);const n=Object.assign(Object.assign({},eg),A);return function(e){if(e.maxAttempts<1)throw new tr(er.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),cd(Ld(e),(A=>t(new Cg(e,A))),n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){return new of("deleteField")}function _g(){return new cf("serverTimestamp")}function Fg(...e){return new uf("arrayUnion",e)}function Ug(...e){return new lf("arrayRemove",e)}function Eg(e){return new hf("increment",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e,t=!0){!function(e){Kn=e}(s.SDK_VERSION),(0,s._registerComponent)(new i.wA("firestore",((e,{options:A})=>{const n=e.getProvider("app").getImmediate(),r=new kd(n,new ir(e.getProvider("auth-internal")),new ur(e.getProvider("app-check-internal")));return A=Object.assign({useFetchStreams:t},A),r._setSettings(A),r}),"PUBLIC")),(0,s.registerVersion)(On,"3.4.9",e),(0,s.registerVersion)(On,"3.4.9","esm2017")}();const Ig="@firebase/firestore-compat",bg="0.1.18";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Tg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new tr("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(){if("undefined"===typeof Uint8Array)throw new tr("unimplemented","Uint8Arrays are not available in this environment.")}function Dg(){if(!Er())throw new tr("unimplemented","Blobs are unavailable in Firestore in this environment.")}class xg{constructor(e){this._delegate=e}static fromBase64String(e){return Dg(),new xg(Yd.fromBase64String(e))}static fromUint8Array(e){return Sg(),new xg(Yd.fromUint8Array(e))}toBase64(){return Dg(),this._delegate.toBase64()}toUint8Array(){return Sg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(e){return kg(e,["next","error","complete"])}function kg(e,t){if("object"!==typeof e||null===e)return!1;const A=e;for(const n of t)if(n in A&&"function"===typeof A[n])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{enableIndexedDbPersistence(e,t){return Rd(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Md(e._delegate)}clearIndexedDbPersistence(e){return Pd(e._delegate)}}class Ng{constructor(e,t,A){this._delegate=t,this._persistenceProvider=A,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Jn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,A={}){vd(this._delegate,e,t,A)}enableNetwork(){return Vd(this._delegate)}disableNetwork(){return Gd(this._delegate)}enablePersistence(e){let t=!1,A=!1;return e&&(t=!!e.synchronizeTabs,A=!!e.experimentalForceOwningTab,fd("synchronizeTabs",t,"experimentalForceOwningTab",A)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,A)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Kd(this._delegate)}onSnapshotsInSync(e){return mg(this._delegate,e)}get app(){if(!this._appCompat)throw new tr("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $g(this,Ud(this._delegate,e))}catch(t){throw Gg(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vg(this,Id(this._delegate,e))}catch(t){throw Gg(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yg(this,Ed(this._delegate,e))}catch(t){throw Gg(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return vg(this._delegate,(t=>e(new Og(this,t))))}batch(){return Ld(this._delegate),new Pg(new rg(this._delegate,(e=>wg(this._delegate,e))))}loadBundle(e){return qd(this._delegate,e)}namedQuery(e){return Wd(this._delegate,e).then((e=>e?new Yg(this,e):null))}}class Rg extends tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new xg(new Yd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vg.forKey(t,this.firestore,null)}}function Mg(e){qn(e)}class Og{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rg(e)}get(e){const t=Zg(e);return this._delegate.get(t).then((e=>new jg(this._firestore,new bf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,A){const n=Zg(e);return A?(Tg("Transaction.set",A),this._delegate.set(n,t,A)):this._delegate.set(n,t),this}update(e,t,A,...n){const r=Zg(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,A,...n),this}delete(e){const t=Zg(e);return this._delegate.delete(t),this}}class Pg{constructor(e){this._delegate=e}set(e,t,A){const n=Zg(e);return A?(Tg("WriteBatch.set",A),this._delegate.set(n,t,A)):this._delegate.set(n,t),this}update(e,t,A,...n){const r=Zg(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,A,...n),this}delete(e){const t=Zg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kg{constructor(e,t,A){this._firestore=e,this._userDataWriter=t,this._delegate=A}fromFirestore(e,t){const A=new Tf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jg(this._firestore,A),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const A=Kg.INSTANCES;let n=A.get(e);n||(n=new WeakMap,A.set(e,n));let r=n.get(t);return r||(r=new Kg(e,new Rg(e),t),n.set(t,r)),r}}Kg.INSTANCES=new WeakMap;class Vg{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rg(e)}static forPath(e,t,A){if(e.length%2!==0)throw new tr("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vg(t,new Qd(t._delegate,A,new Pr(e)))}static forKey(e,t,A){return new Vg(t,new Qd(t._delegate,A,e))}get id(){return this._delegate.id}get parent(){return new $g(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $g(this.firestore,Ud(this._delegate,e))}catch(t){throw Gg(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=(0,a.m9)(e),e instanceof Qd&&bd(this._delegate,e)}set(e,t){t=Tg("DocumentReference.set",t);try{return t?dg(this._delegate,e,t):dg(this._delegate,e)}catch(A){throw Gg(A,"setDoc()","DocumentReference.set()")}}update(e,t,...A){try{return 1===arguments.length?fg(this._delegate,e):fg(this._delegate,e,t,...A)}catch(n){throw Gg(n,"updateDoc()","DocumentReference.update()")}}delete(){return gg(this._delegate)}onSnapshot(...e){const t=qg(e),A=Wg(e,(e=>new jg(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Bg(this._delegate,t,A)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ag(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?cg(this._delegate):ig(this._delegate),t.then((e=>new jg(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Vg(this.firestore,e?this._delegate.withConverter(Kg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gg(e,t,A){return e.message=e.message.replace(t,A),e}function qg(e){for(const t of e)if("object"===typeof t&&!Hg(t))return t;return{}}function Wg(e,t){var A,n;let r;return r=Hg(e[0])?e[0]:Hg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{r.next&&r.next(t(e))},error:null===(A=r.error)||void 0===A?void 0:A.bind(r),complete:null===(n=r.complete)||void 0===n?void 0:n.bind(r)}}class jg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vg(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xf(this._delegate,e._delegate)}}class Jg extends jg{data(e){const t=this._delegate.data(e);return $n(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class Yg{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rg(e)}where(e,t,A){try{return new Yg(this.firestore,Lf(this._delegate,Rf(e,t,A)))}catch(n){throw Gg(n,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Yg(this.firestore,Lf(this._delegate,Of(e,t)))}catch(A){throw Gg(A,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yg(this.firestore,Lf(this._delegate,Kf(e)))}catch(t){throw Gg(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Yg(this.firestore,Lf(this._delegate,Vf(e)))}catch(t){throw Gg(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yg(this.firestore,Lf(this._delegate,qf(...e)))}catch(t){throw Gg(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yg(this.firestore,Lf(this._delegate,Wf(...e)))}catch(t){throw Gg(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yg(this.firestore,Lf(this._delegate,Jf(...e)))}catch(t){throw Gg(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yg(this.firestore,Lf(this._delegate,Yf(...e)))}catch(t){throw Gg(t,"endAt()","Query.endAt()")}}isEqual(e){return Td(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?lg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?hg(this._delegate):ug(this._delegate),t.then((e=>new zg(this.firestore,new Sf(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=qg(e),A=Wg(e,(e=>new zg(this.firestore,new Sf(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Bg(this._delegate,t,A)}withConverter(e){return new Yg(this.firestore,e?this._delegate.withConverter(Kg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Xg{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yg(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Jg(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Xg(this._firestore,e)))}forEach(e,t){this._delegate.forEach((A=>{e.call(t,new Jg(this._firestore,A))}))}isEqual(e){return xf(this._delegate,e._delegate)}}class $g extends Yg{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vg(this.firestore,e):null}doc(e){try{return new Vg(this.firestore,void 0===e?Id(this._delegate):Id(this._delegate,e))}catch(t){throw Gg(t,"doc()","CollectionReference.doc()")}}add(e){return pg(this._delegate,e).then((e=>new Vg(this.firestore,e)))}isEqual(e){return bd(this._delegate,e._delegate)}withConverter(e){return new $g(this.firestore,e?this._delegate.withConverter(Kg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Zg(e){return md(e,Qd)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(...e){this._delegate=new Jd(...e)}static documentId(){return new ep(Fr.keyField().canonicalString())}isEqual(e){return e=(0,a.m9)(e),e instanceof Jd&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this._delegate=e}static serverTimestamp(){const e=_g();return e._methodName="FieldValue.serverTimestamp",new tp(e)}static delete(){const e=Qg();return e._methodName="FieldValue.delete",new tp(e)}static arrayUnion(...e){const t=Fg(...e);return t._methodName="FieldValue.arrayUnion",new tp(t)}static arrayRemove(...e){const t=Ug(...e);return t._methodName="FieldValue.arrayRemove",new tp(t)}static increment(e){const t=Eg(e);return t._methodName="FieldValue.increment",new tp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap={Firestore:Ng,GeoPoint:zd,Timestamp:Br,Blob:xg,Transaction:Og,WriteBatch:Pg,DocumentReference:Vg,DocumentSnapshot:jg,Query:Yg,QueryDocumentSnapshot:Jg,QuerySnapshot:zg,CollectionReference:$g,FieldPath:ep,FieldValue:tp,setLogLevel:Mg,CACHE_SIZE_UNLIMITED:Hd};function np(e,t){e.INTERNAL.registerComponent(new i.wA("firestore-compat",(e=>{const A=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return t(A,n)}),"PUBLIC").setServiceProps(Object.assign({},Ap)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(e){np(e,((e,t)=>new Ng(e,t,new Lg))),e.registerVersion(Ig,bg)}rp(r.Z)},642:function(e,t,A){"use strict";A(276)},120:function(e){
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
(function(t,A){e.exports=A()})(0,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,A){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var A in t)Object.prototype.hasOwnProperty.call(t,A)&&(e[A]=t[A])},e(t,A)};function t(t,A){if("function"!==typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function n(){this.constructor=t}e(t,A),t.prototype=null===A?Object.create(A):(n.prototype=A.prototype,new n)}var A=function(){return A=Object.assign||function(e){for(var t,A=1,n=arguments.length;A<n;A++)for(var r in t=arguments[A],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},A.apply(this,arguments)};function n(e,t,A,n){function r(e){return e instanceof A?e:new A((function(t){t(e)}))}return new(A||(A=Promise))((function(A,s){function i(e){try{a(n.next(e))}catch(qt){s(qt)}}function o(e){try{a(n["throw"](e))}catch(qt){s(qt)}}function a(e){e.done?A(e.value):r(e.value).then(i,o)}a((n=n.apply(e,t||[])).next())}))}function r(e,t){var A,n,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return a([e,t])}}function a(s){if(A)throw new TypeError("Generator is already executing.");while(i)try{if(A=1,n&&(r=2&s[0]?n["return"]:s[0]?n["throw"]||((r=n["return"])&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(qt){s=[6,qt],n=0}finally{A=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function s(e,t,A){if(A||2===arguments.length)for(var n,r=0,s=t.length;r<s;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||t)}for(var i=function(){function e(e,t,A,n){this.left=e,this.top=t,this.width=A,this.height=n}return e.prototype.add=function(t,A,n,r){return new e(this.left+t,this.top+A,this.width+n,this.height+r)},e.fromClientRect=function(t,A){return new e(A.left+t.windowBounds.left,A.top+t.windowBounds.top,A.width,A.height)},e.fromDOMRectList=function(t,A){var n=Array.from(A).find((function(e){return 0!==e.width}));return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o=function(e,t){return i.fromClientRect(e,t.getBoundingClientRect())},a=function(e){var t=e.body,A=e.documentElement;if(!t||!A)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,A.scrollWidth),Math.max(t.offsetWidth,A.offsetWidth),Math.max(t.clientWidth,A.clientWidth)),r=Math.max(Math.max(t.scrollHeight,A.scrollHeight),Math.max(t.offsetHeight,A.offsetHeight),Math.max(t.clientHeight,A.clientHeight));return new i(0,0,n,r)},c=function(e){var t=[],A=0,n=e.length;while(A<n){var r=e.charCodeAt(A++);if(r>=55296&&r<=56319&&A<n){var s=e.charCodeAt(A++);56320===(64512&s)?t.push(((1023&r)<<10)+(1023&s)+65536):(t.push(r),A--)}else t.push(r)}return t},u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var A=e.length;if(!A)return"";var n=[],r=-1,s="";while(++r<A){var i=e[r];i<=65535?n.push(i):(i-=65536,n.push(55296+(i>>10),i%1024+56320)),(r+1===A||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"===typeof Uint8Array?[]:new Uint8Array(256),d=0;d<l.length;d++)h[l.charCodeAt(d)]=d;for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="undefined"===typeof Uint8Array?[]:new Uint8Array(256),p=0;p<f.length;p++)g[f.charCodeAt(p)]=p;for(var B=function(e){var t,A,n,r,s,i=.75*e.length,o=e.length,a=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)A=g[e.charCodeAt(t)],n=g[e.charCodeAt(t+1)],r=g[e.charCodeAt(t+2)],s=g[e.charCodeAt(t+3)],u[a++]=A<<2|n>>4,u[a++]=(15&n)<<4|r>>2,u[a++]=(3&r)<<6|63&s;return c},m=function(e){for(var t=e.length,A=[],n=0;n<t;n+=2)A.push(e[n+1]<<8|e[n]);return A},w=function(e){for(var t=e.length,A=[],n=0;n<t;n+=4)A.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return A},y=5,C=11,v=2,Q=C-y,_=65536>>y,F=1<<y,U=F-1,E=1024>>y,I=_+E,b=I,T=32,S=b+T,D=65536>>C,x=1<<Q,H=x-1,k=function(e,t,A){return e.slice?e.slice(t,A):new Uint16Array(Array.prototype.slice.call(e,t,A))},L=function(e,t,A){return e.slice?e.slice(t,A):new Uint32Array(Array.prototype.slice.call(e,t,A))},N=function(e,t){var A=B(e),n=Array.isArray(A)?w(A):new Uint32Array(A),r=Array.isArray(A)?m(A):new Uint16Array(A),s=24,i=k(r,s/2,n[4]/2),o=2===n[5]?k(r,(s+n[4])/2):L(n,Math.ceil((s+n[4])/4));return new R(n[0],n[1],n[2],n[3],i,o)},R=function(){function e(e,t,A,n,r,s){this.initialValue=e,this.errorValue=t,this.highStart=A,this.highValueIndex=n,this.index=r,this.data=s}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>y],t=(t<<v)+(e&U),this.data[t];if(e<=65535)return t=this.index[_+(e-55296>>y)],t=(t<<v)+(e&U),this.data[t];if(e<this.highStart)return t=S-D+(e>>C),t=this.index[t],t+=e>>y&H,t=this.index[t],t=(t<<v)+(e&U),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O="undefined"===typeof Uint8Array?[]:new Uint8Array(256),P=0;P<M.length;P++)O[M.charCodeAt(P)]=P;var K="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",V=50,G=1,q=2,W=3,j=4,J=5,Y=7,X=8,z=9,$=10,Z=11,ee=12,te=13,Ae=14,ne=15,re=16,se=17,ie=18,oe=19,ae=20,ce=21,ue=22,le=23,he=24,de=25,fe=26,ge=27,pe=28,Be=29,me=30,we=31,ye=32,Ce=33,ve=34,Qe=35,_e=36,Fe=37,Ue=38,Ee=39,Ie=40,be=41,Te=42,Se=43,De=[9001,65288],xe="!",He="×",ke="÷",Le=N(K),Ne=[me,_e],Re=[G,q,W,J],Me=[$,X],Oe=[ge,fe],Pe=Re.concat(Me),Ke=[Ue,Ee,Ie,ve,Qe],Ve=[ne,te],Ge=function(e,t){void 0===t&&(t="strict");var A=[],n=[],r=[];return e.forEach((function(e,s){var i=Le.get(e);if(i>V?(r.push(!0),i-=V):r.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return n.push(s),A.push(re);if(i===j||i===Z){if(0===s)return n.push(s),A.push(me);var o=A[s-1];return-1===Pe.indexOf(o)?(n.push(n[s-1]),A.push(o)):(n.push(s),A.push(me))}return n.push(s),i===we?A.push("strict"===t?ce:Fe):i===Te||i===Be?A.push(me):i===Se?e>=131072&&e<=196605||e>=196608&&e<=262141?A.push(Fe):A.push(me):void A.push(i)})),[n,A,r]},qe=function(e,t,A,n){var r=n[A];if(Array.isArray(e)?-1!==e.indexOf(r):e===r){var s=A;while(s<=n.length){s++;var i=n[s];if(i===t)return!0;if(i!==$)break}}if(r===$){s=A;while(s>0){s--;var o=n[s];if(Array.isArray(e)?-1!==e.indexOf(o):e===o){var a=A;while(a<=n.length){a++;i=n[a];if(i===t)return!0;if(i!==$)break}}if(o!==$)break}}return!1},We=function(e,t){var A=e;while(A>=0){var n=t[A];if(n!==$)return n;A--}return 0},je=function(e,t,A,n,r){if(0===A[n])return He;var s=n-1;if(Array.isArray(r)&&!0===r[s])return He;var i=s-1,o=s+1,a=t[s],c=i>=0?t[i]:0,u=t[o];if(a===q&&u===W)return He;if(-1!==Re.indexOf(a))return xe;if(-1!==Re.indexOf(u))return He;if(-1!==Me.indexOf(u))return He;if(We(s,t)===X)return ke;if(Le.get(e[s])===Z)return He;if((a===ye||a===Ce)&&Le.get(e[o])===Z)return He;if(a===Y||u===Y)return He;if(a===z)return He;if(-1===[$,te,ne].indexOf(a)&&u===z)return He;if(-1!==[se,ie,oe,he,pe].indexOf(u))return He;if(We(s,t)===ue)return He;if(qe(le,ue,s,t))return He;if(qe([se,ie],ce,s,t))return He;if(qe(ee,ee,s,t))return He;if(a===$)return ke;if(a===le||u===le)return He;if(u===re||a===re)return ke;if(-1!==[te,ne,ce].indexOf(u)||a===Ae)return He;if(c===_e&&-1!==Ve.indexOf(a))return He;if(a===pe&&u===_e)return He;if(u===ae)return He;if(-1!==Ne.indexOf(u)&&a===de||-1!==Ne.indexOf(a)&&u===de)return He;if(a===ge&&-1!==[Fe,ye,Ce].indexOf(u)||-1!==[Fe,ye,Ce].indexOf(a)&&u===fe)return He;if(-1!==Ne.indexOf(a)&&-1!==Oe.indexOf(u)||-1!==Oe.indexOf(a)&&-1!==Ne.indexOf(u))return He;if(-1!==[ge,fe].indexOf(a)&&(u===de||-1!==[ue,ne].indexOf(u)&&t[o+1]===de)||-1!==[ue,ne].indexOf(a)&&u===de||a===de&&-1!==[de,pe,he].indexOf(u))return He;if(-1!==[de,pe,he,se,ie].indexOf(u)){var l=s;while(l>=0){var h=t[l];if(h===de)return He;if(-1===[pe,he].indexOf(h))break;l--}}if(-1!==[ge,fe].indexOf(u)){l=-1!==[se,ie].indexOf(a)?i:s;while(l>=0){h=t[l];if(h===de)return He;if(-1===[pe,he].indexOf(h))break;l--}}if(Ue===a&&-1!==[Ue,Ee,ve,Qe].indexOf(u)||-1!==[Ee,ve].indexOf(a)&&-1!==[Ee,Ie].indexOf(u)||-1!==[Ie,Qe].indexOf(a)&&u===Ie)return He;if(-1!==Ke.indexOf(a)&&-1!==[ae,fe].indexOf(u)||-1!==Ke.indexOf(u)&&a===ge)return He;if(-1!==Ne.indexOf(a)&&-1!==Ne.indexOf(u))return He;if(a===he&&-1!==Ne.indexOf(u))return He;if(-1!==Ne.concat(de).indexOf(a)&&u===ue&&-1===De.indexOf(e[o])||-1!==Ne.concat(de).indexOf(u)&&a===ie)return He;if(a===be&&u===be){var d=A[s],f=1;while(d>0){if(d--,t[d]!==be)break;f++}if(f%2!==0)return He}return a===ye&&u===Ce?He:ke},Je=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var A=Ge(e,t.lineBreak),n=A[0],r=A[1],s=A[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(r=r.map((function(e){return-1!==[de,me,Te].indexOf(e)?Fe:e})));var i="keep-all"===t.wordBreak?s.map((function(t,A){return t&&e[A]>=19968&&e[A]<=40959})):void 0;return[n,r,i]},Ye=function(){function e(e,t,A,n){this.codePoints=e,this.required=t===xe,this.start=A,this.end=n}return e.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Xe=function(e,t){var A=c(e),n=Je(A,t),r=n[0],s=n[1],i=n[2],o=A.length,a=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};var e=He;while(u<o&&(e=je(A,s,r,++u,i))===He);if(e!==He||u===o){var t=new Ye(A,e,a,u);return a=u,{value:t,done:!1}}return{done:!0,value:null}}}},ze=1,$e=2,Ze=4,et=8,tt=10,At=47,nt=92,rt=9,st=32,it=34,ot=61,at=35,ct=36,ut=37,lt=39,ht=40,dt=41,ft=95,gt=45,pt=33,Bt=60,mt=62,wt=64,yt=91,Ct=93,vt=61,Qt=123,_t=63,Ft=125,Ut=124,Et=126,It=128,bt=65533,Tt=42,St=43,Dt=44,xt=58,Ht=59,kt=46,Lt=0,Nt=8,Rt=11,Mt=14,Ot=31,Pt=127,Kt=-1,Vt=48,Gt=97,qt=101,Wt=102,jt=117,Jt=122,Yt=65,Xt=69,zt=70,$t=85,Zt=90,eA=function(e){return e>=Vt&&e<=57},tA=function(e){return e>=55296&&e<=57343},AA=function(e){return eA(e)||e>=Yt&&e<=zt||e>=Gt&&e<=Wt},nA=function(e){return e>=Gt&&e<=Jt},rA=function(e){return e>=Yt&&e<=Zt},sA=function(e){return nA(e)||rA(e)},iA=function(e){return e>=It},oA=function(e){return e===tt||e===rt||e===st},aA=function(e){return sA(e)||iA(e)||e===ft},cA=function(e){return aA(e)||eA(e)||e===gt},uA=function(e){return e>=Lt&&e<=Nt||e===Rt||e>=Mt&&e<=Ot||e===Pt},lA=function(e,t){return e===nt&&t!==tt},hA=function(e,t,A){return e===gt?aA(t)||lA(t,A):!!aA(e)||!(e!==nt||!lA(e,t))},dA=function(e,t,A){return e===St||e===gt?!!eA(t)||t===kt&&eA(A):eA(e===kt?t:e)},fA=function(e){var t=0,A=1;e[t]!==St&&e[t]!==gt||(e[t]===gt&&(A=-1),t++);var n=[];while(eA(e[t]))n.push(e[t++]);var r=n.length?parseInt(u.apply(void 0,n),10):0;e[t]===kt&&t++;var s=[];while(eA(e[t]))s.push(e[t++]);var i=s.length,o=i?parseInt(u.apply(void 0,s),10):0;e[t]!==Xt&&e[t]!==qt||t++;var a=1;e[t]!==St&&e[t]!==gt||(e[t]===gt&&(a=-1),t++);var c=[];while(eA(e[t]))c.push(e[t++]);var l=c.length?parseInt(u.apply(void 0,c),10):0;return A*(r+o*Math.pow(10,-i))*Math.pow(10,a*l)},gA={type:2},pA={type:3},BA={type:4},mA={type:13},wA={type:8},yA={type:21},CA={type:9},vA={type:10},QA={type:11},_A={type:12},FA={type:14},UA={type:23},EA={type:1},IA={type:25},bA={type:24},TA={type:26},SA={type:27},DA={type:28},xA={type:29},HA={type:31},kA={type:32},LA=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(c(e))},e.prototype.read=function(){var e=[],t=this.consumeToken();while(t!==kA)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case it:return this.consumeStringToken(it);case at:var t=this.peekCodePoint(0),A=this.peekCodePoint(1),n=this.peekCodePoint(2);if(cA(t)||lA(A,n)){var r=hA(t,A,n)?$e:ze,s=this.consumeName();return{type:5,value:s,flags:r}}break;case ct:if(this.peekCodePoint(0)===ot)return this.consumeCodePoint(),mA;break;case lt:return this.consumeStringToken(lt);case ht:return gA;case dt:return pA;case Tt:if(this.peekCodePoint(0)===ot)return this.consumeCodePoint(),FA;break;case St:if(dA(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Dt:return BA;case gt:var i=e,o=this.peekCodePoint(0),a=this.peekCodePoint(1);if(dA(i,o,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(hA(i,o,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===gt&&a===mt)return this.consumeCodePoint(),this.consumeCodePoint(),bA;break;case kt:if(dA(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case At:if(this.peekCodePoint(0)===Tt){this.consumeCodePoint();while(1){var c=this.consumeCodePoint();if(c===Tt&&(c=this.consumeCodePoint(),c===At))return this.consumeToken();if(c===Kt)return this.consumeToken()}}break;case xt:return TA;case Ht:return SA;case Bt:if(this.peekCodePoint(0)===pt&&this.peekCodePoint(1)===gt&&this.peekCodePoint(2)===gt)return this.consumeCodePoint(),this.consumeCodePoint(),IA;break;case wt:var l=this.peekCodePoint(0),h=this.peekCodePoint(1),d=this.peekCodePoint(2);if(hA(l,h,d)){s=this.consumeName();return{type:7,value:s}}break;case yt:return DA;case nt:if(lA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Ct:return xA;case vt:if(this.peekCodePoint(0)===ot)return this.consumeCodePoint(),wA;break;case Qt:return QA;case Ft:return _A;case jt:case $t:var f=this.peekCodePoint(0),g=this.peekCodePoint(1);return f!==St||!AA(g)&&g!==_t||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Ut:if(this.peekCodePoint(0)===ot)return this.consumeCodePoint(),CA;if(this.peekCodePoint(0)===Ut)return this.consumeCodePoint(),yA;break;case Et:if(this.peekCodePoint(0)===ot)return this.consumeCodePoint(),vA;break;case Kt:return kA}return oA(e)?(this.consumeWhiteSpace(),HA):eA(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):aA(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:u(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){var e=[],t=this.consumeCodePoint();while(AA(t)&&e.length<6)e.push(t),t=this.consumeCodePoint();var A=!1;while(t===_t&&e.length<6)e.push(t),t=this.consumeCodePoint(),A=!0;if(A){var n=parseInt(u.apply(void 0,e.map((function(e){return e===_t?Vt:e}))),16),r=parseInt(u.apply(void 0,e.map((function(e){return e===_t?zt:e}))),16);return{type:30,start:n,end:r}}var s=parseInt(u.apply(void 0,e),16);if(this.peekCodePoint(0)===gt&&AA(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();var i=[];while(AA(t)&&i.length<6)i.push(t),t=this.consumeCodePoint();r=parseInt(u.apply(void 0,i),16);return{type:30,start:s,end:r}}return{type:30,start:s,end:s}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===ht?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ht?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Kt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===lt||t===it){var A=this.consumeStringToken(this.consumeCodePoint());return 0===A.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Kt||this.peekCodePoint(0)===dt)?(this.consumeCodePoint(),{type:22,value:A.value}):(this.consumeBadUrlRemnants(),UA)}while(1){var n=this.consumeCodePoint();if(n===Kt||n===dt)return{type:22,value:u.apply(void 0,e)};if(oA(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Kt||this.peekCodePoint(0)===dt?(this.consumeCodePoint(),{type:22,value:u.apply(void 0,e)}):(this.consumeBadUrlRemnants(),UA);if(n===it||n===lt||n===ht||uA(n))return this.consumeBadUrlRemnants(),UA;if(n===nt){if(!lA(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),UA;e.push(this.consumeEscapedCodePoint())}else e.push(n)}},e.prototype.consumeWhiteSpace=function(){while(oA(this.peekCodePoint(0)))this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){while(1){var e=this.consumeCodePoint();if(e===dt||e===Kt)return;lA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){var t=5e4,A="";while(e>0){var n=Math.min(t,e);A+=u.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),A},e.prototype.consumeStringToken=function(e){var t="",A=0;do{var n=this._value[A];if(n===Kt||void 0===n||n===e)return t+=this.consumeStringSlice(A),{type:0,value:t};if(n===tt)return this._value.splice(0,A),EA;if(n===nt){var r=this._value[A+1];r!==Kt&&void 0!==r&&(r===tt?(t+=this.consumeStringSlice(A),A=-1,this._value.shift()):lA(n,r)&&(t+=this.consumeStringSlice(A),t+=u(this.consumeEscapedCodePoint()),A=-1))}A++}while(1)},e.prototype.consumeNumber=function(){var e=[],t=Ze,A=this.peekCodePoint(0);A!==St&&A!==gt||e.push(this.consumeCodePoint());while(eA(this.peekCodePoint(0)))e.push(this.consumeCodePoint());A=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(A===kt&&eA(n)){e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=et;while(eA(this.peekCodePoint(0)))e.push(this.consumeCodePoint())}A=this.peekCodePoint(0),n=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((A===Xt||A===qt)&&((n===St||n===gt)&&eA(r)||eA(n))){e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=et;while(eA(this.peekCodePoint(0)))e.push(this.consumeCodePoint())}return[fA(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],A=e[1],n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(hA(n,r,s)){var i=this.consumeName();return{type:15,number:t,flags:A,unit:i}}return n===ut?(this.consumeCodePoint(),{type:16,number:t,flags:A}):{type:17,number:t,flags:A}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(AA(e)){var t=u(e);while(AA(this.peekCodePoint(0))&&t.length<6)t+=u(this.consumeCodePoint());oA(this.peekCodePoint(0))&&this.consumeCodePoint();var A=parseInt(t,16);return 0===A||tA(A)||A>1114111?bt:A}return e===Kt?bt:e},e.prototype.consumeName=function(){var e="";while(1){var t=this.consumeCodePoint();if(cA(t))e+=u(t);else{if(!lA(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=u(this.consumeEscapedCodePoint())}}},e}(),NA=function(){function e(e){this._tokens=e}return e.create=function(t){var A=new LA;return A.write(t),new e(A.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){var e=this.consumeToken();while(31===e.type)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){var e=[];while(1){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){var t={type:e,values:[]},A=this.consumeToken();while(1){if(32===A.type||WA(A,e))return t;this.reconsumeToken(A),t.values.push(this.consumeComponentValue()),A=this.consumeToken()}},e.prototype.consumeFunction=function(e){var t={name:e.value,values:[],type:18};while(1){var A=this.consumeToken();if(32===A.type||3===A.type)return t;this.reconsumeToken(A),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?kA:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),RA=function(e){return 15===e.type},MA=function(e){return 17===e.type},OA=function(e){return 20===e.type},PA=function(e){return 0===e.type},KA=function(e,t){return OA(e)&&e.value===t},VA=function(e){return 31!==e.type},GA=function(e){return 31!==e.type&&4!==e.type},qA=function(e){var t=[],A=[];return e.forEach((function(e){if(4===e.type){if(0===A.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(A),void(A=[])}31!==e.type&&A.push(e)})),A.length&&t.push(A),t},WA=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},jA=function(e){return 17===e.type||15===e.type},JA=function(e){return 16===e.type||jA(e)},YA=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},XA={type:17,number:0,flags:Ze},zA={type:16,number:50,flags:Ze},$A={type:16,number:100,flags:Ze},ZA=function(e,t,A){var n=e[0],r=e[1];return[en(n,t),en("undefined"!==typeof r?r:n,A)]},en=function(e,t){if(16===e.type)return e.number/100*t;if(RA(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},tn="deg",An="grad",nn="rad",rn="turn",sn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case tn:return Math.PI*t.number/180;case An:return Math.PI/200*t.number;case nn:return t.number;case rn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},on=function(e){return 15===e.type&&(e.unit===tn||e.unit===An||e.unit===nn||e.unit===rn)},an=function(e){var t=e.filter(OA).map((function(e){return e.value})).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[XA,XA];case"to top":case"bottom":return cn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[XA,$A];case"to right":case"left":return cn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$A,$A];case"to bottom":case"top":return cn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$A,XA];case"to left":case"right":return cn(270)}return 0},cn=function(e){return Math.PI*e/180},un={name:"color",parse:function(e,t){if(18===t.type){var A=mn[t.name];if("undefined"===typeof A)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return A(e,t.values)}if(5===t.type){if(3===t.value.length){var n=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3);return dn(parseInt(n+n,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(4===t.value.length){n=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3);var i=t.value.substring(3,4);return dn(parseInt(n+n,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(6===t.value.length){n=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6);return dn(parseInt(n,16),parseInt(r,16),parseInt(s,16),1)}if(8===t.value.length){n=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return dn(parseInt(n,16),parseInt(r,16),parseInt(s,16),parseInt(i,16)/255)}}if(20===t.type){var o=yn[t.value.toUpperCase()];if("undefined"!==typeof o)return o}return yn.TRANSPARENT}},ln=function(e){return 0===(255&e)},hn=function(e){var t=255&e,A=255&e>>8,n=255&e>>16,r=255&e>>24;return t<255?"rgba("+r+","+n+","+A+","+t/255+")":"rgb("+r+","+n+","+A+")"},dn=function(e,t,A,n){return(e<<24|t<<16|A<<8|Math.round(255*n)<<0)>>>0},fn=function(e,t){if(17===e.type)return e.number;if(16===e.type){var A=3===t?1:255;return 3===t?e.number/100*A:Math.round(e.number/100*A)}return 0},gn=function(e,t){var A=t.filter(GA);if(3===A.length){var n=A.map(fn),r=n[0],s=n[1],i=n[2];return dn(r,s,i,1)}if(4===A.length){var o=A.map(fn),a=(r=o[0],s=o[1],i=o[2],o[3]);return dn(r,s,i,a)}return 0};function pn(e,t,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(t-e)*A*6+e:A<.5?t:A<2/3?6*(t-e)*(2/3-A)+e:e}var Bn=function(e,t){var A=t.filter(GA),n=A[0],r=A[1],s=A[2],i=A[3],o=(17===n.type?cn(n.number):sn.parse(e,n))/(2*Math.PI),a=JA(r)?r.number/100:0,c=JA(s)?s.number/100:0,u="undefined"!==typeof i&&JA(i)?en(i,1):1;if(0===a)return dn(255*c,255*c,255*c,1);var l=c<=.5?c*(a+1):c+a-c*a,h=2*c-l,d=pn(h,l,o+1/3),f=pn(h,l,o),g=pn(h,l,o-1/3);return dn(255*d,255*f,255*g,u)},mn={hsl:Bn,hsla:Bn,rgb:gn,rgba:gn},wn=function(e,t){return un.parse(e,NA.create(t).parseComponentValue())},yn={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Cn={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(OA(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},vn={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Qn=function(e,t){var A=un.parse(e,t[0]),n=t[1];return n&&JA(n)?{color:A,stop:n}:{color:A,stop:null}},_n=function(e,t){var A=e[0],n=e[e.length-1];null===A.stop&&(A.stop=XA),null===n.stop&&(n.stop=$A);for(var r=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(null!==o){var a=en(o,t);a>s?r.push(a):r.push(s),s=a}else r.push(null)}var c=null;for(i=0;i<r.length;i++){var u=r[i];if(null===u)null===c&&(c=i);else if(null!==c){for(var l=i-c,h=r[c-1],d=(u-h)/(l+1),f=1;f<=l;f++)r[c+f-1]=d*f;c=null}}return e.map((function(e,A){var n=e.color;return{color:n,stop:Math.max(Math.min(1,r[A]/t),0)}}))},Fn=function(e,t,A){var n=t/2,r=A/2,s=en(e[0],t)-n,i=r-en(e[1],A);return(Math.atan2(i,s)+2*Math.PI)%(2*Math.PI)},Un=function(e,t,A){var n="number"===typeof e?e:Fn(e,t,A),r=Math.abs(t*Math.sin(n))+Math.abs(A*Math.cos(n)),s=t/2,i=A/2,o=r/2,a=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[r,s-c,s+c,i-a,i+a]},En=function(e,t){return Math.sqrt(e*e+t*t)},In=function(e,t,A,n,r){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce((function(e,t){var s=t[0],i=t[1],o=En(A-s,n-i);return(r?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},bn=function(e,t,A,n,r){var s=0,i=0;switch(e.size){case 0:0===e.shape?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(A),Math.abs(A-r)):1===e.shape&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(A),Math.abs(A-r)));break;case 2:if(0===e.shape)s=i=Math.min(En(t,A),En(t,A-r),En(t-n,A),En(t-n,A-r));else if(1===e.shape){var o=Math.min(Math.abs(A),Math.abs(A-r))/Math.min(Math.abs(t),Math.abs(t-n)),a=In(n,r,t,A,!0),c=a[0],u=a[1];s=En(c-t,(u-A)/o),i=o*s}break;case 1:0===e.shape?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(A),Math.abs(A-r)):1===e.shape&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(A),Math.abs(A-r)));break;case 3:if(0===e.shape)s=i=Math.max(En(t,A),En(t,A-r),En(t-n,A),En(t-n,A-r));else if(1===e.shape){o=Math.max(Math.abs(A),Math.abs(A-r))/Math.max(Math.abs(t),Math.abs(t-n));var l=In(n,r,t,A,!1);c=l[0],u=l[1];s=En(c-t,(u-A)/o),i=o*s}break}return Array.isArray(e.size)&&(s=en(e.size[0],n),i=2===e.size.length?en(e.size[1],r):s),[s,i]},Tn=function(e,t){var A=cn(180),n=[];return qA(t).forEach((function(t,r){if(0===r){var s=t[0];if(20===s.type&&"to"===s.value)return void(A=an(t));if(on(s))return void(A=sn.parse(e,s))}var i=Qn(e,t);n.push(i)})),{angle:A,stops:n,type:1}},Sn=function(e,t){var A=cn(180),n=[];return qA(t).forEach((function(t,r){if(0===r){var s=t[0];if(20===s.type&&-1!==["top","left","right","bottom"].indexOf(s.value))return void(A=an(t));if(on(s))return void(A=(sn.parse(e,s)+cn(270))%cn(360))}var i=Qn(e,t);n.push(i)})),{angle:A,stops:n,type:1}},Dn=function(e,t){var A=cn(180),n=[],r=1,s=0,i=3,o=[];return qA(t).forEach((function(t,A){var s=t[0];if(0===A){if(OA(s)&&"linear"===s.value)return void(r=1);if(OA(s)&&"radial"===s.value)return void(r=2)}if(18===s.type)if("from"===s.name){var i=un.parse(e,s.values[0]);n.push({stop:XA,color:i})}else if("to"===s.name){i=un.parse(e,s.values[0]);n.push({stop:$A,color:i})}else if("color-stop"===s.name){var o=s.values.filter(GA);if(2===o.length){i=un.parse(e,o[1]);var a=o[0];MA(a)&&n.push({stop:{type:16,number:100*a.number,flags:a.flags},color:i})}}})),1===r?{angle:(A+cn(180))%cn(360),stops:n,type:r}:{size:i,shape:s,stops:n,position:o,type:r}},xn="closest-side",Hn="farthest-side",kn="closest-corner",Ln="farthest-corner",Nn="circle",Rn="ellipse",Mn="cover",On="contain",Pn=function(e,t){var A=0,n=3,r=[],s=[];return qA(t).forEach((function(t,i){var o=!0;if(0===i){var a=!1;o=t.reduce((function(e,t){if(a)if(OA(t))switch(t.value){case"center":return s.push(zA),e;case"top":case"left":return s.push(XA),e;case"right":case"bottom":return s.push($A),e}else(JA(t)||jA(t))&&s.push(t);else if(OA(t))switch(t.value){case Nn:return A=0,!1;case Rn:return A=1,!1;case"at":return a=!0,!1;case xn:return n=0,!1;case Mn:case Hn:return n=1,!1;case On:case kn:return n=2,!1;case Ln:return n=3,!1}else if(jA(t)||JA(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),o)}if(o){var c=Qn(e,t);r.push(c)}})),{size:n,shape:A,stops:r,position:s,type:2}},Kn=function(e,t){var A=0,n=3,r=[],s=[];return qA(t).forEach((function(t,i){var o=!0;if(0===i?o=t.reduce((function(e,t){if(OA(t))switch(t.value){case"center":return s.push(zA),!1;case"top":case"left":return s.push(XA),!1;case"right":case"bottom":return s.push($A),!1}else if(JA(t)||jA(t))return s.push(t),!1;return e}),o):1===i&&(o=t.reduce((function(e,t){if(OA(t))switch(t.value){case Nn:return A=0,!1;case Rn:return A=1,!1;case On:case xn:return n=0,!1;case Hn:return n=1,!1;case kn:return n=2,!1;case Mn:case Ln:return n=3,!1}else if(jA(t)||JA(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),o)),o){var a=Qn(e,t);r.push(a)}})),{size:n,shape:A,stops:r,position:s,type:2}},Vn=function(e){return 1===e.type},Gn=function(e){return 2===e.type},qn={name:"image",parse:function(e,t){if(22===t.type){var A={url:t.value,type:0};return e.cache.addImage(t.value),A}if(18===t.type){var n=Jn[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Wn(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Jn[e.name])}var jn,Jn={"linear-gradient":Tn,"-moz-linear-gradient":Sn,"-ms-linear-gradient":Sn,"-o-linear-gradient":Sn,"-webkit-linear-gradient":Sn,"radial-gradient":Pn,"-moz-radial-gradient":Kn,"-ms-radial-gradient":Kn,"-o-radial-gradient":Kn,"-webkit-radial-gradient":Kn,"-webkit-gradient":Dn},Yn={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var A=t[0];return 20===A.type&&"none"===A.value?[]:t.filter((function(e){return GA(e)&&Wn(e)})).map((function(t){return qn.parse(e,t)}))}},Xn={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(OA(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},zn={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return qA(t).map((function(e){return e.filter(JA)})).map(YA)}},$n={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return qA(t).map((function(e){return e.filter(OA).map((function(e){return e.value})).join(" ")})).map(Zn)}},Zn=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}};(function(e){e["AUTO"]="auto",e["CONTAIN"]="contain",e["COVER"]="cover"})(jn||(jn={}));var er,tr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return qA(t).map((function(e){return e.filter(Ar)}))}},Ar=function(e){return OA(e)||JA(e)},nr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},rr=nr("top"),sr=nr("right"),ir=nr("bottom"),or=nr("left"),ar=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return YA(t.filter(JA))}}},cr=ar("top-left"),ur=ar("top-right"),lr=ar("bottom-right"),hr=ar("bottom-left"),dr=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},fr=dr("top"),gr=dr("right"),pr=dr("bottom"),Br=dr("left"),mr=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return RA(t)?t.number:0}}},wr=mr("top"),yr=mr("right"),Cr=mr("bottom"),vr=mr("left"),Qr={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_r={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Fr={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(OA).reduce((function(e,t){return e|Ur(t.value)}),0)}},Ur=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Er={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ir={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};(function(e){e["NORMAL"]="normal",e["STRICT"]="strict"})(er||(er={}));var br,Tr={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return er.STRICT;case"normal":default:return er.NORMAL}}},Sr={name:"line-height",initialValue:"normal",prefix:!1,type:4},Dr=function(e,t){return OA(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:JA(e)?en(e,t):t},xr={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:qn.parse(e,t)}},Hr={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},kr={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Lr=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Nr=Lr("top"),Rr=Lr("right"),Mr=Lr("bottom"),Or=Lr("left"),Pr={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(OA).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}}))}},Kr={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Vr=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Gr=Vr("top"),qr=Vr("right"),Wr=Vr("bottom"),jr=Vr("left"),Jr={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Yr={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xr={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&KA(t[0],"none")?[]:qA(t).map((function(t){for(var A={color:yn.TRANSPARENT,offsetX:XA,offsetY:XA,blur:XA},n=0,r=0;r<t.length;r++){var s=t[r];jA(s)?(0===n?A.offsetX=s:1===n?A.offsetY=s:A.blur=s,n++):A.color=un.parse(e,s)}return A}))}},zr={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},$r={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var A=ts[t.name];if("undefined"===typeof A)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return A(t.values)}return null}},Zr=function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},es=function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),A=t[0],n=t[1];t[2],t[3];var r=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],16===t.length?[A,n,r,s,i,o]:null},ts={matrix:Zr,matrix3d:es},As={type:16,number:50,flags:Ze},ns=[As,As],rs={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var A=t.filter(JA);return 2!==A.length?ns:[A[0],A[1]]}},ss={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}};(function(e){e["NORMAL"]="normal",e["BREAK_ALL"]="break-all",e["KEEP_ALL"]="keep-all"})(br||(br={}));for(var is={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return br.BREAK_ALL;case"keep-all":return br.KEEP_ALL;case"normal":default:return br.NORMAL}}},os={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(MA(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},as={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},cs={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return MA(t)?t.number:1}},us={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ls={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(OA).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},hs={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var A=[],n=[];return t.forEach((function(e){switch(e.type){case 20:case 0:A.push(e.value);break;case 17:A.push(e.number.toString());break;case 4:n.push(A.join(" ")),A.length=0;break}})),A.length&&n.push(A.join(" ")),n.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},ds={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fs={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(MA(t))return t.number;if(OA(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},gs={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(OA).map((function(e){return e.value}))}},ps={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Bs=function(e,t){return 0!==(e&t)},ms={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var A=t[0];return 20===A.type&&"none"===A.value?[]:t}},ws={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var A=t[0];if(20===A.type&&"none"===A.value)return null;for(var n=[],r=t.filter(VA),s=0;s<r.length;s++){var i=r[s],o=r[s+1];if(20===i.type){var a=o&&MA(o)?o.number:1;n.push({counter:i.value,increment:a})}}return n}},ys={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var A=[],n=t.filter(VA),r=0;r<n.length;r++){var s=n[r],i=n[r+1];if(OA(s)&&"none"!==s.value){var o=i&&MA(i)?i.number:0;A.push({counter:s.value,reset:o})}}return A}},Cs={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(RA).map((function(t){return as.parse(e,t)}))}},vs={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var A=t[0];if(20===A.type&&"none"===A.value)return null;var n=[],r=t.filter(PA);if(r.length%2!==0)return null;for(var s=0;s<r.length;s+=2){var i=r[s].value,o=r[s+1].value;n.push({open:i,close:o})}return n}},Qs=function(e,t,A){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?A?n.open:n.close:""},_s={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&KA(t[0],"none")?[]:qA(t).map((function(t){for(var A={color:255,offsetX:XA,offsetY:XA,blur:XA,spread:XA,inset:!1},n=0,r=0;r<t.length;r++){var s=t[r];KA(s,"inset")?A.inset=!0:jA(s)?(0===n?A.offsetX=s:1===n?A.offsetY=s:2===n?A.blur=s:A.spread=s,n++):A.color=un.parse(e,s)}return A}))}},Fs={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var A=[0,1,2],n=[];return t.filter(OA).forEach((function(e){switch(e.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}})),A.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n}},Us={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Es={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return RA(t)?t.number:0}},Is=function(){function e(e,t){var A,n;this.animationDuration=Ss(e,Cs,t.animationDuration),this.backgroundClip=Ss(e,Cn,t.backgroundClip),this.backgroundColor=Ss(e,vn,t.backgroundColor),this.backgroundImage=Ss(e,Yn,t.backgroundImage),this.backgroundOrigin=Ss(e,Xn,t.backgroundOrigin),this.backgroundPosition=Ss(e,zn,t.backgroundPosition),this.backgroundRepeat=Ss(e,$n,t.backgroundRepeat),this.backgroundSize=Ss(e,tr,t.backgroundSize),this.borderTopColor=Ss(e,rr,t.borderTopColor),this.borderRightColor=Ss(e,sr,t.borderRightColor),this.borderBottomColor=Ss(e,ir,t.borderBottomColor),this.borderLeftColor=Ss(e,or,t.borderLeftColor),this.borderTopLeftRadius=Ss(e,cr,t.borderTopLeftRadius),this.borderTopRightRadius=Ss(e,ur,t.borderTopRightRadius),this.borderBottomRightRadius=Ss(e,lr,t.borderBottomRightRadius),this.borderBottomLeftRadius=Ss(e,hr,t.borderBottomLeftRadius),this.borderTopStyle=Ss(e,fr,t.borderTopStyle),this.borderRightStyle=Ss(e,gr,t.borderRightStyle),this.borderBottomStyle=Ss(e,pr,t.borderBottomStyle),this.borderLeftStyle=Ss(e,Br,t.borderLeftStyle),this.borderTopWidth=Ss(e,wr,t.borderTopWidth),this.borderRightWidth=Ss(e,yr,t.borderRightWidth),this.borderBottomWidth=Ss(e,Cr,t.borderBottomWidth),this.borderLeftWidth=Ss(e,vr,t.borderLeftWidth),this.boxShadow=Ss(e,_s,t.boxShadow),this.color=Ss(e,Qr,t.color),this.direction=Ss(e,_r,t.direction),this.display=Ss(e,Fr,t.display),this.float=Ss(e,Er,t.cssFloat),this.fontFamily=Ss(e,hs,t.fontFamily),this.fontSize=Ss(e,ds,t.fontSize),this.fontStyle=Ss(e,ps,t.fontStyle),this.fontVariant=Ss(e,gs,t.fontVariant),this.fontWeight=Ss(e,fs,t.fontWeight),this.letterSpacing=Ss(e,Ir,t.letterSpacing),this.lineBreak=Ss(e,Tr,t.lineBreak),this.lineHeight=Ss(e,Sr,t.lineHeight),this.listStyleImage=Ss(e,xr,t.listStyleImage),this.listStylePosition=Ss(e,Hr,t.listStylePosition),this.listStyleType=Ss(e,kr,t.listStyleType),this.marginTop=Ss(e,Nr,t.marginTop),this.marginRight=Ss(e,Rr,t.marginRight),this.marginBottom=Ss(e,Mr,t.marginBottom),this.marginLeft=Ss(e,Or,t.marginLeft),this.opacity=Ss(e,cs,t.opacity);var r=Ss(e,Pr,t.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=Ss(e,Kr,t.overflowWrap),this.paddingTop=Ss(e,Gr,t.paddingTop),this.paddingRight=Ss(e,qr,t.paddingRight),this.paddingBottom=Ss(e,Wr,t.paddingBottom),this.paddingLeft=Ss(e,jr,t.paddingLeft),this.paintOrder=Ss(e,Fs,t.paintOrder),this.position=Ss(e,Yr,t.position),this.textAlign=Ss(e,Jr,t.textAlign),this.textDecorationColor=Ss(e,us,null!==(A=t.textDecorationColor)&&void 0!==A?A:t.color),this.textDecorationLine=Ss(e,ls,null!==(n=t.textDecorationLine)&&void 0!==n?n:t.textDecoration),this.textShadow=Ss(e,Xr,t.textShadow),this.textTransform=Ss(e,zr,t.textTransform),this.transform=Ss(e,$r,t.transform),this.transformOrigin=Ss(e,rs,t.transformOrigin),this.visibility=Ss(e,ss,t.visibility),this.webkitTextStrokeColor=Ss(e,Us,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ss(e,Es,t.webkitTextStrokeWidth),this.wordBreak=Ss(e,is,t.wordBreak),this.zIndex=Ss(e,os,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return ln(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return Bs(this.display,4)||Bs(this.display,33554432)||Bs(this.display,268435456)||Bs(this.display,536870912)||Bs(this.display,67108864)||Bs(this.display,134217728)},e}(),bs=function(){function e(e,t){this.content=Ss(e,ms,t.content),this.quotes=Ss(e,vs,t.quotes)}return e}(),Ts=function(){function e(e,t){this.counterIncrement=Ss(e,ws,t.counterIncrement),this.counterReset=Ss(e,ys,t.counterReset)}return e}(),Ss=function(e,t,A){var n=new LA,r=null!==A&&"undefined"!==typeof A?A.toString():t.initialValue;n.write(r);var s=new NA(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,OA(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return sn.parse(e,s.parseComponentValue());case"color":return un.parse(e,s.parseComponentValue());case"image":return qn.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return jA(o)?o:XA;case"length-percentage":var a=s.parseComponentValue();return JA(a)?a:XA;case"time":return as.parse(e,s.parseComponentValue())}break}},Ds="data-html2canvas-debug",xs=function(e){var t=e.getAttribute(Ds);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Hs=function(e,t){var A=xs(e);return 1===A||t===A},ks=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Hs(t,3),this.styles=new Is(e,window.getComputedStyle(t,null)),To(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=o(this.context,t),Hs(t,4)&&(this.flags|=16)}return e}(),Ls="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rs="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ms=0;Ms<Ns.length;Ms++)Rs[Ns.charCodeAt(Ms)]=Ms;for(var Os=function(e){var t,A,n,r,s,i=.75*e.length,o=e.length,a=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)A=Rs[e.charCodeAt(t)],n=Rs[e.charCodeAt(t+1)],r=Rs[e.charCodeAt(t+2)],s=Rs[e.charCodeAt(t+3)],u[a++]=A<<2|n>>4,u[a++]=(15&n)<<4|r>>2,u[a++]=(3&r)<<6|63&s;return c},Ps=function(e){for(var t=e.length,A=[],n=0;n<t;n+=2)A.push(e[n+1]<<8|e[n]);return A},Ks=function(e){for(var t=e.length,A=[],n=0;n<t;n+=4)A.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return A},Vs=5,Gs=11,qs=2,Ws=Gs-Vs,js=65536>>Vs,Js=1<<Vs,Ys=Js-1,Xs=1024>>Vs,zs=js+Xs,$s=zs,Zs=32,ei=$s+Zs,ti=65536>>Gs,Ai=1<<Ws,ni=Ai-1,ri=function(e,t,A){return e.slice?e.slice(t,A):new Uint16Array(Array.prototype.slice.call(e,t,A))},si=function(e,t,A){return e.slice?e.slice(t,A):new Uint32Array(Array.prototype.slice.call(e,t,A))},ii=function(e,t){var A=Os(e),n=Array.isArray(A)?Ks(A):new Uint32Array(A),r=Array.isArray(A)?Ps(A):new Uint16Array(A),s=24,i=ri(r,s/2,n[4]/2),o=2===n[5]?ri(r,(s+n[4])/2):si(n,Math.ceil((s+n[4])/4));return new oi(n[0],n[1],n[2],n[3],i,o)},oi=function(){function e(e,t,A,n,r,s){this.initialValue=e,this.errorValue=t,this.highStart=A,this.highValueIndex=n,this.index=r,this.data=s}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Vs],t=(t<<qs)+(e&Ys),this.data[t];if(e<=65535)return t=this.index[js+(e-55296>>Vs)],t=(t<<qs)+(e&Ys),this.data[t];if(e<this.highStart)return t=ei-ti+(e>>Gs),t=this.index[t],t+=e>>Vs&ni,t=this.index[t],t=(t<<qs)+(e&Ys),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ci="undefined"===typeof Uint8Array?[]:new Uint8Array(256),ui=0;ui<ai.length;ui++)ci[ai.charCodeAt(ui)]=ui;var li,hi=1,di=2,fi=3,gi=4,pi=5,Bi=7,mi=8,wi=9,yi=10,Ci=11,vi=12,Qi=13,_i=14,Fi=15,Ui=function(e){var t=[],A=0,n=e.length;while(A<n){var r=e.charCodeAt(A++);if(r>=55296&&r<=56319&&A<n){var s=e.charCodeAt(A++);56320===(64512&s)?t.push(((1023&r)<<10)+(1023&s)+65536):(t.push(r),A--)}else t.push(r)}return t},Ei=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var A=e.length;if(!A)return"";var n=[],r=-1,s="";while(++r<A){var i=e[r];i<=65535?n.push(i):(i-=65536,n.push(55296+(i>>10),i%1024+56320)),(r+1===A||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Ii=ii(Ls),bi="×",Ti="÷",Si=function(e){return Ii.get(e)},Di=function(e,t,A){var n=A-2,r=t[n],s=t[A-1],i=t[A];if(s===di&&i===fi)return bi;if(s===di||s===fi||s===gi)return Ti;if(i===di||i===fi||i===gi)return Ti;if(s===mi&&-1!==[mi,wi,Ci,vi].indexOf(i))return bi;if((s===Ci||s===wi)&&(i===wi||i===yi))return bi;if((s===vi||s===yi)&&i===yi)return bi;if(i===Qi||i===pi)return bi;if(i===Bi)return bi;if(s===hi)return bi;if(s===Qi&&i===_i){while(r===pi)r=t[--n];if(r===_i)return bi}if(s===Fi&&i===Fi){var o=0;while(r===Fi)o++,r=t[--n];if(o%2===0)return bi}return Ti},xi=function(e){var t=Ui(e),A=t.length,n=0,r=0,s=t.map(Si);return{next:function(){if(n>=A)return{done:!0,value:null};var e=bi;while(n<A&&(e=Di(t,s,++n))===bi);if(e!==bi||n===A){var i=Ei.apply(null,t.slice(r,n));return r=n,{value:i,done:!1}}return{done:!0,value:null}}}},Hi=function(e){var t,A=xi(e),n=[];while(!(t=A.next()).done)t.value&&n.push(t.value.slice());return n},ki=function(e){var t=123;if(e.createRange){var A=e.createRange();if(A.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),A.selectNode(n);var r=A.getBoundingClientRect(),s=Math.round(r.height);if(e.body.removeChild(n),s===t)return!0}}return!1},Li=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var A=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var n=t.firstChild,r=c(n.data).map((function(e){return u(e)})),s=0,i={},o=r.every((function(e,t){A.setStart(n,s),A.setEnd(n,s+e.length);var r=A.getBoundingClientRect();s+=e.length;var o=r.x>i.x||r.y>i.y;return i=r,0===t||o}));return e.body.removeChild(t),o},Ni=function(){return"undefined"!==typeof(new Image).crossOrigin},Ri=function(){return"string"===typeof(new XMLHttpRequest).responseType},Mi=function(e){var t=new Image,A=e.createElement("canvas"),n=A.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),A.toDataURL()}catch(qt){return!1}return!0},Oi=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},Pi=function(e){var t=e.createElement("canvas"),A=100;t.width=A,t.height=A;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,A,A);var r=new Image,s=t.toDataURL();r.src=s;var i=Ki(A,A,0,0,r);return n.fillStyle="red",n.fillRect(0,0,A,A),Vi(i).then((function(t){n.drawImage(t,0,0);var r=n.getImageData(0,0,A,A).data;n.fillStyle="red",n.fillRect(0,0,A,A);var i=e.createElement("div");return i.style.backgroundImage="url("+s+")",i.style.height=A+"px",Oi(r)?Vi(Ki(A,A,0,0,i)):Promise.reject(!1)})).then((function(e){return n.drawImage(e,0,0),Oi(n.getImageData(0,0,A,A).data)})).catch((function(){return!1}))},Ki=function(e,t,A,n,r){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",A.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(r),i},Vi=function(e){return new Promise((function(t,A){var n=new Image;n.onload=function(){return t(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Gi={get SUPPORT_RANGE_BOUNDS(){var e=ki(document);return Object.defineProperty(Gi,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Gi.SUPPORT_RANGE_BOUNDS&&Li(document);return Object.defineProperty(Gi,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Mi(document);return Object.defineProperty(Gi,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?Pi(document):Promise.resolve(!1);return Object.defineProperty(Gi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Ni();return Object.defineProperty(Gi,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Ri();return Object.defineProperty(Gi,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Gi,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(Gi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},qi=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Wi=function(e,t,A,n){var r=zi(t,A),s=[],o=0;return r.forEach((function(t){if(A.textDecorationLine.length||t.trim().length>0)if(Gi.SUPPORT_RANGE_BOUNDS){var r=Ji(n,o,t.length).getClientRects();if(r.length>1){var a=Yi(t),c=0;a.forEach((function(t){s.push(new qi(t,i.fromDOMRectList(e,Ji(n,c+o,t.length).getClientRects()))),c+=t.length}))}else s.push(new qi(t,i.fromDOMRectList(e,r)))}else{var u=n.splitText(t.length);s.push(new qi(t,ji(e,n))),n=u}else Gi.SUPPORT_RANGE_BOUNDS||(n=n.splitText(t.length));o+=t.length})),s},ji=function(e,t){var A=t.ownerDocument;if(A){var n=A.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(n,t);var s=o(e,n);return n.firstChild&&r.replaceChild(n.firstChild,n),s}}return i.EMPTY},Ji=function(e,t,A){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var r=n.createRange();return r.setStart(e,t),r.setEnd(e,t+A),r},Yi=function(e){if(Gi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return Hi(e)},Xi=function(e,t){if(Gi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(e)).map((function(e){return e.segment}))}return Zi(e,t)},zi=function(e,t){return 0!==t.letterSpacing?Yi(e):Xi(e,t)},$i=[32,160,4961,65792,65793,4153,4241],Zi=function(e,t){var A,n=Xe(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),r=[],s=function(){if(A.value){var e=A.value.slice(),t=c(e),n="";t.forEach((function(e){-1===$i.indexOf(e)?n+=u(e):(n.length&&r.push(n),r.push(u(e)),n="")})),n.length&&r.push(n)}};while(!(A=n.next()).done)s();return r},eo=function(){function e(e,t,A){this.text=to(t.data,A.textTransform),this.textBounds=Wi(e,this.text,A,t)}return e}(),to=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Ao,no);case 2:return e.toUpperCase();default:return e}},Ao=/(^|\s|:|-|\(|\))([a-z])/g,no=function(e,t,A){return e.length>0?t+A.toUpperCase():e},ro=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.src=A.currentSrc||A.src,n.intrinsicWidth=A.naturalWidth,n.intrinsicHeight=A.naturalHeight,n.context.cache.addImage(n.src),n}return t(A,e),A}(ks),so=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.canvas=A,n.intrinsicWidth=A.width,n.intrinsicHeight=A.height,n}return t(A,e),A}(ks),io=function(e){function A(t,A){var n=e.call(this,t,A)||this,r=new XMLSerializer,s=o(t,A);return A.setAttribute("width",s.width+"px"),A.setAttribute("height",s.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(A)),n.intrinsicWidth=A.width.baseVal.value,n.intrinsicHeight=A.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t(A,e),A}(ks),oo=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.value=A.value,n}return t(A,e),A}(ks),ao=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.start=A.start,n.reversed="boolean"===typeof A.reversed&&!0===A.reversed,n}return t(A,e),A}(ks),co=[{type:15,flags:0,unit:"px",number:3}],uo=[{type:16,flags:0,number:50}],lo=function(e){return e.width>e.height?new i(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new i(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},ho=function(e){var t=e.type===po?new Array(e.value.length+1).join("•"):e.value;return 0===t.length?e.placeholder||"":t},fo="checkbox",go="radio",po="password",Bo=707406591,mo=function(e){function A(t,A){var n=e.call(this,t,A)||this;switch(n.type=A.type.toLowerCase(),n.checked=A.checked,n.value=ho(A),n.type!==fo&&n.type!==go||(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=lo(n.bounds)),n.type){case fo:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=co;break;case go:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=uo;break}return n}return t(A,e),A}(ks),wo=function(e){function A(t,A){var n=e.call(this,t,A)||this,r=A.options[A.selectedIndex||0];return n.value=r&&r.text||"",n}return t(A,e),A}(ks),yo=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.value=A.value,n}return t(A,e),A}(ks),Co=function(e){function A(t,A){var n=e.call(this,t,A)||this;n.src=A.src,n.width=parseInt(A.width,10)||0,n.height=parseInt(A.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(A.contentWindow&&A.contentWindow.document&&A.contentWindow.document.documentElement){n.tree=Fo(t,A.contentWindow.document.documentElement);var r=A.contentWindow.document.documentElement?wn(t,getComputedStyle(A.contentWindow.document.documentElement).backgroundColor):yn.TRANSPARENT,s=A.contentWindow.document.body?wn(t,getComputedStyle(A.contentWindow.document.body).backgroundColor):yn.TRANSPARENT;n.backgroundColor=ln(r)?ln(s)?n.styles.backgroundColor:s:r}}catch(qt){}return n}return t(A,e),A}(ks),vo=["OL","UL","MENU"],Qo=function(e,t,A,n){for(var r=t.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,Io(r)&&r.data.trim().length>0)A.textNodes.push(new eo(e,r,A.styles));else if(bo(r))if(Wo(r)&&r.assignedNodes)r.assignedNodes().forEach((function(t){return Qo(e,t,A,n)}));else{var i=_o(e,r);i.styles.isVisible()&&(Uo(r,i,n)?i.flags|=4:Eo(i.styles)&&(i.flags|=2),-1!==vo.indexOf(r.tagName)&&(i.flags|=8),A.elements.push(i),r.slot,r.shadowRoot?Qo(e,r.shadowRoot,i,n):Go(r)||Lo(r)||qo(r)||Qo(e,r,i,n))}},_o=function(e,t){return Oo(t)?new ro(e,t):Ro(t)?new so(e,t):Lo(t)?new io(e,t):Do(t)?new oo(e,t):xo(t)?new ao(e,t):Ho(t)?new mo(e,t):qo(t)?new wo(e,t):Go(t)?new yo(e,t):Po(t)?new Co(e,t):new ks(e,t)},Fo=function(e,t){var A=_o(e,t);return A.flags|=4,Qo(e,t,A,A),A},Uo=function(e,t,A){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||No(e)&&A.styles.isTransparent()},Eo=function(e){return e.isPositioned()||e.isFloating()},Io=function(e){return e.nodeType===Node.TEXT_NODE},bo=function(e){return e.nodeType===Node.ELEMENT_NODE},To=function(e){return bo(e)&&"undefined"!==typeof e.style&&!So(e)},So=function(e){return"object"===typeof e.className},Do=function(e){return"LI"===e.tagName},xo=function(e){return"OL"===e.tagName},Ho=function(e){return"INPUT"===e.tagName},ko=function(e){return"HTML"===e.tagName},Lo=function(e){return"svg"===e.tagName},No=function(e){return"BODY"===e.tagName},Ro=function(e){return"CANVAS"===e.tagName},Mo=function(e){return"VIDEO"===e.tagName},Oo=function(e){return"IMG"===e.tagName},Po=function(e){return"IFRAME"===e.tagName},Ko=function(e){return"STYLE"===e.tagName},Vo=function(e){return"SCRIPT"===e.tagName},Go=function(e){return"TEXTAREA"===e.tagName},qo=function(e){return"SELECT"===e.tagName},Wo=function(e){return"SLOT"===e.tagName},jo=function(e){return e.tagName.indexOf("-")>0},Jo=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,A=e.counterIncrement,n=e.counterReset,r=!0;null!==A&&A.forEach((function(e){var A=t.counters[e.counter];A&&0!==e.increment&&(r=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=e.increment)}));var s=[];return r&&n.forEach((function(e){var A=t.counters[e.counter];s.push(e.counter),A||(A=t.counters[e.counter]=[]),A.push(e.reset)})),s},e}(),Yo={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Xo={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},zo={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},$o={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Zo=function(e,t,A,n,r,s){return e<t||e>A?ha(e,r,s.length>0):n.integers.reduce((function(t,A,r){while(e>=A)e-=A,t+=n.values[r];return t}),"")+s},ea=function(e,t,A,n){var r="";do{A||e--,r=n(e)+r,e/=t}while(e*t>=t);return r},ta=function(e,t,A,n,r){var s=A-t+1;return(e<0?"-":"")+(ea(Math.abs(e),s,n,(function(e){return u(Math.floor(e%s)+t)}))+r)},Aa=function(e,t,A){void 0===A&&(A=". ");var n=t.length;return ea(Math.abs(e),n,!1,(function(e){return t[Math.floor(e%n)]}))+A},na=1,ra=2,sa=4,ia=8,oa=function(e,t,A,n,r,s){if(e<-9999||e>9999)return ha(e,4,r.length>0);var i=Math.abs(e),o=r;if(0===i)return t[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;0===c&&Bs(s,na)&&""!==o?o=t[c]+o:c>1||1===c&&0===a||1===c&&1===a&&Bs(s,ra)||1===c&&1===a&&Bs(s,sa)&&e>100||1===c&&a>1&&Bs(s,ia)?o=t[c]+(a>0?A[a-1]:"")+o:1===c&&a>0&&(o=A[a-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},aa="十百千萬",ca="拾佰仟萬",ua="マイナス",la="마이너스",ha=function(e,t,A){var n=A?". ":"",r=A?"、":"",s=A?", ":"",i=A?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=ta(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Aa(e,"〇一二三四五六七八九",r);case 6:return Zo(e,1,3999,Yo,3,n).toLowerCase();case 7:return Zo(e,1,3999,Yo,3,n);case 8:return ta(e,945,969,!1,n);case 9:return ta(e,97,122,!1,n);case 10:return ta(e,65,90,!1,n);case 11:return ta(e,1632,1641,!0,n);case 12:case 49:return Zo(e,1,9999,Xo,3,n);case 35:return Zo(e,1,9999,Xo,3,n).toLowerCase();case 13:return ta(e,2534,2543,!0,n);case 14:case 30:return ta(e,6112,6121,!0,n);case 15:return Aa(e,"子丑寅卯辰巳午未申酉戌亥",r);case 16:return Aa(e,"甲乙丙丁戊己庚辛壬癸",r);case 17:case 48:return oa(e,"零一二三四五六七八九",aa,"負",r,ra|sa|ia);case 47:return oa(e,"零壹貳參肆伍陸柒捌玖",ca,"負",r,na|ra|sa|ia);case 42:return oa(e,"零一二三四五六七八九",aa,"负",r,ra|sa|ia);case 41:return oa(e,"零壹贰叁肆伍陆柒捌玖",ca,"负",r,na|ra|sa|ia);case 26:return oa(e,"〇一二三四五六七八九","十百千万",ua,r,0);case 25:return oa(e,"零壱弐参四伍六七八九","拾百千万",ua,r,na|ra|sa);case 31:return oa(e,"영일이삼사오육칠팔구","십백천만",la,s,na|ra|sa);case 33:return oa(e,"零一二三四五六七八九","十百千萬",la,s,0);case 32:return oa(e,"零壹貳參四五六七八九","拾百千",la,s,na|ra|sa);case 18:return ta(e,2406,2415,!0,n);case 20:return Zo(e,1,19999,$o,3,n);case 21:return ta(e,2790,2799,!0,n);case 22:return ta(e,2662,2671,!0,n);case 22:return Zo(e,1,10999,zo,3,n);case 23:return Aa(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Aa(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return ta(e,3302,3311,!0,n);case 28:return Aa(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",r);case 29:return Aa(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",r);case 34:return ta(e,3792,3801,!0,n);case 37:return ta(e,6160,6169,!0,n);case 38:return ta(e,4160,4169,!0,n);case 39:return ta(e,2918,2927,!0,n);case 40:return ta(e,1776,1785,!0,n);case 43:return ta(e,3046,3055,!0,n);case 44:return ta(e,3174,3183,!0,n);case 45:return ta(e,3664,3673,!0,n);case 46:return ta(e,3872,3881,!0,n);case 3:default:return ta(e,48,57,!0,n)}},da="data-html2canvas-ignore",fa=function(){function e(e,t,A){if(this.context=e,this.options=A,this.scrolledElements=[],this.referenceElement=t,this.counters=new Jo,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var A=this,s=pa(e,t);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,a=s.contentWindow,c=a.document,u=wa(s).then((function(){return n(A,void 0,void 0,(function(){var e,A;return r(this,(function(n){switch(n.label){case 0:return this.scrolledElements.forEach(_a),a&&(a.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===t.top&&a.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),e=this.options.onclone,A=this.clonedReferenceElement,"undefined"===typeof A?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:n.sent(),n.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,ma(c)]:[3,4];case 3:n.sent(),n.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then((function(){return e(c,A)})).then((function(){return s}))]:[2,s]}}))}))}));return c.open(),c.write(va(document.doctype)+"<html></html>"),Qa(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(e){if(Hs(e,2),Ro(e))return this.createCanvasClone(e);if(Mo(e))return this.createVideoClone(e);if(Ko(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Oo(t)&&(Oo(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),jo(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Ca(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var A=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e}),""),n=e.cloneNode(!1);return n.textContent=A,n}}catch(qt){if(this.context.logger.error("Unable to access cssRules property",qt),"SecurityError"!==qt.name)throw qt}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var A=e.ownerDocument.createElement("img");try{return A.src=e.toDataURL(),A}catch(qt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var r=e.getContext("2d"),s=n.getContext("2d");if(s)if(!this.options.allowTaint&&r)s.putImageData(r.getImageData(0,0,e.width,e.height),0,0);else{var i=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(i){var o=i.getContextAttributes();!1===(null===o||void 0===o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}s.drawImage(e,0,0)}return n}catch(qt){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var A=t.getContext("2d");try{return A&&(A.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||A.getImageData(0,0,t.width,t.height)),t}catch(qt){this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},e.prototype.appendChildNode=function(e,t,A){bo(t)&&(Vo(t)||t.hasAttribute(da)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&bo(t)&&Ko(t)||e.appendChild(this.cloneNode(t,A))},e.prototype.cloneChildNodes=function(e,t,A){for(var n=this,r=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;r;r=r.nextSibling)if(bo(r)&&Wo(r)&&"function"===typeof r.assignedNodes){var s=r.assignedNodes();s.length&&s.forEach((function(e){return n.appendChildNode(t,e,A)}))}else this.appendChildNode(t,r,A)},e.prototype.cloneNode=function(e,t){if(Io(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var A=e.ownerDocument.defaultView;if(A&&bo(e)&&(To(e)||So(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var r=A.getComputedStyle(e),s=A.getComputedStyle(e,":before"),i=A.getComputedStyle(e,":after");this.referenceElement===e&&To(n)&&(this.clonedReferenceElement=n),No(n)&&Ta(n);var o=this.counters.parse(new Ts(this.context,r)),a=this.resolvePseudoContent(e,n,s,li.BEFORE);jo(e)&&(t=!0),Mo(e)||this.cloneChildNodes(e,n,t),a&&n.insertBefore(a,n.firstChild);var c=this.resolvePseudoContent(e,n,i,li.AFTER);return c&&n.appendChild(c),this.counters.pop(o),(r&&(this.options.copyStyles||So(e))&&!Po(e)||t)&&Ca(r,n),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(Go(e)||qo(e))&&(Go(n)||qo(n))&&(n.value=e.value),n}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,A,n){var r=this;if(A){var s=A.content,i=t.ownerDocument;if(i&&s&&"none"!==s&&"-moz-alt-content"!==s&&"none"!==A.display){this.counters.parse(new Ts(this.context,A));var o=new bs(this.context,A),a=i.createElement("html2canvaspseudoelement");Ca(A,a),o.content.forEach((function(t){if(0===t.type)a.appendChild(i.createTextNode(t.value));else if(22===t.type){var A=i.createElement("img");A.src=t.value,A.style.opacity="1",a.appendChild(A)}else if(18===t.type){if("attr"===t.name){var n=t.values.filter(OA);n.length&&a.appendChild(i.createTextNode(e.getAttribute(n[0].value)||""))}else if("counter"===t.name){var s=t.values.filter(GA),c=s[0],u=s[1];if(c&&OA(c)){var l=r.counters.getCounterValue(c.value),h=u&&OA(u)?kr.parse(r.context,u.value):3;a.appendChild(i.createTextNode(ha(l,h,!1)))}}else if("counters"===t.name){var d=t.values.filter(GA),f=(c=d[0],d[1]);u=d[2];if(c&&OA(c)){var g=r.counters.getCounterValues(c.value),p=u&&OA(u)?kr.parse(r.context,u.value):3,B=f&&0===f.type?f.value:"",m=g.map((function(e){return ha(e,p,!1)})).join(B);a.appendChild(i.createTextNode(m))}}}else if(20===t.type)switch(t.value){case"open-quote":a.appendChild(i.createTextNode(Qs(o.quotes,r.quoteDepth++,!0)));break;case"close-quote":a.appendChild(i.createTextNode(Qs(o.quotes,--r.quoteDepth,!1)));break;default:a.appendChild(i.createTextNode(t.value))}})),a.className=Ea+" "+Ia;var c=n===li.BEFORE?" "+Ea:" "+Ia;return So(t)?t.className.baseValue+=c:t.className+=c,a}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();(function(e){e[e["BEFORE"]=0]="BEFORE",e[e["AFTER"]=1]="AFTER"})(li||(li={}));var ga,pa=function(e,t){var A=e.createElement("iframe");return A.className="html2canvas-container",A.style.visibility="hidden",A.style.position="fixed",A.style.left="-10000px",A.style.top="0px",A.style.border="0",A.width=t.width.toString(),A.height=t.height.toString(),A.scrolling="no",A.setAttribute(da,"true"),e.body.appendChild(A),A},Ba=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},ma=function(e){return Promise.all([].slice.call(e.images,0).map(Ba))},wa=function(e){return new Promise((function(t,A){var n=e.contentWindow;if(!n)return A("No window assigned for iframe");var r=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var A=setInterval((function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(A),t(e))}),50)}}))},ya=["all","d","content"],Ca=function(e,t){for(var A=e.length-1;A>=0;A--){var n=e.item(A);-1===ya.indexOf(n)&&t.style.setProperty(n,e.getPropertyValue(n))}return t},va=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Qa=function(e,t,A){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||A!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,A)},_a=function(e){var t=e[0],A=e[1],n=e[2];t.scrollLeft=A,t.scrollTop=n},Fa=":before",Ua=":after",Ea="___html2canvas___pseudoelement_before",Ia="___html2canvas___pseudoelement_after",ba='{\n    content: "" !important;\n    display: none !important;\n}',Ta=function(e){Sa(e,"."+Ea+Fa+ba+"\n         ."+Ia+Ua+ba)},Sa=function(e,t){var A=e.ownerDocument;if(A){var n=A.createElement("style");n.textContent=t,e.appendChild(n)}},Da=function(){function e(){}return e.getOrigin=function(t){var A=e._link;return A?(A.href=t,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),xa=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:Oa(e)||Na(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return n(this,void 0,void 0,(function(){var t,A,n,s,i=this;return r(this,(function(r){switch(r.label){case 0:return t=Da.isSameOrigin(e),A=!Ra(e)&&!0===this._options.useCORS&&Gi.SUPPORT_CORS_IMAGES&&!t,n=!Ra(e)&&!t&&!Oa(e)&&"string"===typeof this._options.proxy&&Gi.SUPPORT_CORS_XHR&&!A,t||!1!==this._options.allowTaint||Ra(e)||Oa(e)||n||A?(s=e,n?[4,this.proxy(s)]:[3,2]):[2];case 1:s=r.sent(),r.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,(Ma(s)||A)&&(n.crossOrigin="anonymous"),n.src=s,!0===n.complete&&setTimeout((function(){return e(n)}),500),i._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+i._options.imageTimeout+"ms) loading image")}),i._options.imageTimeout)}))];case 3:return[2,r.sent()]}}))}))},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,A=this._options.proxy;if(!A)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise((function(r,s){var i=Gi.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===i)r(o.response);else{var e=new FileReader;e.addEventListener("load",(function(){return r(e.result)}),!1),e.addEventListener("error",(function(e){return s(e)}),!1),e.readAsDataURL(o.response)}else s("Failed to proxy resource "+n+" with status code "+o.status)},o.onerror=s;var a=A.indexOf("?")>-1?"&":"?";if(o.open("GET",""+A+a+"url="+encodeURIComponent(e)+"&responseType="+i),"text"!==i&&o instanceof XMLHttpRequest&&(o.responseType=i),t._options.imageTimeout){var c=t._options.imageTimeout;o.timeout=c,o.ontimeout=function(){return s("Timed out ("+c+"ms) proxying "+n)}}o.send()}))},e}(),Ha=/^data:image\/svg\+xml/i,ka=/^data:image\/.*;base64,/i,La=/^data:image\/.*/i,Na=function(e){return Gi.SUPPORT_SVG_DRAWING||!Pa(e)},Ra=function(e){return La.test(e)},Ma=function(e){return ka.test(e)},Oa=function(e){return"blob"===e.substr(0,4)},Pa=function(e){return"svg"===e.substr(-3).toLowerCase()||Ha.test(e)},Ka=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,A){return new e(this.x+t,this.y+A)},e}(),Va=function(e,t,A){return new Ka(e.x+(t.x-e.x)*A,e.y+(t.y-e.y)*A)},Ga=function(){function e(e,t,A,n){this.type=1,this.start=e,this.startControl=t,this.endControl=A,this.end=n}return e.prototype.subdivide=function(t,A){var n=Va(this.start,this.startControl,t),r=Va(this.startControl,this.endControl,t),s=Va(this.endControl,this.end,t),i=Va(n,r,t),o=Va(r,s,t),a=Va(i,o,t);return A?new e(this.start,n,i,a):new e(a,o,s,this.end)},e.prototype.add=function(t,A){return new e(this.start.add(t,A),this.startControl.add(t,A),this.endControl.add(t,A),this.end.add(t,A))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),qa=function(e){return 1===e.type},Wa=function(){function e(e){var t=e.styles,A=e.bounds,n=ZA(t.borderTopLeftRadius,A.width,A.height),r=n[0],s=n[1],i=ZA(t.borderTopRightRadius,A.width,A.height),o=i[0],a=i[1],c=ZA(t.borderBottomRightRadius,A.width,A.height),u=c[0],l=c[1],h=ZA(t.borderBottomLeftRadius,A.width,A.height),d=h[0],f=h[1],g=[];g.push((r+o)/A.width),g.push((d+u)/A.width),g.push((s+f)/A.height),g.push((a+l)/A.height);var p=Math.max.apply(Math,g);p>1&&(r/=p,s/=p,o/=p,a/=p,u/=p,l/=p,d/=p,f/=p);var B=A.width-o,m=A.height-l,w=A.width-u,y=A.height-f,C=t.borderTopWidth,v=t.borderRightWidth,Q=t.borderBottomWidth,_=t.borderLeftWidth,F=en(t.paddingTop,e.bounds.width),U=en(t.paddingRight,e.bounds.width),E=en(t.paddingBottom,e.bounds.width),I=en(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||s>0?ja(A.left+_/3,A.top+C/3,r-_/3,s-C/3,ga.TOP_LEFT):new Ka(A.left+_/3,A.top+C/3),this.topRightBorderDoubleOuterBox=r>0||s>0?ja(A.left+B,A.top+C/3,o-v/3,a-C/3,ga.TOP_RIGHT):new Ka(A.left+A.width-v/3,A.top+C/3),this.bottomRightBorderDoubleOuterBox=u>0||l>0?ja(A.left+w,A.top+m,u-v/3,l-Q/3,ga.BOTTOM_RIGHT):new Ka(A.left+A.width-v/3,A.top+A.height-Q/3),this.bottomLeftBorderDoubleOuterBox=d>0||f>0?ja(A.left+_/3,A.top+y,d-_/3,f-Q/3,ga.BOTTOM_LEFT):new Ka(A.left+_/3,A.top+A.height-Q/3),this.topLeftBorderDoubleInnerBox=r>0||s>0?ja(A.left+2*_/3,A.top+2*C/3,r-2*_/3,s-2*C/3,ga.TOP_LEFT):new Ka(A.left+2*_/3,A.top+2*C/3),this.topRightBorderDoubleInnerBox=r>0||s>0?ja(A.left+B,A.top+2*C/3,o-2*v/3,a-2*C/3,ga.TOP_RIGHT):new Ka(A.left+A.width-2*v/3,A.top+2*C/3),this.bottomRightBorderDoubleInnerBox=u>0||l>0?ja(A.left+w,A.top+m,u-2*v/3,l-2*Q/3,ga.BOTTOM_RIGHT):new Ka(A.left+A.width-2*v/3,A.top+A.height-2*Q/3),this.bottomLeftBorderDoubleInnerBox=d>0||f>0?ja(A.left+2*_/3,A.top+y,d-2*_/3,f-2*Q/3,ga.BOTTOM_LEFT):new Ka(A.left+2*_/3,A.top+A.height-2*Q/3),this.topLeftBorderStroke=r>0||s>0?ja(A.left+_/2,A.top+C/2,r-_/2,s-C/2,ga.TOP_LEFT):new Ka(A.left+_/2,A.top+C/2),this.topRightBorderStroke=r>0||s>0?ja(A.left+B,A.top+C/2,o-v/2,a-C/2,ga.TOP_RIGHT):new Ka(A.left+A.width-v/2,A.top+C/2),this.bottomRightBorderStroke=u>0||l>0?ja(A.left+w,A.top+m,u-v/2,l-Q/2,ga.BOTTOM_RIGHT):new Ka(A.left+A.width-v/2,A.top+A.height-Q/2),this.bottomLeftBorderStroke=d>0||f>0?ja(A.left+_/2,A.top+y,d-_/2,f-Q/2,ga.BOTTOM_LEFT):new Ka(A.left+_/2,A.top+A.height-Q/2),this.topLeftBorderBox=r>0||s>0?ja(A.left,A.top,r,s,ga.TOP_LEFT):new Ka(A.left,A.top),this.topRightBorderBox=o>0||a>0?ja(A.left+B,A.top,o,a,ga.TOP_RIGHT):new Ka(A.left+A.width,A.top),this.bottomRightBorderBox=u>0||l>0?ja(A.left+w,A.top+m,u,l,ga.BOTTOM_RIGHT):new Ka(A.left+A.width,A.top+A.height),this.bottomLeftBorderBox=d>0||f>0?ja(A.left,A.top+y,d,f,ga.BOTTOM_LEFT):new Ka(A.left,A.top+A.height),this.topLeftPaddingBox=r>0||s>0?ja(A.left+_,A.top+C,Math.max(0,r-_),Math.max(0,s-C),ga.TOP_LEFT):new Ka(A.left+_,A.top+C),this.topRightPaddingBox=o>0||a>0?ja(A.left+Math.min(B,A.width-v),A.top+C,B>A.width+v?0:Math.max(0,o-v),Math.max(0,a-C),ga.TOP_RIGHT):new Ka(A.left+A.width-v,A.top+C),this.bottomRightPaddingBox=u>0||l>0?ja(A.left+Math.min(w,A.width-_),A.top+Math.min(m,A.height-Q),Math.max(0,u-v),Math.max(0,l-Q),ga.BOTTOM_RIGHT):new Ka(A.left+A.width-v,A.top+A.height-Q),this.bottomLeftPaddingBox=d>0||f>0?ja(A.left+_,A.top+Math.min(y,A.height-Q),Math.max(0,d-_),Math.max(0,f-Q),ga.BOTTOM_LEFT):new Ka(A.left+_,A.top+A.height-Q),this.topLeftContentBox=r>0||s>0?ja(A.left+_+I,A.top+C+F,Math.max(0,r-(_+I)),Math.max(0,s-(C+F)),ga.TOP_LEFT):new Ka(A.left+_+I,A.top+C+F),this.topRightContentBox=o>0||a>0?ja(A.left+Math.min(B,A.width+_+I),A.top+C+F,B>A.width+_+I?0:o-_+I,a-(C+F),ga.TOP_RIGHT):new Ka(A.left+A.width-(v+U),A.top+C+F),this.bottomRightContentBox=u>0||l>0?ja(A.left+Math.min(w,A.width-(_+I)),A.top+Math.min(m,A.height+C+F),Math.max(0,u-(v+U)),l-(Q+E),ga.BOTTOM_RIGHT):new Ka(A.left+A.width-(v+U),A.top+A.height-(Q+E)),this.bottomLeftContentBox=d>0||f>0?ja(A.left+_+I,A.top+y,Math.max(0,d-(_+I)),f-(Q+E),ga.BOTTOM_LEFT):new Ka(A.left+_+I,A.top+A.height-(Q+E))}return e}();(function(e){e[e["TOP_LEFT"]=0]="TOP_LEFT",e[e["TOP_RIGHT"]=1]="TOP_RIGHT",e[e["BOTTOM_RIGHT"]=2]="BOTTOM_RIGHT",e[e["BOTTOM_LEFT"]=3]="BOTTOM_LEFT"})(ga||(ga={}));var ja=function(e,t,A,n,r){var s=(Math.sqrt(2)-1)/3*4,i=A*s,o=n*s,a=e+A,c=t+n;switch(r){case ga.TOP_LEFT:return new Ga(new Ka(e,c),new Ka(e,c-o),new Ka(a-i,t),new Ka(a,t));case ga.TOP_RIGHT:return new Ga(new Ka(e,t),new Ka(e+i,t),new Ka(a,c-o),new Ka(a,c));case ga.BOTTOM_RIGHT:return new Ga(new Ka(a,t),new Ka(a,t+o),new Ka(e+i,c),new Ka(e,c));case ga.BOTTOM_LEFT:default:return new Ga(new Ka(a,c),new Ka(a-i,c),new Ka(e,t+o),new Ka(e,t))}},Ja=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Ya=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Xa=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},za=function(){function e(e,t,A){this.offsetX=e,this.offsetY=t,this.matrix=A,this.type=0,this.target=6}return e}(),$a=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Za=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),ec=function(e){return 0===e.type},tc=function(e){return 1===e.type},Ac=function(e){return 2===e.type},nc=function(e,t){return e.length===t.length&&e.some((function(e,A){return e===t[A]}))},rc=function(e,t,A,n,r){return e.map((function(e,s){switch(s){case 0:return e.add(t,A);case 1:return e.add(t+n,A);case 2:return e.add(t+n,A+r);case 3:return e.add(t,A+r)}return e}))},sc=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),ic=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Wa(this.container),this.container.styles.opacity<1&&this.effects.push(new Za(this.container.styles.opacity)),null!==this.container.styles.transform){var A=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new za(A,n,r))}if(0!==this.container.styles.overflowX){var s=Ja(this.curves),i=Xa(this.curves);nc(s,i)?this.effects.push(new $a(s,6)):(this.effects.push(new $a(s,2)),this.effects.push(new $a(i,4)))}}return e.prototype.getEffects=function(e){var t=-1===[2,3].indexOf(this.container.styles.position),A=this.parent,n=this.effects.slice(0);while(A){var r=A.effects.filter((function(e){return!tc(e)}));if(t||0!==A.container.styles.position||!A.parent){if(n.unshift.apply(n,r),t=-1===[2,3].indexOf(A.container.styles.position),0!==A.container.styles.overflowX){var s=Ja(A.curves),i=Xa(A.curves);nc(s,i)||n.unshift(new $a(i,6))}}else n.unshift.apply(n,r);A=A.parent}return n.filter((function(t){return Bs(t.target,e)}))},e}(),oc=function(e,t,A,n){e.container.elements.forEach((function(r){var s=Bs(r.flags,4),i=Bs(r.flags,2),o=new ic(r,e);Bs(r.styles.display,2048)&&n.push(o);var a=Bs(r.flags,8)?[]:n;if(s||i){var c=s||r.styles.isPositioned()?A:t,u=new sc(o);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var l=r.styles.zIndex.order;if(l<0){var h=0;c.negativeZIndex.some((function(e,t){return l>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),c.negativeZIndex.splice(h,0,u)}else if(l>0){var d=0;c.positiveZIndex.some((function(e,t){return l>=e.element.container.styles.zIndex.order?(d=t+1,!1):d>0})),c.positiveZIndex.splice(d,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else r.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);oc(o,u,s?u:A,a)}else r.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),oc(o,t,A,a);Bs(r.flags,8)&&ac(r,a)}))},ac=function(e,t){for(var A=e instanceof ao?e.start:1,n=e instanceof ao&&e.reversed,r=0;r<t.length;r++){var s=t[r];s.container instanceof oo&&"number"===typeof s.container.value&&0!==s.container.value&&(A=s.container.value),s.listValue=ha(A,s.container.styles.listStyleType,!0),A+=n?-1:1}},cc=function(e){var t=new ic(e,null),A=new sc(t),n=[];return oc(t,A,A,n),ac(t.container,n),A},uc=function(e,t){switch(t){case 0:return gc(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return gc(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return gc(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return gc(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},lc=function(e,t){switch(t){case 0:return gc(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return gc(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return gc(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return gc(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},hc=function(e,t){switch(t){case 0:return gc(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return gc(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return gc(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return gc(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},dc=function(e,t){switch(t){case 0:return fc(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return fc(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return fc(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return fc(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},fc=function(e,t){var A=[];return qa(e)?A.push(e.subdivide(.5,!1)):A.push(e),qa(t)?A.push(t.subdivide(.5,!0)):A.push(t),A},gc=function(e,t,A,n){var r=[];return qa(e)?r.push(e.subdivide(.5,!1)):r.push(e),qa(A)?r.push(A.subdivide(.5,!0)):r.push(A),qa(n)?r.push(n.subdivide(.5,!0).reverse()):r.push(n),qa(t)?r.push(t.subdivide(.5,!1).reverse()):r.push(t),r},pc=function(e){var t=e.bounds,A=e.styles;return t.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},Bc=function(e){var t=e.styles,A=e.bounds,n=en(t.paddingLeft,A.width),r=en(t.paddingRight,A.width),s=en(t.paddingTop,A.width),i=en(t.paddingBottom,A.width);return A.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+r),-(t.borderTopWidth+t.borderBottomWidth+s+i))},mc=function(e,t){return 0===e?t.bounds:2===e?Bc(t):pc(t)},wc=function(e,t){return 0===e?t.bounds:2===e?Bc(t):pc(t)},yc=function(e,t,A){var n=mc(_c(e.styles.backgroundOrigin,t),e),r=wc(_c(e.styles.backgroundClip,t),e),s=Qc(_c(e.styles.backgroundSize,t),A,n),i=s[0],o=s[1],a=ZA(_c(e.styles.backgroundPosition,t),n.width-i,n.height-o),c=Fc(_c(e.styles.backgroundRepeat,t),a,s,n,r),u=Math.round(n.left+a[0]),l=Math.round(n.top+a[1]);return[c,u,l,i,o]},Cc=function(e){return OA(e)&&e.value===jn.AUTO},vc=function(e){return"number"===typeof e},Qc=function(e,t,A){var n=t[0],r=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(JA(i)&&o&&JA(o))return[en(i,A.width),en(o,A.height)];var a=vc(s);if(OA(i)&&(i.value===jn.CONTAIN||i.value===jn.COVER)){if(vc(s)){var c=A.width/A.height;return c<s!==(i.value===jn.COVER)?[A.width,A.width/s]:[A.height*s,A.height]}return[A.width,A.height]}var u=vc(n),l=vc(r),h=u||l;if(Cc(i)&&(!o||Cc(o))){if(u&&l)return[n,r];if(!a&&!h)return[A.width,A.height];if(h&&a){var d=u?n:r*s,f=l?r:n/s;return[d,f]}var g=u?n:A.width,p=l?r:A.height;return[g,p]}if(a){var B=0,m=0;return JA(i)?B=en(i,A.width):JA(o)&&(m=en(o,A.height)),Cc(i)?B=m*s:o&&!Cc(o)||(m=B/s),[B,m]}var w=null,y=null;if(JA(i)?w=en(i,A.width):o&&JA(o)&&(y=en(o,A.height)),null===w||o&&!Cc(o)||(y=u&&l?w/n*r:A.height),null!==y&&Cc(i)&&(w=u&&l?y/r*n:A.width),null!==w&&null!==y)return[w,y];throw new Error("Unable to calculate background-size for element")},_c=function(e,t){var A=e[t];return"undefined"===typeof A?e[0]:A},Fc=function(e,t,A,n,r){var s=t[0],i=t[1],o=A[0],a=A[1];switch(e){case 2:return[new Ka(Math.round(n.left),Math.round(n.top+i)),new Ka(Math.round(n.left+n.width),Math.round(n.top+i)),new Ka(Math.round(n.left+n.width),Math.round(a+n.top+i)),new Ka(Math.round(n.left),Math.round(a+n.top+i))];case 3:return[new Ka(Math.round(n.left+s),Math.round(n.top)),new Ka(Math.round(n.left+s+o),Math.round(n.top)),new Ka(Math.round(n.left+s+o),Math.round(n.height+n.top)),new Ka(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Ka(Math.round(n.left+s),Math.round(n.top+i)),new Ka(Math.round(n.left+s+o),Math.round(n.top+i)),new Ka(Math.round(n.left+s+o),Math.round(n.top+i+a)),new Ka(Math.round(n.left+s),Math.round(n.top+i+a))];default:return[new Ka(Math.round(r.left),Math.round(r.top)),new Ka(Math.round(r.left+r.width),Math.round(r.top)),new Ka(Math.round(r.left+r.width),Math.round(r.height+r.top)),new Ka(Math.round(r.left),Math.round(r.height+r.top))]}},Uc="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Ec="Hidden Text",Ic=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var A=this._document.createElement("div"),n=this._document.createElement("img"),r=this._document.createElement("span"),s=this._document.body;A.style.visibility="hidden",A.style.fontFamily=e,A.style.fontSize=t,A.style.margin="0",A.style.padding="0",A.style.whiteSpace="nowrap",s.appendChild(A),n.src=Uc,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(Ec)),A.appendChild(r),A.appendChild(n);var i=n.offsetTop-r.offsetTop+2;A.removeChild(r),A.appendChild(this._document.createTextNode(Ec)),A.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-A.offsetTop+2;return s.removeChild(A),{baseline:i,middle:o}},e.prototype.getMetrics=function(e,t){var A=e+" "+t;return"undefined"===typeof this._data[A]&&(this._data[A]=this.parseMetrics(e,t)),this._data[A]},e}(),bc=function(){function e(e,t){this.context=e,this.options=t}return e}(),Tc=1e4,Sc=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n._activeEffects=[],n.canvas=A.canvas?A.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),A.canvas||(n.canvas.width=Math.floor(A.width*A.scale),n.canvas.height=Math.floor(A.height*A.scale),n.canvas.style.width=A.width+"px",n.canvas.style.height=A.height+"px"),n.fontMetrics=new Ic(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-A.x,-A.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+A.width+"x"+A.height+") with scale "+A.scale),n}return t(A,e),A.prototype.applyEffects=function(e){var t=this;while(this._activeEffects.length)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},A.prototype.applyEffect=function(e){this.ctx.save(),Ac(e)&&(this.ctx.globalAlpha=e.opacity),ec(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),tc(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(e){return n(this,void 0,void 0,(function(){var t;return r(this,(function(A){switch(A.label){case 0:return t=e.element.container.styles,t.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}}))}))},A.prototype.renderNode=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return Bs(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},A.prototype.renderTextWithLetterSpacing=function(e,t,A){var n=this;if(0===t)this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+A);else{var r=Yi(e.text);r.reduce((function(t,r){return n.ctx.fillText(r,t,e.bounds.top+A),t+n.ctx.measureText(r).width}),e.bounds.left)}},A.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),A=Lc(e.fontFamily).join(", "),n=RA(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,n,A].join(" "),A,n]},A.prototype.renderTextNode=function(e,t){return n(this,void 0,void 0,(function(){var A,n,s,i,o,a,c,u,l=this;return r(this,(function(r){return A=this.createFontStyle(t),n=A[0],s=A[1],i=A[2],this.ctx.font=n,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(s,i),a=o.baseline,c=o.middle,u=t.paintOrder,e.textBounds.forEach((function(e){u.forEach((function(A){switch(A){case 0:l.ctx.fillStyle=hn(t.color),l.renderTextWithLetterSpacing(e,t.letterSpacing,a);var n=t.textShadow;n.length&&e.text.trim().length&&(n.slice(0).reverse().forEach((function(A){l.ctx.shadowColor=hn(A.color),l.ctx.shadowOffsetX=A.offsetX.number*l.options.scale,l.ctx.shadowOffsetY=A.offsetY.number*l.options.scale,l.ctx.shadowBlur=A.blur.number,l.renderTextWithLetterSpacing(e,t.letterSpacing,a)})),l.ctx.shadowColor="",l.ctx.shadowOffsetX=0,l.ctx.shadowOffsetY=0,l.ctx.shadowBlur=0),t.textDecorationLine.length&&(l.ctx.fillStyle=hn(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:l.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+a),e.bounds.width,1);break;case 2:l.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:l.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1);break}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(l.ctx.strokeStyle=hn(t.webkitTextStrokeColor),l.ctx.lineWidth=t.webkitTextStrokeWidth,l.ctx.lineJoin=window.chrome?"miter":"round",l.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+a)),l.ctx.strokeStyle="",l.ctx.lineWidth=0,l.ctx.lineJoin="miter";break}}))})),[2]}))}))},A.prototype.renderReplacedElement=function(e,t,A){if(A&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var n=Bc(e),r=Xa(t);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,e.intrinsicWidth,e.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(e){return n(this,void 0,void 0,(function(){var t,n,s,o,a,c,u,l,h,d,f,g,p,B,m,w,y,C,v;return r(this,(function(r){switch(r.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,n=e.curves,s=t.styles,o=0,a=t.textNodes,r.label=1;case 1:return o<a.length?(c=a[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:r.sent(),r.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof ro))return[3,8];r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return w=r.sent(),this.renderReplacedElement(t,n,w),[3,8];case 7:return r.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof so&&this.renderReplacedElement(t,n,t.canvas),!(t instanceof io))return[3,12];r.label=9;case 9:return r.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return w=r.sent(),this.renderReplacedElement(t,n,w),[3,12];case 11:return r.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof Co&&t.tree?(u=new A(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}),[4,u.render(t.tree)]):[3,14];case 13:l=r.sent(),t.width&&t.height&&this.ctx.drawImage(l,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),r.label=14;case 14:if(t instanceof mo&&(h=Math.min(t.bounds.width,t.bounds.height),t.type===fo?t.checked&&(this.ctx.save(),this.path([new Ka(t.bounds.left+.39363*h,t.bounds.top+.79*h),new Ka(t.bounds.left+.16*h,t.bounds.top+.5549*h),new Ka(t.bounds.left+.27347*h,t.bounds.top+.44071*h),new Ka(t.bounds.left+.39694*h,t.bounds.top+.5649*h),new Ka(t.bounds.left+.72983*h,t.bounds.top+.23*h),new Ka(t.bounds.left+.84*h,t.bounds.top+.34085*h),new Ka(t.bounds.left+.39363*h,t.bounds.top+.79*h)]),this.ctx.fillStyle=hn(Bo),this.ctx.fill(),this.ctx.restore()):t.type===go&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+h/2,t.bounds.top+h/2,h/4,0,2*Math.PI,!0),this.ctx.fillStyle=hn(Bo),this.ctx.fill(),this.ctx.restore())),Dc(t)&&t.value.length){switch(d=this.createFontStyle(s),C=d[0],f=d[1],g=this.fontMetrics.getMetrics(C,f).baseline,this.ctx.font=C,this.ctx.fillStyle=hn(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Hc(t.styles.textAlign),v=Bc(t),p=0,t.styles.textAlign){case 1:p+=v.width/2;break;case 2:p+=v.width;break}B=v.add(p,0,0,-v.height/2+1),this.ctx.save(),this.path([new Ka(v.left,v.top),new Ka(v.left+v.width,v.top),new Ka(v.left+v.width,v.top+v.height),new Ka(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new qi(t.value,B),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Bs(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(m=t.styles.listStyleImage,0!==m.type)return[3,18];w=void 0,y=m.url,r.label=15;case 15:return r.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return w=r.sent(),this.ctx.drawImage(w,t.bounds.left-(w.width+10),t.bounds.top),[3,18];case 17:return r.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(C=this.createFontStyle(s)[0],this.ctx.font=C,this.ctx.fillStyle=hn(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new i(t.bounds.left,t.bounds.top+en(t.styles.paddingTop,t.bounds.width),t.bounds.width,Dr(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new qi(e.listValue,v),s.letterSpacing,Dr(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),r.label=20;case 20:return[2]}}))}))},A.prototype.renderStackContent=function(e){return n(this,void 0,void 0,(function(){var t,A,n,s,i,o,a,c,u,l,h,d,f,g,p;return r(this,(function(r){switch(r.label){case 0:return Bs(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:r.sent(),t=0,A=e.negativeZIndex,r.label=2;case 2:return t<A.length?(p=A[t],[4,this.renderStack(p)]):[3,5];case 3:r.sent(),r.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:r.sent(),n=0,s=e.nonInlineLevel,r.label=7;case 7:return n<s.length?(p=s[n],[4,this.renderNode(p)]):[3,10];case 8:r.sent(),r.label=9;case 9:return n++,[3,7];case 10:i=0,o=e.nonPositionedFloats,r.label=11;case 11:return i<o.length?(p=o[i],[4,this.renderStack(p)]):[3,14];case 12:r.sent(),r.label=13;case 13:return i++,[3,11];case 14:a=0,c=e.nonPositionedInlineLevel,r.label=15;case 15:return a<c.length?(p=c[a],[4,this.renderStack(p)]):[3,18];case 16:r.sent(),r.label=17;case 17:return a++,[3,15];case 18:u=0,l=e.inlineLevel,r.label=19;case 19:return u<l.length?(p=l[u],[4,this.renderNode(p)]):[3,22];case 20:r.sent(),r.label=21;case 21:return u++,[3,19];case 22:h=0,d=e.zeroOrAutoZIndexOrTransformedOrOpacity,r.label=23;case 23:return h<d.length?(p=d[h],[4,this.renderStack(p)]):[3,26];case 24:r.sent(),r.label=25;case 25:return h++,[3,23];case 26:f=0,g=e.positiveZIndex,r.label=27;case 27:return f<g.length?(p=g[f],[4,this.renderStack(p)]):[3,30];case 28:r.sent(),r.label=29;case 29:return f++,[3,27];case 30:return[2]}}))}))},A.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},A.prototype.formatPath=function(e){var t=this;e.forEach((function(e,A){var n=qa(e)?e.start:e;0===A?t.ctx.moveTo(n.x,n.y):t.ctx.lineTo(n.x,n.y),qa(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},A.prototype.renderRepeat=function(e,t,A,n){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(A,n),this.ctx.fill(),this.ctx.translate(-A,-n)},A.prototype.resizeImage=function(e,t,A){var n;if(e.width===t&&e.height===A)return e;var r=null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document,s=r.createElement("canvas");s.width=Math.max(1,t),s.height=Math.max(1,A);var i=s.getContext("2d");return i.drawImage(e,0,0,e.width,e.height,0,0,t,A),s},A.prototype.renderBackgroundImage=function(e){return n(this,void 0,void 0,(function(){var t,A,n,s,i,o;return r(this,(function(a){switch(a.label){case 0:t=e.styles.backgroundImage.length-1,A=function(A){var s,i,o,a,c,u,l,h,d,f,g,p,B,m,w,y,C,v,Q,_,F,U,E,I,b,T,S,D,x,H,k;return r(this,(function(r){switch(r.label){case 0:if(0!==A.type)return[3,5];s=void 0,i=A.url,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.context.cache.match(i)];case 2:return s=r.sent(),[3,4];case 3:return r.sent(),n.context.logger.error("Error loading background-image "+i),[3,4];case 4:return s&&(o=yc(e,t,[s.width,s.height,s.width/s.height]),y=o[0],U=o[1],E=o[2],Q=o[3],_=o[4],m=n.ctx.createPattern(n.resizeImage(s,Q,_),"repeat"),n.renderRepeat(y,m,U,E)),[3,6];case 5:Vn(A)?(a=yc(e,t,[null,null,null]),y=a[0],U=a[1],E=a[2],Q=a[3],_=a[4],c=Un(A.angle,Q,_),u=c[0],l=c[1],h=c[2],d=c[3],f=c[4],g=document.createElement("canvas"),g.width=Q,g.height=_,p=g.getContext("2d"),B=p.createLinearGradient(l,d,h,f),_n(A.stops,u).forEach((function(e){return B.addColorStop(e.stop,hn(e.color))})),p.fillStyle=B,p.fillRect(0,0,Q,_),Q>0&&_>0&&(m=n.ctx.createPattern(g,"repeat"),n.renderRepeat(y,m,U,E))):Gn(A)&&(w=yc(e,t,[null,null,null]),y=w[0],C=w[1],v=w[2],Q=w[3],_=w[4],F=0===A.position.length?[zA]:A.position,U=en(F[0],Q),E=en(F[F.length-1],_),I=bn(A,U,E,Q,_),b=I[0],T=I[1],b>0&&T>0&&(S=n.ctx.createRadialGradient(C+U,v+E,0,C+U,v+E,b),_n(A.stops,2*b).forEach((function(e){return S.addColorStop(e.stop,hn(e.color))})),n.path(y),n.ctx.fillStyle=S,b!==T?(D=e.bounds.left+.5*e.bounds.width,x=e.bounds.top+.5*e.bounds.height,H=T/b,k=1/H,n.ctx.save(),n.ctx.translate(D,x),n.ctx.transform(1,0,0,H,0,0),n.ctx.translate(-D,-x),n.ctx.fillRect(C,k*(v-x)+x,Q,_*k),n.ctx.restore()):n.ctx.fill())),r.label=6;case 6:return t--,[2]}}))},n=this,s=0,i=e.styles.backgroundImage.slice(0).reverse(),a.label=1;case 1:return s<i.length?(o=i[s],[5,A(o)]):[3,4];case 2:a.sent(),a.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},A.prototype.renderSolidBorder=function(e,t,A){return n(this,void 0,void 0,(function(){return r(this,(function(n){return this.path(uc(A,t)),this.ctx.fillStyle=hn(e),this.ctx.fill(),[2]}))}))},A.prototype.renderDoubleBorder=function(e,t,A,s){return n(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return t<3?[4,this.renderSolidBorder(e,A,s)]:[3,2];case 1:return r.sent(),[2];case 2:return n=lc(s,A),this.path(n),this.ctx.fillStyle=hn(e),this.ctx.fill(),i=hc(s,A),this.path(i),this.ctx.fill(),[2]}}))}))},A.prototype.renderNodeBackgroundAndBorders=function(e){return n(this,void 0,void 0,(function(){var t,A,n,s,i,o,a,c,u=this;return r(this,(function(r){switch(r.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,A=!ln(t.backgroundColor)||t.backgroundImage.length,n=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],s=xc(_c(t.backgroundClip,0),e.curves),A||t.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),ln(t.backgroundColor)||(this.ctx.fillStyle=hn(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:r.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){u.ctx.save();var A=Ja(e.curves),n=t.inset?0:Tc,r=rc(A,-n+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(u.path(A),u.ctx.clip(),u.mask(r)):(u.mask(A),u.ctx.clip(),u.path(r)),u.ctx.shadowOffsetX=t.offsetX.number+n,u.ctx.shadowOffsetY=t.offsetY.number,u.ctx.shadowColor=hn(t.color),u.ctx.shadowBlur=t.blur.number,u.ctx.fillStyle=t.inset?hn(t.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()})),r.label=2;case 2:i=0,o=0,a=n,r.label=3;case 3:return o<a.length?(c=a[o],0!==c.style&&!ln(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,2)]:[3,11]):[3,13];case 4:return r.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,3)];case 6:return r.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,i,e.curves)];case 8:return r.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,i,e.curves)];case 10:r.sent(),r.label=11;case 11:i++,r.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},A.prototype.renderDashedDottedBorder=function(e,t,A,s,i){return n(this,void 0,void 0,(function(){var n,o,a,c,u,l,h,d,f,g,p,B,m,w,y,C;return r(this,(function(r){return this.ctx.save(),n=dc(s,A),o=uc(s,A),2===i&&(this.path(o),this.ctx.clip()),qa(o[0])?(a=o[0].start.x,c=o[0].start.y):(a=o[0].x,c=o[0].y),qa(o[1])?(u=o[1].end.x,l=o[1].end.y):(u=o[1].x,l=o[1].y),h=0===A||2===A?Math.abs(a-u):Math.abs(c-l),this.ctx.beginPath(),3===i?this.formatPath(n):this.formatPath(o.slice(0,2)),d=t<3?3*t:2*t,f=t<3?2*t:t,3===i&&(d=t,f=t),g=!0,h<=2*d?g=!1:h<=2*d+f?(p=h/(2*d+f),d*=p,f*=p):(B=Math.floor((h+f)/(d+f)),m=(h-B*d)/(B-1),w=(h-(B+1)*d)/B,f=w<=0||Math.abs(f-m)<Math.abs(f-w)?m:w),g&&(3===i?this.ctx.setLineDash([0,d+f]):this.ctx.setLineDash([d,f])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=hn(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(qa(o[0])&&(y=o[3],C=o[0],this.ctx.beginPath(),this.formatPath([new Ka(y.end.x,y.end.y),new Ka(C.start.x,C.start.y)]),this.ctx.stroke()),qa(o[1])&&(y=o[1],C=o[2],this.ctx.beginPath(),this.formatPath([new Ka(y.end.x,y.end.y),new Ka(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},A.prototype.render=function(e){return n(this,void 0,void 0,(function(){var t;return r(this,(function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=hn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=cc(e),[4,this.renderStack(t)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},A}(bc),Dc=function(e){return e instanceof yo||(e instanceof wo||e instanceof mo&&e.type!==go&&e.type!==fo)},xc=function(e,t){switch(e){case 0:return Ja(t);case 2:return Ya(t);case 1:default:return Xa(t)}},Hc=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},kc=["-apple-system","system-ui"],Lc=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===kc.indexOf(e)})):e},Nc=function(e){function A(t,A){var n=e.call(this,t,A)||this;return n.canvas=A.canvas?A.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=A,n.canvas.width=Math.floor(A.width*A.scale),n.canvas.height=Math.floor(A.height*A.scale),n.canvas.style.width=A.width+"px",n.canvas.style.height=A.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-A.x,-A.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+A.scale),n}return t(A,e),A.prototype.render=function(e){return n(this,void 0,void 0,(function(){var t,A;return r(this,(function(n){switch(n.label){case 0:return t=Ki(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Rc(t)];case 1:return A=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=hn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},A}(bc),Rc=function(e){return new Promise((function(t,A){var n=new Image;n.onload=function(){t(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Mc=function(){function e(e){var t=e.id,A=e.enabled;this.id=t,this.enabled=A,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,s([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),Oc=function(){function e(t,A){var n;this.windowBounds=A,this.instanceName="#"+e.instanceCount++,this.logger=new Mc({id:this.instanceName,enabled:t.logging}),this.cache=null!==(n=t.cache)&&void 0!==n?n:new xa(this,t)}return e.instanceCount=1,e}(),Pc=function(e,t){return void 0===t&&(t={}),Kc(e,t)};"undefined"!==typeof window&&Da.setContext(window);var Kc=function(e,t){return n(void 0,void 0,void 0,(function(){var n,s,c,u,l,h,d,f,g,p,B,m,w,y,C,v,Q,_,F,U,E,I,b,T,S,D,x,H,k,L,N,R,M,O,P,K,V,G,q;return r(this,(function(r){switch(r.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(n=e.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(s=n.defaultView,!s)throw new Error("Document is not attached to a Window");return c={allowTaint:null!==(b=t.allowTaint)&&void 0!==b&&b,imageTimeout:null!==(T=t.imageTimeout)&&void 0!==T?T:15e3,proxy:t.proxy,useCORS:null!==(S=t.useCORS)&&void 0!==S&&S},u=A({logging:null===(D=t.logging)||void 0===D||D,cache:t.cache},c),l={windowWidth:null!==(x=t.windowWidth)&&void 0!==x?x:s.innerWidth,windowHeight:null!==(H=t.windowHeight)&&void 0!==H?H:s.innerHeight,scrollX:null!==(k=t.scrollX)&&void 0!==k?k:s.pageXOffset,scrollY:null!==(L=t.scrollY)&&void 0!==L?L:s.pageYOffset},h=new i(l.scrollX,l.scrollY,l.windowWidth,l.windowHeight),d=new Oc(u,h),f=null!==(N=t.foreignObjectRendering)&&void 0!==N&&N,g={allowTaint:null!==(R=t.allowTaint)&&void 0!==R&&R,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:f,copyStyles:f},d.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),p=new fa(d,e,g),B=p.clonedReferenceElement,B?[4,p.toIFrame(n,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=r.sent(),w=No(B)||ko(B)?a(B.ownerDocument):o(d,B),y=w.width,C=w.height,v=w.left,Q=w.top,_=Vc(d,B,t.backgroundColor),F={canvas:t.canvas,backgroundColor:_,scale:null!==(O=null!==(M=t.scale)&&void 0!==M?M:s.devicePixelRatio)&&void 0!==O?O:1,x:(null!==(P=t.x)&&void 0!==P?P:0)+v,y:(null!==(K=t.y)&&void 0!==K?K:0)+Q,width:null!==(V=t.width)&&void 0!==V?V:Math.ceil(y),height:null!==(G=t.height)&&void 0!==G?G:Math.ceil(C)},f?(d.logger.debug("Document cloned, using foreign object rendering"),I=new Nc(d,F),[4,I.render(B)]):[3,3];case 2:return U=r.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+v+","+Q+" with size "+y+"x"+C+" using computed rendering"),d.logger.debug("Starting DOM parsing"),E=Fo(d,B),_===E.styles.backgroundColor&&(E.styles.backgroundColor=yn.TRANSPARENT),d.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),I=new Sc(d,F),[4,I.render(E)];case 4:U=r.sent(),r.label=5;case 5:return(null===(q=t.removeContainer)||void 0===q||q)&&(fa.destroy(m)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,U]}}))}))},Vc=function(e,t,A){var n=t.ownerDocument,r=n.documentElement?wn(e,getComputedStyle(n.documentElement).backgroundColor):yn.TRANSPARENT,s=n.body?wn(e,getComputedStyle(n.body).backgroundColor):yn.TRANSPARENT,i="string"===typeof A?wn(e,A):null===A?yn.TRANSPARENT:4294967295;return t===n.documentElement?ln(r)?ln(s)?i:s:r:i};return Pc}))},744:function(e,t){"use strict";t.Z=(e,t)=>{const A=e.__vccOpts||e;for(const[n,r]of t)A[n]=r;return A}},119:function(e,t,A){"use strict";A.d(t,{PO:function(){return q},p7:function(){return tt}});var n=A(252),r=A(262);
/*!
  * vue-router v4.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const s="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,i=e=>s?Symbol(e):"_vr_"+e,o=i("rvlm"),a=i("rvd"),c=i("r"),u=i("rl"),l=i("rvl"),h="undefined"!==typeof window;function d(e){return e.__esModule||s&&"Module"===e[Symbol.toStringTag]}const f=Object.assign;function g(e,t){const A={};for(const n in t){const r=t[n];A[n]=Array.isArray(r)?r.map(e):e(r)}return A}const p=()=>{};const B=/\/$/,m=e=>e.replace(B,"");function w(e,t,A="/"){let n,r={},s="",i="";const o=t.indexOf("?"),a=t.indexOf("#",o>-1?o:0);return o>-1&&(n=t.slice(0,o),s=t.slice(o+1,a>-1?a:t.length),r=e(s)),a>-1&&(n=n||t.slice(0,a),i=t.slice(a,t.length)),n=E(null!=n?n:t,A),{fullPath:n+(s&&"?")+s+i,path:n,query:r,hash:i}}function y(e,t){const A=t.query?e(t.query):"";return t.path+(A&&"?")+A+(t.hash||"")}function C(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function v(e,t,A){const n=t.matched.length-1,r=A.matched.length-1;return n>-1&&n===r&&Q(t.matched[n],A.matched[r])&&_(t.params,A.params)&&e(t.query)===e(A.query)&&t.hash===A.hash}function Q(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function _(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const A in e)if(!F(e[A],t[A]))return!1;return!0}function F(e,t){return Array.isArray(e)?U(e,t):Array.isArray(t)?U(t,e):e===t}function U(e,t){return Array.isArray(t)?e.length===t.length&&e.every(((e,A)=>e===t[A])):1===e.length&&e[0]===t}function E(e,t){if(e.startsWith("/"))return e;if(!e)return t;const A=t.split("/"),n=e.split("/");let r,s,i=A.length-1;for(r=0;r<n.length;r++)if(s=n[r],1!==i&&"."!==s){if(".."!==s)break;i--}return A.slice(0,i).join("/")+"/"+n.slice(r-(r===n.length?1:0)).join("/")}var I,b;(function(e){e["pop"]="pop",e["push"]="push"})(I||(I={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(b||(b={}));function T(e){if(!e)if(h){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),m(e)}const S=/^[^#]+#/;function D(e,t){return e.replace(S,"#")+t}function x(e,t){const A=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-A.left-(t.left||0),top:n.top-A.top-(t.top||0)}}const H=()=>({left:window.pageXOffset,top:window.pageYOffset});function k(e){let t;if("el"in e){const A=e.el,n="string"===typeof A&&A.startsWith("#");0;const r="string"===typeof A?n?document.getElementById(A.slice(1)):document.querySelector(A):A;if(!r)return;t=x(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function L(e,t){const A=history.state?history.state.position-t:-1;return A+e}const N=new Map;function R(e,t){N.set(e,t)}function M(e){const t=N.get(e);return N.delete(e),t}let O=()=>location.protocol+"//"+location.host;function P(e,t){const{pathname:A,search:n,hash:r}=t,s=e.indexOf("#");if(s>-1){let t=r.includes(e.slice(s))?e.slice(s).length:1,A=r.slice(t);return"/"!==A[0]&&(A="/"+A),C(A,"")}const i=C(A,e);return i+n+r}function K(e,t,A,n){let r=[],s=[],i=null;const o=({state:s})=>{const o=P(e,location),a=A.value,c=t.value;let u=0;if(s){if(A.value=o,t.value=s,i&&i===a)return void(i=null);u=c?s.position-c.position:0}else n(o);r.forEach((e=>{e(A.value,a,{delta:u,type:I.pop,direction:u?u>0?b.forward:b.back:b.unknown})}))};function a(){i=A.value}function c(e){r.push(e);const t=()=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)};return s.push(t),t}function u(){const{history:e}=window;e.state&&e.replaceState(f({},e.state,{scroll:H()}),"")}function l(){for(const e of s)e();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u),{pauseListeners:a,listen:c,destroy:l}}function V(e,t,A,n=!1,r=!1){return{back:e,current:t,forward:A,replaced:n,position:window.history.length,scroll:r?H():null}}function G(e){const{history:t,location:A}=window,n={value:P(e,A)},r={value:t.state};function s(n,s,i){const o=e.indexOf("#"),a=o>-1?(A.host&&document.querySelector("base")?e:e.slice(o))+n:O()+e+n;try{t[i?"replaceState":"pushState"](s,"",a),r.value=s}catch(c){console.error(c),A[i?"replace":"assign"](a)}}function i(e,A){const i=f({},t.state,V(r.value.back,e,r.value.forward,!0),A,{position:r.value.position});s(e,i,!0),n.value=e}function o(e,A){const i=f({},r.value,t.state,{forward:e,scroll:H()});s(i.current,i,!0);const o=f({},V(n.value,e,null),{position:i.position+1},A);s(e,o,!1),n.value=e}return r.value||s(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:n,state:r,push:o,replace:i}}function q(e){e=T(e);const t=G(e),A=K(e,t.state,t.location,t.replace);function n(e,t=!0){t||A.pauseListeners(),history.go(e)}const r=f({location:"",base:e,go:n,createHref:D.bind(null,e)},t,A);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function W(e){return"string"===typeof e||e&&"object"===typeof e}function j(e){return"string"===typeof e||"symbol"===typeof e}const J={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Y=i("nf");var X;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(X||(X={}));function z(e,t){return f(new Error,{type:e,[Y]:!0},t)}function $(e,t){return e instanceof Error&&Y in e&&(null==t||!!(e.type&t))}const Z="[^/]+?",ee={sensitive:!1,strict:!1,start:!0,end:!0},te=/[.+*?^${}()[\]/\\]/g;function Ae(e,t){const A=f({},ee,t),n=[];let r=A.start?"^":"";const s=[];for(const u of e){const e=u.length?[]:[90];A.strict&&!u.length&&(r+="/");for(let t=0;t<u.length;t++){const n=u[t];let i=40+(A.sensitive?.25:0);if(0===n.type)t||(r+="/"),r+=n.value.replace(te,"\\$&"),i+=40;else if(1===n.type){const{value:e,repeatable:A,optional:o,regexp:a}=n;s.push({name:e,repeatable:A,optional:o});const l=a||Z;if(l!==Z){i+=10;try{new RegExp(`(${l})`)}catch(c){throw new Error(`Invalid custom RegExp for param "${e}" (${l}): `+c.message)}}let h=A?`((?:${l})(?:/(?:${l}))*)`:`(${l})`;t||(h=o&&u.length<2?`(?:/${h})`:"/"+h),o&&(h+="?"),r+=h,i+=20,o&&(i+=-8),A&&(i+=-20),".*"===l&&(i+=-50)}e.push(i)}n.push(e)}if(A.strict&&A.end){const e=n.length-1;n[e][n[e].length-1]+=.7000000000000001}A.strict||(r+="/?"),A.end?r+="$":A.strict&&(r+="(?:/|$)");const i=new RegExp(r,A.sensitive?"":"i");function o(e){const t=e.match(i),A={};if(!t)return null;for(let n=1;n<t.length;n++){const e=t[n]||"",r=s[n-1];A[r.name]=e&&r.repeatable?e.split("/"):e}return A}function a(t){let A="",n=!1;for(const r of e){n&&A.endsWith("/")||(A+="/"),n=!1;for(const e of r)if(0===e.type)A+=e.value;else if(1===e.type){const{value:s,repeatable:i,optional:o}=e,a=s in t?t[s]:"";if(Array.isArray(a)&&!i)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(a)?a.join("/"):a;if(!c){if(!o)throw new Error(`Missing required param "${s}"`);r.length<2&&(A.endsWith("/")?A=A.slice(0,-1):n=!0)}A+=c}}return A}return{re:i,score:n,keys:s,parse:o,stringify:a}}function ne(e,t){let A=0;while(A<e.length&&A<t.length){const n=t[A]-e[A];if(n)return n;A++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function re(e,t){let A=0;const n=e.score,r=t.score;while(A<n.length&&A<r.length){const e=ne(n[A],r[A]);if(e)return e;A++}return r.length-n.length}const se={type:0,value:""},ie=/[a-zA-Z0-9_]/;function oe(e){if(!e)return[[]];if("/"===e)return[[se]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${A})/"${c}": ${e}`)}let A=0,n=A;const r=[];let s;function i(){s&&r.push(s),s=[]}let o,a=0,c="",u="";function l(){c&&(0===A?s.push({type:0,value:c}):1===A||2===A||3===A?(s.length>1&&("*"===o||"+"===o)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:"*"===o||"+"===o,optional:"*"===o||"?"===o})):t("Invalid state to consume buffer"),c="")}function h(){c+=o}while(a<e.length)if(o=e[a++],"\\"!==o||2===A)switch(A){case 0:"/"===o?(c&&l(),i()):":"===o?(l(),A=1):h();break;case 4:h(),A=n;break;case 1:"("===o?A=2:ie.test(o)?h():(l(),A=0,"*"!==o&&"?"!==o&&"+"!==o&&a--);break;case 2:")"===o?"\\"==u[u.length-1]?u=u.slice(0,-1)+o:A=3:u+=o;break;case 3:l(),A=0,"*"!==o&&"?"!==o&&"+"!==o&&a--,u="";break;default:t("Unknown state");break}else n=A,A=4;return 2===A&&t(`Unfinished custom RegExp for param "${c}"`),l(),i(),r}function ae(e,t,A){const n=Ae(oe(e.path),A);const r=f(n,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf===!t.record.aliasOf&&t.children.push(r),r}function ce(e,t){const A=[],n=new Map;function r(e){return n.get(e)}function s(e,A,n){const r=!n,o=le(e);o.aliasOf=n&&n.record;const c=ge(t,e),u=[o];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(f({},o,{components:n?n.record.components:o.components,path:e,aliasOf:n?n.record:o}))}let l,h;for(const t of u){const{path:u}=t;if(A&&"/"!==u[0]){const e=A.record.path,n="/"===e[e.length-1]?"":"/";t.path=A.record.path+(u&&n+u)}if(l=ae(t,A,c),n?n.alias.push(l):(h=h||l,h!==l&&h.alias.push(l),r&&e.name&&!de(l)&&i(e.name)),"children"in o){const e=o.children;for(let t=0;t<e.length;t++)s(e[t],l,n&&n.children[t])}n=n||l,a(l)}return h?()=>{i(h)}:p}function i(e){if(j(e)){const t=n.get(e);t&&(n.delete(e),A.splice(A.indexOf(t),1),t.children.forEach(i),t.alias.forEach(i))}else{const t=A.indexOf(e);t>-1&&(A.splice(t,1),e.record.name&&n.delete(e.record.name),e.children.forEach(i),e.alias.forEach(i))}}function o(){return A}function a(e){let t=0;while(t<A.length&&re(e,A[t])>=0&&(e.record.path!==A[t].record.path||!pe(e,A[t])))t++;A.splice(t,0,e),e.record.name&&!de(e)&&n.set(e.record.name,e)}function c(e,t){let r,s,i,o={};if("name"in e&&e.name){if(r=n.get(e.name),!r)throw z(1,{location:e});i=r.record.name,o=f(ue(t.params,r.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params),s=r.stringify(o)}else if("path"in e)s=e.path,r=A.find((e=>e.re.test(s))),r&&(o=r.parse(s),i=r.record.name);else{if(r=t.name?n.get(t.name):A.find((e=>e.re.test(t.path))),!r)throw z(1,{location:e,currentLocation:t});i=r.record.name,o=f({},t.params,e.params),s=r.stringify(o)}const a=[];let c=r;while(c)a.unshift(c.record),c=c.parent;return{name:i,path:s,params:o,matched:a,meta:fe(a)}}return t=ge({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>s(e))),{addRoute:s,resolve:c,removeRoute:i,getRoutes:o,getRecordMatcher:r}}function ue(e,t){const A={};for(const n of t)n in e&&(A[n]=e[n]);return A}function le(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:he(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function he(e){const t={},A=e.props||!1;if("component"in e)t.default=A;else for(const n in e.components)t[n]="boolean"===typeof A?A:A[n];return t}function de(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function fe(e){return e.reduce(((e,t)=>f(e,t.meta)),{})}function ge(e,t){const A={};for(const n in e)A[n]=n in t?t[n]:e[n];return A}function pe(e,t){return t.children.some((t=>t===e||pe(e,t)))}const Be=/#/g,me=/&/g,we=/\//g,ye=/=/g,Ce=/\?/g,ve=/\+/g,Qe=/%5B/g,_e=/%5D/g,Fe=/%5E/g,Ue=/%60/g,Ee=/%7B/g,Ie=/%7C/g,be=/%7D/g,Te=/%20/g;function Se(e){return encodeURI(""+e).replace(Ie,"|").replace(Qe,"[").replace(_e,"]")}function De(e){return Se(e).replace(Ee,"{").replace(be,"}").replace(Fe,"^")}function xe(e){return Se(e).replace(ve,"%2B").replace(Te,"+").replace(Be,"%23").replace(me,"%26").replace(Ue,"`").replace(Ee,"{").replace(be,"}").replace(Fe,"^")}function He(e){return xe(e).replace(ye,"%3D")}function ke(e){return Se(e).replace(Be,"%23").replace(Ce,"%3F")}function Le(e){return null==e?"":ke(e).replace(we,"%2F")}function Ne(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Re(e){const t={};if(""===e||"?"===e)return t;const A="?"===e[0],n=(A?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(ve," "),A=e.indexOf("="),s=Ne(A<0?e:e.slice(0,A)),i=A<0?null:Ne(e.slice(A+1));if(s in t){let e=t[s];Array.isArray(e)||(e=t[s]=[e]),e.push(i)}else t[s]=i}return t}function Me(e){let t="";for(let A in e){const n=e[A];if(A=He(A),null==n){void 0!==n&&(t+=(t.length?"&":"")+A);continue}const r=Array.isArray(n)?n.map((e=>e&&xe(e))):[n&&xe(n)];r.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+A,null!=e&&(t+="="+e))}))}return t}function Oe(e){const t={};for(const A in e){const n=e[A];void 0!==n&&(t[A]=Array.isArray(n)?n.map((e=>null==e?null:""+e)):null==n?n:""+n)}return t}function Pe(){let e=[];function t(t){return e.push(t),()=>{const A=e.indexOf(t);A>-1&&e.splice(A,1)}}function A(){e=[]}return{add:t,list:()=>e,reset:A}}function Ke(e,t,A,n,r){const s=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise(((i,o)=>{const a=e=>{!1===e?o(z(4,{from:A,to:t})):e instanceof Error?o(e):W(e)?o(z(2,{from:t,to:e})):(s&&n.enterCallbacks[r]===s&&"function"===typeof e&&s.push(e),i())},c=e.call(n&&n.instances[r],t,A,a);let u=Promise.resolve(c);e.length<3&&(u=u.then(a)),u.catch((e=>o(e)))}))}function Ve(e,t,A,n){const r=[];for(const s of e)for(const e in s.components){let i=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if(Ge(i)){const o=i.__vccOpts||i,a=o[t];a&&r.push(Ke(a,A,n,s,e))}else{let o=i();0,r.push((()=>o.then((r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${s.path}"`));const i=d(r)?r.default:r;s.components[e]=i;const o=i.__vccOpts||i,a=o[t];return a&&Ke(a,A,n,s,e)()}))))}}return r}function Ge(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function qe(e){const t=(0,n.f3)(c),A=(0,n.f3)(u),s=(0,n.Fl)((()=>t.resolve((0,r.SU)(e.to)))),i=(0,n.Fl)((()=>{const{matched:e}=s.value,{length:t}=e,n=e[t-1],r=A.matched;if(!n||!r.length)return-1;const i=r.findIndex(Q.bind(null,n));if(i>-1)return i;const o=Xe(e[t-2]);return t>1&&Xe(n)===o&&r[r.length-1].path!==o?r.findIndex(Q.bind(null,e[t-2])):i})),o=(0,n.Fl)((()=>i.value>-1&&Ye(A.params,s.value.params))),a=(0,n.Fl)((()=>i.value>-1&&i.value===A.matched.length-1&&_(A.params,s.value.params)));function l(A={}){return Je(A)?t[(0,r.SU)(e.replace)?"replace":"push"]((0,r.SU)(e.to)).catch(p):Promise.resolve()}return{route:s,href:(0,n.Fl)((()=>s.value.href)),isActive:o,isExactActive:a,navigate:l}}const We=(0,n.aZ)({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qe,setup(e,{slots:t}){const A=(0,r.qj)(qe(e)),{options:s}=(0,n.f3)(c),i=(0,n.Fl)((()=>({[ze(e.activeClass,s.linkActiveClass,"router-link-active")]:A.isActive,[ze(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:A.isExactActive})));return()=>{const r=t.default&&t.default(A);return e.custom?r:(0,n.h)("a",{"aria-current":A.isExactActive?e.ariaCurrentValue:null,href:A.href,onClick:A.navigate,class:i.value},r)}}}),je=We;function Je(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ye(e,t){for(const A in t){const n=t[A],r=e[A];if("string"===typeof n){if(n!==r)return!1}else if(!Array.isArray(r)||r.length!==n.length||n.some(((e,t)=>e!==r[t])))return!1}return!0}function Xe(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ze=(e,t,A)=>null!=e?e:null!=t?t:A,$e=(0,n.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:A}){const s=(0,n.f3)(l),i=(0,n.Fl)((()=>e.route||s.value)),c=(0,n.f3)(a,0),u=(0,n.Fl)((()=>i.value.matched[c]));(0,n.JJ)(a,c+1),(0,n.JJ)(o,u),(0,n.JJ)(l,i);const h=(0,r.iH)();return(0,n.YP)((()=>[h.value,u.value,e.name]),(([e,t,A],[n,r,s])=>{t&&(t.instances[A]=e,r&&r!==t&&e&&e===n&&(t.leaveGuards.size||(t.leaveGuards=r.leaveGuards),t.updateGuards.size||(t.updateGuards=r.updateGuards))),!e||!t||r&&Q(t,r)&&n||(t.enterCallbacks[A]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const r=i.value,s=u.value,o=s&&s.components[e.name],a=e.name;if(!o)return Ze(A.default,{Component:o,route:r});const c=s.props[e.name],l=c?!0===c?r.params:"function"===typeof c?c(r):c:null,d=e=>{e.component.isUnmounted&&(s.instances[a]=null)},g=(0,n.h)(o,f({},l,t,{onVnodeUnmounted:d,ref:h}));return Ze(A.default,{Component:g,route:r})||g}}});function Ze(e,t){if(!e)return null;const A=e(t);return 1===A.length?A[0]:A}const et=$e;function tt(e){const t=ce(e.routes,e),A=e.parseQuery||Re,s=e.stringifyQuery||Me,i=e.history;const o=Pe(),a=Pe(),d=Pe(),B=(0,r.XI)(J);let m=J;h&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const C=g.bind(null,(e=>""+e)),Q=g.bind(null,Le),_=g.bind(null,Ne);function F(e,A){let n,r;return j(e)?(n=t.getRecordMatcher(e),r=A):r=e,t.addRoute(r,n)}function U(e){const A=t.getRecordMatcher(e);A&&t.removeRoute(A)}function E(){return t.getRoutes().map((e=>e.record))}function b(e){return!!t.getRecordMatcher(e)}function T(e,n){if(n=f({},n||B.value),"string"===typeof e){const r=w(A,e,n.path),s=t.resolve({path:r.path},n),o=i.createHref(r.fullPath);return f(r,s,{params:_(s.params),hash:Ne(r.hash),redirectedFrom:void 0,href:o})}let r;if("path"in e)r=f({},e,{path:w(A,e.path,n.path).path});else{const t=f({},e.params);for(const e in t)null==t[e]&&delete t[e];r=f({},e,{params:Q(e.params)}),n.params=Q(n.params)}const o=t.resolve(r,n),a=e.hash||"";o.params=C(_(o.params));const c=y(s,f({},e,{hash:De(a),path:o.path})),u=i.createHref(c);return f({fullPath:c,hash:a,query:s===Me?Oe(e.query):e.query||{}},o,{redirectedFrom:void 0,href:u})}function S(e){return"string"===typeof e?w(A,e,B.value.path):f({},e)}function D(e,t){if(m!==e)return z(8,{from:t,to:e})}function x(e){return P(e)}function N(e){return x(f(S(e),{replace:!0}))}function O(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:A}=t;let n="function"===typeof A?A(e):A;return"string"===typeof n&&(n=n.includes("?")||n.includes("#")?n=S(n):{path:n},n.params={}),f({query:e.query,hash:e.hash,params:e.params},n)}}function P(e,t){const A=m=T(e),n=B.value,r=e.state,i=e.force,o=!0===e.replace,a=O(A);if(a)return P(f(S(a),{state:r,force:i,replace:o}),t||A);const c=A;let u;return c.redirectedFrom=t,!i&&v(s,n,A)&&(u=z(16,{to:c,from:n}),re(n,n,!0,!1)),(u?Promise.resolve(u):V(c,n)).catch((e=>$(e)?$(e,2)?e:ne(e):te(e,c,n))).then((e=>{if(e){if($(e,2))return P(f(S(e.to),{state:r,force:i,replace:o}),t||c)}else e=q(c,n,!0,o,r);return G(c,n,e),e}))}function K(e,t){const A=D(e,t);return A?Promise.reject(A):Promise.resolve()}function V(e,t){let A;const[n,r,s]=nt(e,t);A=Ve(n.reverse(),"beforeRouteLeave",e,t);for(const o of n)o.leaveGuards.forEach((n=>{A.push(Ke(n,e,t))}));const i=K.bind(null,e,t);return A.push(i),At(A).then((()=>{A=[];for(const n of o.list())A.push(Ke(n,e,t));return A.push(i),At(A)})).then((()=>{A=Ve(r,"beforeRouteUpdate",e,t);for(const n of r)n.updateGuards.forEach((n=>{A.push(Ke(n,e,t))}));return A.push(i),At(A)})).then((()=>{A=[];for(const n of e.matched)if(n.beforeEnter&&!t.matched.includes(n))if(Array.isArray(n.beforeEnter))for(const r of n.beforeEnter)A.push(Ke(r,e,t));else A.push(Ke(n.beforeEnter,e,t));return A.push(i),At(A)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),A=Ve(s,"beforeRouteEnter",e,t),A.push(i),At(A)))).then((()=>{A=[];for(const n of a.list())A.push(Ke(n,e,t));return A.push(i),At(A)})).catch((e=>$(e,8)?e:Promise.reject(e)))}function G(e,t,A){for(const n of d.list())n(e,t,A)}function q(e,t,A,n,r){const s=D(e,t);if(s)return s;const o=t===J,a=h?history.state:{};A&&(n||o?i.replace(e.fullPath,f({scroll:o&&a&&a.scroll},r)):i.push(e.fullPath,r)),B.value=e,re(e,t,A,o),ne()}let W;function Y(){W=i.listen(((e,t,A)=>{const n=T(e),r=O(n);if(r)return void P(f(r,{replace:!0}),n).catch(p);m=n;const s=B.value;h&&R(L(s.fullPath,A.delta),H()),V(n,s).catch((e=>$(e,12)?e:$(e,2)?(P(e.to,n).then((e=>{$(e,20)&&!A.delta&&A.type===I.pop&&i.go(-1,!1)})).catch(p),Promise.reject()):(A.delta&&i.go(-A.delta,!1),te(e,n,s)))).then((e=>{e=e||q(n,s,!1),e&&(A.delta?i.go(-A.delta,!1):A.type===I.pop&&$(e,20)&&i.go(-1,!1)),G(n,s,e)})).catch(p)}))}let X,Z=Pe(),ee=Pe();function te(e,t,A){ne(e);const n=ee.list();return n.length?n.forEach((n=>n(e,t,A))):console.error(e),Promise.reject(e)}function Ae(){return X&&B.value!==J?Promise.resolve():new Promise(((e,t)=>{Z.add([e,t])}))}function ne(e){return X||(X=!e,Y(),Z.list().forEach((([t,A])=>e?A(e):t())),Z.reset()),e}function re(t,A,r,s){const{scrollBehavior:i}=e;if(!h||!i)return Promise.resolve();const o=!r&&M(L(t.fullPath,0))||(s||!r)&&history.state&&history.state.scroll||null;return(0,n.Y3)().then((()=>i(t,A,o))).then((e=>e&&k(e))).catch((e=>te(e,t,A)))}const se=e=>i.go(e);let ie;const oe=new Set,ae={currentRoute:B,addRoute:F,removeRoute:U,hasRoute:b,getRoutes:E,resolve:T,options:e,push:x,replace:N,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:o.add,beforeResolve:a.add,afterEach:d.add,onError:ee.add,isReady:Ae,install(e){const t=this;e.component("RouterLink",je),e.component("RouterView",et),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,r.SU)(B)}),h&&!ie&&B.value===J&&(ie=!0,x(i.location).catch((e=>{0})));const A={};for(const r in J)A[r]=(0,n.Fl)((()=>B.value[r]));e.provide(c,t),e.provide(u,(0,r.qj)(A)),e.provide(l,B);const s=e.unmount;oe.add(e),e.unmount=function(){oe.delete(e),oe.size<1&&(m=J,W&&W(),B.value=J,ie=!1,X=!1),s()}}};return ae}function At(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function nt(e,t){const A=[],n=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let i=0;i<s;i++){const s=t.matched[i];s&&(e.matched.find((e=>Q(e,s)))?n.push(s):A.push(s));const o=e.matched[i];o&&(t.matched.find((e=>Q(e,o)))||r.push(o))}return[A,n,r]}},180:function(e,t,A){"use strict";A.d(t,{Z:function(){return B}});var n=A(444),r=A(463),s=A(816),i=A(333);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class o{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new r.wA("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate))))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var A;this._delegate.checkDestroyed();const n=this._delegate.container.getProvider(e);return n.isInitialized()||"EXPLICIT"!==(null===(A=n.getComponent())||void 0===A?void 0:A.instantiationMode)||n.initialize(),n.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},c=new n.LL("app-compat","Firebase",a);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(e){const t={},A={__esModule:!0,initializeApp:o,app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:u,removeApp:r,useAsService:l,modularAPIs:s}};function r(e){delete t[e]}function i(e){if(e=e||s._DEFAULT_ENTRY_NAME,!(0,n.r3)(t,e))throw c.create("no-app",{appName:e});return t[e]}function o(r,i={}){const o=s.initializeApp(r,i);if((0,n.r3)(t,o.name))return t[o.name];const a=new e(o,A);return t[o.name]=a,a}function a(){return Object.keys(t).map((e=>t[e]))}function u(t){const r=t.name,o=r.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!==typeof e[o])throw c.create("invalid-app-argument",{appName:r});return e[o]()};void 0!==t.serviceProps&&(0,n.ZB)(s,t.serviceProps),A[o]=s,e.prototype[o]=function(...e){const A=this._getService.bind(this,r);return A.apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?A[o]:null}function l(e,t){if("serverAuth"===t)return null;const A=t;return A}return A["default"]=A,Object.defineProperty(A,"apps",{get:a}),i["App"]=e,A}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(){const e=u(o);function t(t){(0,n.ZB)(e,t)}return e.INTERNAL=Object.assign(Object.assign({},e.INTERNAL),{createFirebaseNamespace:l,extendNamespace:t,createSubscribe:n.ne,ErrorFactory:n.LL,deepExtend:n.ZB}),e}const h=l(),d=new i.Yd("@firebase/app-compat"),f="@firebase/app-compat",g="0.1.26";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function p(e){(0,s.registerVersion)(f,g,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,n.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const B=h;p()},816:function(e,t,A){"use strict";A.r(t),A.d(t,{FirebaseError:function(){return s.ZR},SDK_VERSION:function(){return me},_DEFAULT_ENTRY_NAME:function(){return se},_addComponent:function(){return ce},_addOrOverwriteComponent:function(){return ue},_apps:function(){return oe},_clearComponents:function(){return fe},_components:function(){return ae},_getProvider:function(){return he},_registerComponent:function(){return le},_removeServiceInstance:function(){return de},deleteApp:function(){return ve},getApp:function(){return ye},getApps:function(){return Ce},initializeApp:function(){return we},onLog:function(){return _e},registerVersion:function(){return Qe},setLogLevel:function(){return Fe}});var n=A(463),r=A(333),s=A(444);const i=(e,t)=>t.some((t=>e instanceof t));let o,a;function c(){return o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u(){return a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,g=new WeakMap;function p(e){const t=new Promise(((t,A)=>{const n=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(v(e.result)),n()},s=()=>{A(e.error),n()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&l.set(t,e)})).catch((()=>{})),g.set(t,e),t}function B(e){if(h.has(e))return;const t=new Promise(((t,A)=>{const n=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),n()},s=()=>{A(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));h.set(e,t)}let m={get(e,t,A){if(e instanceof IDBTransaction){if("done"===t)return h.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return v(e[t])},set(e,t,A){return e[t]=A,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function w(e){m=e(m)}function y(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?u().includes(e)?function(...t){return e.apply(Q(this),t),v(l.get(this))}:function(...t){return v(e.apply(Q(this),t))}:function(t,...A){const n=e.call(Q(this),t,...A);return d.set(n,t.sort?t.sort():[t]),v(n)}}function C(e){return"function"===typeof e?y(e):(e instanceof IDBTransaction&&B(e),i(e,c())?new Proxy(e,m):e)}function v(e){if(e instanceof IDBRequest)return p(e);if(f.has(e))return f.get(e);const t=C(e);return t!==e&&(f.set(e,t),g.set(t,e)),t}const Q=e=>g.get(e);function _(e,t,{blocked:A,upgrade:n,blocking:r,terminated:s}={}){const i=indexedDB.open(e,t),o=v(i);return n&&i.addEventListener("upgradeneeded",(e=>{n(v(i.result),e.oldVersion,e.newVersion,v(i.transaction))})),A&&i.addEventListener("blocked",(()=>A())),o.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),o}const F=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],E=new Map;function I(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(E.get(t))return E.get(t);const A=t.replace(/FromIndex$/,""),n=t!==A,r=U.includes(A);if(!(A in(n?IDBIndex:IDBObjectStore).prototype)||!r&&!F.includes(A))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let i=s.store;return n&&(i=i.index(t.shift())),(await Promise.all([i[A](...t),r&&s.done]))[0]};return E.set(t,s),s}w((e=>({...e,get:(t,A,n)=>I(t,A)||e.get(t,A,n),has:(t,A)=>!!I(t,A)||e.has(t,A)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class b{constructor(e){this.container=e}getPlatformInfoString(){const e=this.container.getProviders();return e.map((e=>{if(T(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}function T(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}const S="@firebase/app",D="0.7.25",x=new r.Yd("@firebase/app"),H="@firebase/app-compat",k="@firebase/analytics-compat",L="@firebase/analytics",N="@firebase/app-check-compat",R="@firebase/app-check",M="@firebase/auth",O="@firebase/auth-compat",P="@firebase/database",K="@firebase/database-compat",V="@firebase/functions",G="@firebase/functions-compat",q="@firebase/installations",W="@firebase/installations-compat",j="@firebase/messaging",J="@firebase/messaging-compat",Y="@firebase/performance",X="@firebase/performance-compat",z="@firebase/remote-config",$="@firebase/remote-config-compat",Z="@firebase/storage",ee="@firebase/storage-compat",te="@firebase/firestore",Ae="@firebase/firestore-compat",ne="firebase",re="9.8.2",se="[DEFAULT]",ie={[S]:"fire-core",[H]:"fire-core-compat",[L]:"fire-analytics",[k]:"fire-analytics-compat",[R]:"fire-app-check",[N]:"fire-app-check-compat",[M]:"fire-auth",[O]:"fire-auth-compat",[P]:"fire-rtdb",[K]:"fire-rtdb-compat",[V]:"fire-fn",[G]:"fire-fn-compat",[q]:"fire-iid",[W]:"fire-iid-compat",[j]:"fire-fcm",[J]:"fire-fcm-compat",[Y]:"fire-perf",[X]:"fire-perf-compat",[z]:"fire-rc",[$]:"fire-rc-compat",[Z]:"fire-gcs",[ee]:"fire-gcs-compat",[te]:"fire-fst",[Ae]:"fire-fst-compat","fire-js":"fire-js",[ne]:"fire-js-all"},oe=new Map,ae=new Map;function ce(e,t){try{e.container.addComponent(t)}catch(A){x.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,A)}}function ue(e,t){e.container.addOrOverwriteComponent(t)}function le(e){const t=e.name;if(ae.has(t))return x.debug(`There were multiple attempts to register component ${t}.`),!1;ae.set(t,e);for(const A of oe.values())ce(A,e);return!0}function he(e,t){const A=e.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),e.container.getProvider(t)}function de(e,t,A=se){he(e,t).clearInstance(A)}function fe(){ae.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},pe=new s.LL("app","Firebase",ge);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Be{constructor(e,t,A){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=A,this.container.addComponent(new n.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pe.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me=re;function we(e,t={}){if("object"!==typeof t){const e=t;t={name:e}}const A=Object.assign({name:se,automaticDataCollectionEnabled:!1},t),r=A.name;if("string"!==typeof r||!r)throw pe.create("bad-app-name",{appName:String(r)});const i=oe.get(r);if(i){if((0,s.vZ)(e,i.options)&&(0,s.vZ)(A,i.config))return i;throw pe.create("duplicate-app",{appName:r})}const o=new n.H0(r);for(const n of ae.values())o.addComponent(n);const a=new Be(e,A,o);return oe.set(r,a),a}function ye(e=se){const t=oe.get(e);if(!t)throw pe.create("no-app",{appName:e});return t}function Ce(){return Array.from(oe.values())}async function ve(e){const t=e.name;oe.has(t)&&(oe.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Qe(e,t,A){var r;let s=null!==(r=ie[e])&&void 0!==r?r:e;A&&(s+=`-${A}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void x.warn(e.join(" "))}le(new n.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}function _e(e,t){if(null!==e&&"function"!==typeof e)throw pe.create("invalid-log-argument");(0,r.Am)(e,t)}function Fe(e){(0,r.Ub)(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue="firebase-heartbeat-database",Ee=1,Ie="firebase-heartbeat-store";let be=null;function Te(){return be||(be=_(Ue,Ee,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Ie)}}}).catch((e=>{throw pe.create("storage-open",{originalErrorMessage:e.message})}))),be}async function Se(e){try{const t=await Te();return t.transaction(Ie).objectStore(Ie).get(xe(e))}catch(t){throw pe.create("storage-get",{originalErrorMessage:t.message})}}async function De(e,t){try{const A=await Te(),n=A.transaction(Ie,"readwrite"),r=n.objectStore(Ie);return await r.put(t,xe(e)),n.done}catch(A){throw pe.create("storage-set",{originalErrorMessage:A.message})}}function xe(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He=1024,ke=2592e6;class Le{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Me(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),A=Ne();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==A&&!this._heartbeatsCache.heartbeats.some((e=>e.date===A)))return this._heartbeatsCache.heartbeats.push({date:A,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf(),A=Date.now();return A-t<=ke})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ne(),{heartbeatsToSend:t,unsentEntries:A}=Re(this._heartbeatsCache.heartbeats),n=(0,s.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function Ne(){const e=new Date;return e.toISOString().substring(0,10)}function Re(e,t=He){const A=[];let n=e.slice();for(const r of e){const e=A.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Oe(A)>t){e.dates.pop();break}}else if(A.push({agent:r.agent,dates:[r.date]}),Oe(A)>t){A.pop();break}n=n.slice(1)}return{heartbeatsToSend:A,unsentEntries:n}}class Me{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){const e=await this._canUseIndexedDBPromise;if(e){const e=await Se(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;const A=await this._canUseIndexedDBPromise;if(A){const A=await this.read();return De(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:A.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;const A=await this._canUseIndexedDBPromise;if(A){const A=await this.read();return De(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...e.heartbeats]})}}}function Oe(e){return(0,s.L)(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(e){le(new n.wA("platform-logger",(e=>new b(e)),"PRIVATE")),le(new n.wA("heartbeat",(e=>new Le(e)),"PRIVATE")),Qe(S,D,e),Qe(S,D,"esm2017"),Qe("fire-js","")}Pe("")},463:function(e,t,A){"use strict";A.d(t,{H0:function(){return c},wA:function(){return r},zt:function(){return i}});var n=A(444);class r{constructor(e,t,A){this.name=e,this.instanceFactory=t,this.type=A,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new n.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:t});A&&e.resolve(A)}catch(A){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const A=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),n=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(A)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:A})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(a(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,A]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});A.resolve(e)}catch(t){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,A=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(A))throw Error(`${this.name}(${A}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:A,options:t});for(const[r,s]of this.instancesDeferred.entries()){const e=this.normalizeInstanceIdentifier(r);A===e&&s.resolve(n)}return n}onInit(e,t){var A;const n=this.normalizeInstanceIdentifier(t),r=null!==(A=this.onInitCallbacks.get(n))&&void 0!==A?A:new Set;r.add(e),this.onInitCallbacks.set(n,r);const s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const A=this.onInitCallbacks.get(t);if(A)for(const r of A)try{r(e,t)}catch(n){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let A=this.instances.get(e);if(!A&&this.component&&(A=this.component.instanceFactory(this.container,{instanceIdentifier:o(e),options:t}),this.instances.set(e,A),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(A,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,A)}catch(n){}return A||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function o(e){return e===s?void 0:e}function a(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){const t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new i(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},333:function(e,t,A){"use strict";A.d(t,{Am:function(){return l},Ub:function(){return u},Yd:function(){return c},in:function(){return r}});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const n=[];var r;(function(e){e[e["DEBUG"]=0]="DEBUG",e[e["VERBOSE"]=1]="VERBOSE",e[e["INFO"]=2]="INFO",e[e["WARN"]=3]="WARN",e[e["ERROR"]=4]="ERROR",e[e["SILENT"]=5]="SILENT"})(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},i=r.INFO,o={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},a=(e,t,...A)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${n}]  ${e.name}:`,...A)};class c{constructor(e){this.name=e,this._logLevel=i,this._logHandler=a,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}function u(e){n.forEach((t=>{t.setLogLevel(e)}))}function l(e,t){for(const A of n){let n=null;t&&t.level&&(n=s[t.level]),A.userLogHandler=null===e?null:(t,A,...s)=>{const i=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");A>=(null!==n&&void 0!==n?n:t.logLevel)&&e({level:r[A].toLowerCase(),message:i,args:s,type:t.name})}}}}}]);
//# sourceMappingURL=chunk-vendors.d70f76e4.js.map